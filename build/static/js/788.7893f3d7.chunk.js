"use strict";(self.webpackChunkpizzeria_escandalosos=self.webpackChunkpizzeria_escandalosos||[]).push([[788],{788:(e,i,s)=>{s.r(i),s.d(i,{default:()=>o});var a=s(43),n=s(172),c=s(380),t=s(24),l=s(284),r=s(603),d=s(579);const o=e=>{var i,s;let{product:o,isOpen:m,onClose:u}=e;const{addToCart:p}=(0,a.useContext)(r.M),[h,x]=(0,a.useState)(null),[j,v]=(0,a.useState)([]),[g,N]=(0,a.useState)([]),[z,C]=(0,a.useState)([]),[b,f]=(0,a.useState)(1),[k,y]=(0,a.useState)(""),[q,A]=(0,a.useState)(0),S=[{id:"personal",name:"Personal",price:0},{id:"mediana",name:"Mediana",price:2e3},{id:"familiar",name:"Familiar",price:4e3},{id:"gigante",name:"Gigante",price:6e3}];(0,a.useEffect)(()=>{o&&S.length>0&&x(S[0])},[o]),(0,a.useEffect)(()=>{I()},[h,z,b]);const I=()=>{if(!o||!h)return;let e=parseFloat(o.price),i=h.price,s=z.reduce((e,i)=>e+i.price,0);A((e+i+s)*b)},P=e=>new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP",minimumFractionDigits:0,maximumFractionDigits:0}).format(e);return m?(0,d.jsx)("div",{className:"customization-modal-overlay",onClick:u,children:(0,d.jsxs)("div",{className:"customization-modal",onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("div",{className:"customization-header",children:[(0,d.jsxs)("h2",{children:["Personaliza tu ",o.name]}),(0,d.jsx)("button",{className:"customization-close",onClick:u,children:(0,d.jsx)(n.A,{size:24})})]}),(0,d.jsxs)("div",{className:"customization-content",children:[(0,d.jsxs)("div",{className:"customization-product-info",children:[(null===(i=o.images)||void 0===i||null===(s=i[0])||void 0===s?void 0:s.src)&&(0,d.jsx)("img",{src:o.images[0].src,alt:o.name,className:"customization-product-image"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{children:o.name}),o.short_description&&(0,d.jsx)("p",{dangerouslySetInnerHTML:{__html:o.short_description}})]})]}),(0,d.jsxs)("div",{className:"customization-section",children:[(0,d.jsx)("h4",{children:"Elige el tama\xf1o"}),(0,d.jsx)("div",{className:"size-options",children:S.map(e=>(0,d.jsxs)("label",{className:"size-option",children:[(0,d.jsx)("input",{type:"radio",name:"size",value:e.id,checked:(null===h||void 0===h?void 0:h.id)===e.id,onChange:()=>x(e)}),(0,d.jsxs)("div",{className:"size-option-content",children:[(0,d.jsx)("span",{className:"size-name",children:e.name}),e.price>0&&(0,d.jsxs)("span",{className:"size-price",children:["+",P(e.price)]})]})]},e.id))})]}),(0,d.jsxs)("div",{className:"customization-section",children:[(0,d.jsx)("h4",{children:"Ingredientes incluidos"}),(0,d.jsx)("p",{className:"section-description",children:"Puedes quitar los que no desees"}),(0,d.jsx)("div",{className:"default-ingredients",children:["queso","salsa","oregano"].map(e=>(0,d.jsxs)("div",{className:"ingredient-chip "+(g.includes(e)?"removed":""),onClick:()=>{return i=e,void(g.includes(i)?N(g.filter(e=>e!==i)):N([...g,i]));var i},children:[(0,d.jsx)("span",{children:e}),g.includes(e)?(0,d.jsx)(c.A,{size:16}):(0,d.jsx)(n.A,{size:16})]},e))})]}),(0,d.jsxs)("div",{className:"customization-section",children:[(0,d.jsx)("h4",{children:"Agrega ingredientes extra"}),(0,d.jsx)("div",{className:"extra-ingredients",children:[{id:"queso",name:"Queso Extra",price:1500},{id:"pepperoni",name:"Pepperoni",price:2e3},{id:"champinones",name:"Champi\xf1ones",price:1500},{id:"jamon",name:"Jam\xf3n",price:1800},{id:"pina",name:"Pi\xf1a",price:1500},{id:"aceituna",name:"Aceitunas",price:1200},{id:"cebolla",name:"Cebolla",price:1e3},{id:"pimenton",name:"Piment\xf3n",price:1200}].map(e=>(0,d.jsxs)("label",{className:"ingredient-option",children:[(0,d.jsx)("input",{type:"checkbox",checked:z.some(i=>i.id===e.id),onChange:()=>(e=>{z.find(i=>i.id===e.id)?C(z.filter(i=>i.id!==e.id)):C([...z,e])})(e)}),(0,d.jsxs)("div",{className:"ingredient-option-content",children:[(0,d.jsx)("span",{className:"ingredient-name",children:e.name}),(0,d.jsxs)("span",{className:"ingredient-price",children:["+",P(e.price)]})]}),(0,d.jsx)("div",{className:"ingredient-checkbox",children:z.some(i=>i.id===e.id)&&(0,d.jsx)(t.A,{size:16})})]},e.id))})]}),(0,d.jsxs)("div",{className:"customization-section",children:[(0,d.jsx)("h4",{children:"Instrucciones especiales (opcional)"}),(0,d.jsx)("textarea",{placeholder:"Ej: Sin cebolla, poco cocida, extra crujiente...",value:k,onChange:e=>y(e.target.value),className:"special-instructions",rows:3})]}),(0,d.jsxs)("div",{className:"customization-section",children:[(0,d.jsx)("h4",{children:"Cantidad"}),(0,d.jsxs)("div",{className:"quantity-selector",children:[(0,d.jsx)("button",{onClick:()=>f(Math.max(1,b-1)),className:"quantity-btn",children:(0,d.jsx)(l.A,{size:20})}),(0,d.jsx)("span",{className:"quantity-value",children:b}),(0,d.jsx)("button",{onClick:()=>f(b+1),className:"quantity-btn",children:(0,d.jsx)(c.A,{size:20})})]})]})]}),(0,d.jsxs)("div",{className:"customization-footer",children:[(0,d.jsxs)("div",{className:"total-info",children:[(0,d.jsx)("span",{children:"Total:"}),(0,d.jsx)("span",{className:"total-price",children:P(q)})]}),(0,d.jsx)("button",{className:"btn btn-primary add-to-cart-btn",onClick:()=>{var e,i;const s={size:h,extraIngredients:z,removedIngredients:g,specialInstructions:k};p({id:`${o.id}-${Date.now()}`,productId:o.id,name:o.name,price:q/b,image:(null===(e=o.images)||void 0===e||null===(i=e[0])||void 0===i?void 0:i.src)||null,quantity:b,customizations:s}),u()},children:"Agregar al carrito"})]})]})}):null}}}]);
//# sourceMappingURL=788.7893f3d7.chunk.js.map