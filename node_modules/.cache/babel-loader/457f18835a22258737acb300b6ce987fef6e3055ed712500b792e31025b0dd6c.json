{"ast":null,"code":"// src/services/woocommerceApi.js\nimport{getApiUrl,getAuthHeaders}from'../config/woocommerce';class WooCommerceAPI{constructor(){// Cache para configuraciones\nthis.cache={shippingZones:null,paymentGateways:null,storeSettings:null,shippingMethods:null};}// Método genérico para hacer peticiones\nasync request(endpoint){let method=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'GET';let data=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;try{const url=getApiUrl(endpoint);const options={method,headers:getAuthHeaders()};if(data&&method!=='GET'){options.body=JSON.stringify(data);}console.log('Request URL:',url);console.log('Request options:',options);const response=await fetch(url,options);// Intentar obtener el cuerpo de la respuesta\nconst responseText=await response.text();let responseData;try{responseData=JSON.parse(responseText);}catch(e){responseData=responseText;}if(!response.ok){console.error('Error response:',responseData);throw new Error(`Error ${response.status}: ${responseData.message||responseData.code||response.statusText}`);}return responseData;}catch(error){console.error('Error en la petición a WooCommerce:',error);throw error;}}// === PRODUCTOS ===\n// Obtener todos los productos\nasync getProducts(){let params=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};const queryParams=new URLSearchParams({per_page:100,...params}).toString();const products=await this.request(`products?${queryParams}`);// Para productos variables, cargar las variaciones y calcular el rango de precios\nconst productsWithPriceRange=await Promise.all(products.map(async product=>{if(product.type==='variable'&&product.variations&&product.variations.length>0){try{// Obtener las variaciones del producto\nconst variations=await this.getProductVariations(product.id);if(variations&&variations.length>0){// Calcular precio mínimo y máximo\nconst prices=variations.map(v=>parseFloat(v.price)).filter(p=>!isNaN(p));if(prices.length>0){product.price_range={min_price:Math.min(...prices),max_price:Math.max(...prices)};// También actualizar el precio base al máximo para mostrar el precio familiar\nproduct.display_price=Math.max(...prices);}}}catch(error){console.error(`Error obteniendo variaciones para producto ${product.id}:`,error);}}return product;}));return productsWithPriceRange;}// Obtener un producto por ID\nasync getProduct(id){return this.request(`products/${id}`);}// Obtener variaciones de un producto\nasync getProductVariations(productId){return this.request(`products/${productId}/variations?per_page=100`);}// Obtener atributos de productos\nasync getProductAttributes(){return this.request('products/attributes');}// Obtener términos de un atributo\nasync getAttributeTerms(attributeId){return this.request(`products/attributes/${attributeId}/terms`);}// Obtener categorías de productos\nasync getCategories(){return this.request('products/categories?per_page=100');}// === CONFIGURACIONES DE LA TIENDA ===\n// Obtener información de la tienda\nasync getStoreInfo(){if(this.cache.storeSettings){return this.cache.storeSettings;}try{var _settings$find,_settings$find2,_settings$find3,_settings$find4,_settings$find5,_settings$find6,_settings$find7,_settings$find8;// Intentar obtener configuraciones generales\nconst settings=await this.request('settings/general');const storeInfo={name:((_settings$find=settings.find(s=>s.id==='blogname'))===null||_settings$find===void 0?void 0:_settings$find.value)||'Escandalosos Pizza',description:((_settings$find2=settings.find(s=>s.id==='blogdescription'))===null||_settings$find2===void 0?void 0:_settings$find2.value)||'Dark kitchen Isla de Maipo',address:((_settings$find3=settings.find(s=>s.id==='woocommerce_store_address'))===null||_settings$find3===void 0?void 0:_settings$find3.value)||'Camino las parcelas 12',address2:((_settings$find4=settings.find(s=>s.id==='woocommerce_store_address_2'))===null||_settings$find4===void 0?void 0:_settings$find4.value)||'',city:((_settings$find5=settings.find(s=>s.id==='woocommerce_store_city'))===null||_settings$find5===void 0?void 0:_settings$find5.value)||'Isla de Maipo',postcode:((_settings$find6=settings.find(s=>s.id==='woocommerce_store_postcode'))===null||_settings$find6===void 0?void 0:_settings$find6.value)||'',country:((_settings$find7=settings.find(s=>s.id==='woocommerce_default_country'))===null||_settings$find7===void 0?void 0:_settings$find7.value)||'CL',phone:'+56 942740261',email:'hola@escandalosospizza.cl',currency:((_settings$find8=settings.find(s=>s.id==='woocommerce_currency'))===null||_settings$find8===void 0?void 0:_settings$find8.value)||'CLP',// Horarios\nschedule:{monday_thursday:{open:'18:00',close:'22:00',label:'Lunes a jueves'},friday:{open:'18:00',close:'23:00',label:'Viernes'},saturday:{open:'13:00',close:'23:00',label:'Sábado'},sunday:{open:'13:00',close:'22:00',label:'Domingo'}},// Tiempos de entrega\ndeliveryTime:'30-45 minutos',pickupTime:'20-30 minutos'};this.cache.storeSettings=storeInfo;return storeInfo;}catch(error){console.error('Error obteniendo información de la tienda:',error);// Devolver valores por defecto\nreturn this.getDefaultStoreInfo();}}// === ENVÍO ===\n// Obtener zonas y métodos de envío\nasync getShippingMethods(){if(this.cache.shippingMethods){return this.cache.shippingMethods;}try{const zones=await this.request('shipping/zones');// Para cada zona, obtener sus métodos\nconst shippingData=await Promise.all(zones.map(async zone=>{try{const methods=await this.request(`shipping/zones/${zone.id}/methods`);// Filtrar y mapear métodos habilitados\nconst enabledMethods=methods.filter(m=>m.enabled).map(method=>{var _method$settings,_method$settings$cost,_method$settings2,_method$settings2$min;return{id:method.id,instanceId:method.instance_id,title:method.title,methodId:method.method_id,methodTitle:method.method_title,cost:((_method$settings=method.settings)===null||_method$settings===void 0?void 0:(_method$settings$cost=_method$settings.cost)===null||_method$settings$cost===void 0?void 0:_method$settings$cost.value)||'0',minAmount:((_method$settings2=method.settings)===null||_method$settings2===void 0?void 0:(_method$settings2$min=_method$settings2.min_amount)===null||_method$settings2$min===void 0?void 0:_method$settings2$min.value)||'0',enabled:method.enabled,requiresAddress:method.method_id!=='local_pickup'};});return{id:zone.id,name:zone.name,methods:enabledMethods};}catch(error){console.error(`Error obteniendo métodos para zona ${zone.id}:`,error);return{...zone,methods:[]};}}));// Filtrar las zonas que no tienen métodos de envío habilitados\nconst zonesWithMethods=shippingData.filter(zone=>zone.methods&&zone.methods.length>0);this.cache.shippingMethods=zonesWithMethods;return zonesWithMethods;}catch(error){console.error('Error obteniendo métodos de envío:',error);return this.getDefaultShippingMethods();}}// Calcular costo de envío\ncalculateShippingCost(zones,subtotal){let zoneId=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;// Si no hay zonas, devolver 0\nif(!zones||zones.length===0)return 0;// Buscar la zona apropiada (por defecto la primera)\nconst zone=zoneId?zones.find(z=>z.id===zoneId):zones[0];if(!zone||!zone.methods||zone.methods.length===0)return 0;// Buscar método de envío (flat_rate o local_delivery)\nconst shippingMethod=zone.methods.find(m=>m.methodId==='flat_rate'||m.methodId==='local_delivery');if(!shippingMethod)return 0;const cost=parseFloat(shippingMethod.cost)||0;const minAmount=parseFloat(shippingMethod.minAmount)||0;// Si hay monto mínimo para envío gratis y se cumple\nif(minAmount>0&&subtotal>=minAmount){return 0;}return cost;}// === MÉTODOS DE PAGO ===\n// Obtener métodos de pago disponibles\nasync getPaymentGateways(){if(this.cache.paymentGateways){return this.cache.paymentGateways;}try{const gateways=await this.request('payment_gateways');// Mapear métodos de pago habilitados\nconst paymentMethods=gateways.filter(gateway=>gateway.enabled===true).map(gateway=>({id:gateway.id,title:gateway.title,description:gateway.description,icon:this.getPaymentIcon(gateway.id),order:gateway.order||0,settings:gateway.settings})).sort((a,b)=>a.order-b.order);this.cache.paymentGateways=paymentMethods;return paymentMethods;}catch(error){console.error('Error obteniendo métodos de pago:',error);return this.getDefaultPaymentMethods();}}// Obtener icono para método de pago\ngetPaymentIcon(methodId){const icons={'cod':'DollarSign',// Contra entrega\n'bacs':'Building',// Transferencia bancaria\n'cheque':'FileText',// Cheque\n'paypal':'CreditCard',// PayPal\n'stripe':'CreditCard',// Stripe\n'mercadopago':'CreditCard',// MercadoPago\n'webpay':'CreditCard',// Webpay\n'transbank':'CreditCard',// Transbank\n'flow':'CreditCard'// Flow\n};return icons[methodId]||'CreditCard';}// === PEDIDOS ===\n// Crear un nuevo pedido\nasync createOrder(orderData){const order={payment_method:orderData.paymentMethod||'cod',payment_method_title:orderData.paymentMethodTitle||'Pago contra entrega',set_paid:false,status:'pending',customer_note:orderData.notes||'',billing:{first_name:orderData.customerName,last_name:'',address_1:orderData.address||'',address_2:orderData.reference||'',city:orderData.neighborhood||orderData.city||'Santiago',state:'',postcode:'',country:'CL',email:orderData.email||'',phone:orderData.phone||''},shipping:{first_name:orderData.customerName,last_name:'',address_1:orderData.address||'',address_2:orderData.reference||'',city:orderData.neighborhood||orderData.city||'Santiago',state:'',postcode:'',country:'CL'},line_items:orderData.items.map(item=>{const lineItem={product_id:parseInt(item.productId),quantity:parseInt(item.quantity)};// Si tiene variación, agregar variation_id\nif(item.variationId){lineItem.variation_id=parseInt(item.variationId);}// Si tiene meta data (personalizaciones)\nif(item.customizations){var _item$customizations$;lineItem.meta_data=[];// Instrucciones especiales\nif(item.customizations.specialInstructions){lineItem.meta_data.push({key:'instrucciones_especiales',value:item.customizations.specialInstructions});}// Campos de Advanced Product Fields\nif(((_item$customizations$=item.customizations.productAddons)===null||_item$customizations$===void 0?void 0:_item$customizations$.length)>0){item.customizations.productAddons.forEach(addon=>{lineItem.meta_data.push({key:addon.key,value:addon.value,display_key:addon.display||addon.key,display_value:addon.value});});}// Si es un combo, agregar información de las selecciones\nif(item.customizations.type==='combo'&&item.customizations.comboSelections){// Agregar cada categoría del combo como meta data\nObject.entries(item.customizations.comboSelections).forEach(_ref=>{var _item$customizations$2;let[categoryId,selections]=_ref;const categoryInfo=(_item$customizations$2=item.customizations.comboConfig)===null||_item$customizations$2===void 0?void 0:_item$customizations$2[categoryId];if(categoryInfo&&selections.length>0){// Crear una lista legible de los productos seleccionados\nconst selectedNames=selections.map(sel=>sel.name).join(', ');lineItem.meta_data.push({key:`combo_${categoryInfo.name||categoryId}`,value:selectedNames,display_key:categoryInfo.name||`Categoría ${categoryId}`,display_value:selectedNames});}});// Agregar un indicador de que es un combo\nlineItem.meta_data.push({key:'_is_combo',value:'true'});}}return lineItem;}),shipping_lines:[],fee_lines:[],meta_data:[]};// Agregar línea de envío si es delivery\nif(orderData.orderType==='delivery'&&orderData.shippingMethod){var _orderData$shippingMe;order.shipping_lines.push({method_id:orderData.shippingMethod.methodId||'flat_rate',method_title:orderData.shippingMethod.title||'Envío a domicilio',total:((_orderData$shippingMe=orderData.shippingMethod.cost)===null||_orderData$shippingMe===void 0?void 0:_orderData$shippingMe.toString())||'0'});}// Agregar meta data adicional\norder.meta_data.push({key:'_order_type',value:orderData.orderType||'delivery'});if(orderData.paymentMethod==='cod'&&orderData.cashAmount){order.meta_data.push({key:'_cash_amount',value:orderData.cashAmount});}return this.request('orders','POST',order);}// Obtener un pedido\nasync getOrder(orderId){return this.request(`orders/${orderId}`);}// Actualizar estado de un pedido\nasync updateOrderStatus(orderId,status){return this.request(`orders/${orderId}`,'PUT',{status});}// === CLIENTES ===\n// Crear cliente\nasync createCustomer(customerData){return this.request('customers','POST',customerData);}// Obtener cliente\nasync getCustomer(customerId){return this.request(`customers/${customerId}`);}// === MÉTODOS DE UTILIDAD ===\n// Limpiar cache\nclearCache(){this.cache={shippingZones:null,paymentGateways:null,storeSettings:null,shippingMethods:null};}// === ZONAS DE ENVÍO ===\n// Obtener zonas de envío disponibles para delivery\nasync getDeliveryZones(){try{// Intentar obtener desde un endpoint personalizado o configuración\nconst response=await fetch('https://escandalosospizzas.cl/wp/wp-json/wp/v2/settings/delivery_zones',{headers:getAuthHeaders()});if(response.ok){const zones=await response.json();return zones;}}catch(error){console.error('Error obteniendo zonas de delivery:',error);}// Si no hay configuración, devolver array vacío\n// Las zonas deberían configurarse en WooCommerce\nreturn[];}// === VALORES POR DEFECTO ===\n// Estos valores solo se usan si la API falla completamente\ngetDefaultStoreInfo(){console.warn('Usando información de tienda por defecto. Configure en WooCommerce.');return{name:'Escandalosos Pizza',description:'Dark kitchen Isla de Maipo',address:'Camino las parcelas 12',address2:'',city:'Isla de Maipo',postcode:'',country:'CL',phone:'+56 942740261',email:'hola@escandalosospizza.cl',currency:'CLP',schedule:{monday_thursday:{open:'18:00',close:'22:00',label:'Lunes a jueves'},friday:{open:'18:00',close:'23:00',label:'Viernes'},saturday:{open:'13:00',close:'23:00',label:'Sábado'},sunday:{open:'13:00',close:'22:00',label:'Domingo'}},deliveryTime:'30-45 minutos',pickupTime:'20-30 minutos'};}getDefaultShippingMethods(){console.warn('No se encontraron métodos de envío configurados en WooCommerce.');// Devolver array vacío - los métodos deben configurarse en WooCommerce\nreturn[];}getDefaultPaymentMethods(){console.warn('No se encontraron métodos de pago configurados en WooCommerce.');// Devolver array vacío - los métodos deben configurarse en WooCommerce\nreturn[];}}export default new WooCommerceAPI();","map":{"version":3,"names":["getApiUrl","getAuthHeaders","WooCommerceAPI","constructor","cache","shippingZones","paymentGateways","storeSettings","shippingMethods","request","endpoint","method","arguments","length","undefined","data","url","options","headers","body","JSON","stringify","console","log","response","fetch","responseText","text","responseData","parse","e","ok","error","Error","status","message","code","statusText","getProducts","params","queryParams","URLSearchParams","per_page","toString","products","productsWithPriceRange","Promise","all","map","product","type","variations","getProductVariations","id","prices","v","parseFloat","price","filter","p","isNaN","price_range","min_price","Math","min","max_price","max","display_price","getProduct","productId","getProductAttributes","getAttributeTerms","attributeId","getCategories","getStoreInfo","_settings$find","_settings$find2","_settings$find3","_settings$find4","_settings$find5","_settings$find6","_settings$find7","_settings$find8","settings","storeInfo","name","find","s","value","description","address","address2","city","postcode","country","phone","email","currency","schedule","monday_thursday","open","close","label","friday","saturday","sunday","deliveryTime","pickupTime","getDefaultStoreInfo","getShippingMethods","zones","shippingData","zone","methods","enabledMethods","m","enabled","_method$settings","_method$settings$cost","_method$settings2","_method$settings2$min","instanceId","instance_id","title","methodId","method_id","methodTitle","method_title","cost","minAmount","min_amount","requiresAddress","zonesWithMethods","getDefaultShippingMethods","calculateShippingCost","subtotal","zoneId","z","shippingMethod","getPaymentGateways","gateways","paymentMethods","gateway","icon","getPaymentIcon","order","sort","a","b","getDefaultPaymentMethods","icons","createOrder","orderData","payment_method","paymentMethod","payment_method_title","paymentMethodTitle","set_paid","customer_note","notes","billing","first_name","customerName","last_name","address_1","address_2","reference","neighborhood","state","shipping","line_items","items","item","lineItem","product_id","parseInt","quantity","variationId","variation_id","customizations","_item$customizations$","meta_data","specialInstructions","push","key","productAddons","forEach","addon","display_key","display","display_value","comboSelections","Object","entries","_ref","_item$customizations$2","categoryId","selections","categoryInfo","comboConfig","selectedNames","sel","join","shipping_lines","fee_lines","orderType","_orderData$shippingMe","total","cashAmount","getOrder","orderId","updateOrderStatus","createCustomer","customerData","getCustomer","customerId","clearCache","getDeliveryZones","json","warn"],"sources":["/Users/franciscalabra/Desktop/escandalosos/src/services/woocommerceApi.js"],"sourcesContent":["// src/services/woocommerceApi.js\nimport { getApiUrl, getAuthHeaders } from '../config/woocommerce';\n\nclass WooCommerceAPI {\n  constructor() {\n    // Cache para configuraciones\n    this.cache = {\n      shippingZones: null,\n      paymentGateways: null,\n      storeSettings: null,\n      shippingMethods: null\n    };\n  }\n\n  // Método genérico para hacer peticiones\n  async request(endpoint, method = 'GET', data = null) {\n    try {\n      const url = getApiUrl(endpoint);\n      const options = {\n        method,\n        headers: getAuthHeaders(),\n      };\n\n      if (data && method !== 'GET') {\n        options.body = JSON.stringify(data);\n      }\n\n      console.log('Request URL:', url);\n      console.log('Request options:', options);\n\n      const response = await fetch(url, options);\n      \n      // Intentar obtener el cuerpo de la respuesta\n      const responseText = await response.text();\n      let responseData;\n      \n      try {\n        responseData = JSON.parse(responseText);\n      } catch (e) {\n        responseData = responseText;\n      }\n\n      if (!response.ok) {\n        console.error('Error response:', responseData);\n        throw new Error(`Error ${response.status}: ${responseData.message || responseData.code || response.statusText}`);\n      }\n\n      return responseData;\n    } catch (error) {\n      console.error('Error en la petición a WooCommerce:', error);\n      throw error;\n    }\n  }\n\n  // === PRODUCTOS ===\n  \n  // Obtener todos los productos\n  async getProducts(params = {}) {\n    const queryParams = new URLSearchParams({\n      per_page: 100,\n      ...params\n    }).toString();\n    \n    const products = await this.request(`products?${queryParams}`);\n    \n    // Para productos variables, cargar las variaciones y calcular el rango de precios\n    const productsWithPriceRange = await Promise.all(\n      products.map(async (product) => {\n        if (product.type === 'variable' && product.variations && product.variations.length > 0) {\n          try {\n            // Obtener las variaciones del producto\n            const variations = await this.getProductVariations(product.id);\n            \n            if (variations && variations.length > 0) {\n              // Calcular precio mínimo y máximo\n              const prices = variations.map(v => parseFloat(v.price)).filter(p => !isNaN(p));\n              \n              if (prices.length > 0) {\n                product.price_range = {\n                  min_price: Math.min(...prices),\n                  max_price: Math.max(...prices)\n                };\n                \n                // También actualizar el precio base al máximo para mostrar el precio familiar\n                product.display_price = Math.max(...prices);\n              }\n            }\n          } catch (error) {\n            console.error(`Error obteniendo variaciones para producto ${product.id}:`, error);\n          }\n        }\n        \n        return product;\n      })\n    );\n    \n    return productsWithPriceRange;\n  }\n\n  // Obtener un producto por ID\n  async getProduct(id) {\n    return this.request(`products/${id}`);\n  }\n\n  // Obtener variaciones de un producto\n  async getProductVariations(productId) {\n    return this.request(`products/${productId}/variations?per_page=100`);\n  }\n\n  // Obtener atributos de productos\n  async getProductAttributes() {\n    return this.request('products/attributes');\n  }\n\n  // Obtener términos de un atributo\n  async getAttributeTerms(attributeId) {\n    return this.request(`products/attributes/${attributeId}/terms`);\n  }\n\n  // Obtener categorías de productos\n  async getCategories() {\n    return this.request('products/categories?per_page=100');\n  }\n\n  // === CONFIGURACIONES DE LA TIENDA ===\n\n  // Obtener información de la tienda\n  async getStoreInfo() {\n    if (this.cache.storeSettings) {\n      return this.cache.storeSettings;\n    }\n\n    try {\n      // Intentar obtener configuraciones generales\n      const settings = await this.request('settings/general');\n      \n      const storeInfo = {\n        name: settings.find(s => s.id === 'blogname')?.value || 'Escandalosos Pizza',\n        description: settings.find(s => s.id === 'blogdescription')?.value || 'Dark kitchen Isla de Maipo',\n        address: settings.find(s => s.id === 'woocommerce_store_address')?.value || 'Camino las parcelas 12',\n        address2: settings.find(s => s.id === 'woocommerce_store_address_2')?.value || '',\n        city: settings.find(s => s.id === 'woocommerce_store_city')?.value || 'Isla de Maipo',\n        postcode: settings.find(s => s.id === 'woocommerce_store_postcode')?.value || '',\n        country: settings.find(s => s.id === 'woocommerce_default_country')?.value || 'CL',\n        phone: '+56 942740261',\n        email: 'hola@escandalosospizza.cl',\n        currency: settings.find(s => s.id === 'woocommerce_currency')?.value || 'CLP',\n        // Horarios\n        schedule: {\n          monday_thursday: { open: '18:00', close: '22:00', label: 'Lunes a jueves' },\n          friday: { open: '18:00', close: '23:00', label: 'Viernes' },\n          saturday: { open: '13:00', close: '23:00', label: 'Sábado' },\n          sunday: { open: '13:00', close: '22:00', label: 'Domingo' }\n        },\n        // Tiempos de entrega\n        deliveryTime: '30-45 minutos',\n        pickupTime: '20-30 minutos'\n      };\n      \n      this.cache.storeSettings = storeInfo;\n      return storeInfo;\n    } catch (error) {\n      console.error('Error obteniendo información de la tienda:', error);\n      // Devolver valores por defecto\n      return this.getDefaultStoreInfo();\n    }\n  }\n\n  // === ENVÍO ===\n\n  // Obtener zonas y métodos de envío\n  async getShippingMethods() {\n    if (this.cache.shippingMethods) {\n      return this.cache.shippingMethods;\n    }\n\n    try {\n      const zones = await this.request('shipping/zones');\n      \n      // Para cada zona, obtener sus métodos\n      const shippingData = await Promise.all(\n        zones.map(async (zone) => {\n          try {\n            const methods = await this.request(`shipping/zones/${zone.id}/methods`);\n            \n            // Filtrar y mapear métodos habilitados\n            const enabledMethods = methods\n              .filter(m => m.enabled)\n              .map(method => ({\n                id: method.id,\n                instanceId: method.instance_id,\n                title: method.title,\n                methodId: method.method_id,\n                methodTitle: method.method_title,\n                cost: method.settings?.cost?.value || '0',\n                minAmount: method.settings?.min_amount?.value || '0',\n                enabled: method.enabled,\n                requiresAddress: method.method_id !== 'local_pickup'\n              }));\n            \n            return {\n              id: zone.id,\n              name: zone.name,\n              methods: enabledMethods\n            };\n          } catch (error) {\n            console.error(`Error obteniendo métodos para zona ${zone.id}:`, error);\n            return { ...zone, methods: [] };\n          }\n        })\n      );\n      \n      // Filtrar las zonas que no tienen métodos de envío habilitados\n      const zonesWithMethods = shippingData.filter(zone => zone.methods && zone.methods.length > 0);\n      \n      this.cache.shippingMethods = zonesWithMethods;\n      return zonesWithMethods;\n    } catch (error) {\n      console.error('Error obteniendo métodos de envío:', error);\n      return this.getDefaultShippingMethods();\n    }\n  }\n\n  // Calcular costo de envío\n  calculateShippingCost(zones, subtotal, zoneId = null) {\n    // Si no hay zonas, devolver 0\n    if (!zones || zones.length === 0) return 0;\n    \n    // Buscar la zona apropiada (por defecto la primera)\n    const zone = zoneId ? zones.find(z => z.id === zoneId) : zones[0];\n    \n    if (!zone || !zone.methods || zone.methods.length === 0) return 0;\n    \n    // Buscar método de envío (flat_rate o local_delivery)\n    const shippingMethod = zone.methods.find(m => \n      m.methodId === 'flat_rate' || \n      m.methodId === 'local_delivery'\n    );\n    \n    if (!shippingMethod) return 0;\n    \n    const cost = parseFloat(shippingMethod.cost) || 0;\n    const minAmount = parseFloat(shippingMethod.minAmount) || 0;\n    \n    // Si hay monto mínimo para envío gratis y se cumple\n    if (minAmount > 0 && subtotal >= minAmount) {\n      return 0;\n    }\n    \n    return cost;\n  }\n\n  // === MÉTODOS DE PAGO ===\n\n  // Obtener métodos de pago disponibles\n  async getPaymentGateways() {\n    if (this.cache.paymentGateways) {\n      return this.cache.paymentGateways;\n    }\n\n    try {\n      const gateways = await this.request('payment_gateways');\n      \n      // Mapear métodos de pago habilitados\n      const paymentMethods = gateways\n        .filter(gateway => gateway.enabled === true)\n        .map(gateway => ({\n          id: gateway.id,\n          title: gateway.title,\n          description: gateway.description,\n          icon: this.getPaymentIcon(gateway.id),\n          order: gateway.order || 0,\n          settings: gateway.settings\n        }))\n        .sort((a, b) => a.order - b.order);\n      \n      this.cache.paymentGateways = paymentMethods;\n      return paymentMethods;\n    } catch (error) {\n      console.error('Error obteniendo métodos de pago:', error);\n      return this.getDefaultPaymentMethods();\n    }\n  }\n\n  // Obtener icono para método de pago\n  getPaymentIcon(methodId) {\n    const icons = {\n      'cod': 'DollarSign',           // Contra entrega\n      'bacs': 'Building',            // Transferencia bancaria\n      'cheque': 'FileText',          // Cheque\n      'paypal': 'CreditCard',        // PayPal\n      'stripe': 'CreditCard',        // Stripe\n      'mercadopago': 'CreditCard',   // MercadoPago\n      'webpay': 'CreditCard',        // Webpay\n      'transbank': 'CreditCard',     // Transbank\n      'flow': 'CreditCard'           // Flow\n    };\n    \n    return icons[methodId] || 'CreditCard';\n  }\n\n  // === PEDIDOS ===\n  \n  // Crear un nuevo pedido\n  async createOrder(orderData) {\n    const order = {\n      payment_method: orderData.paymentMethod || 'cod',\n      payment_method_title: orderData.paymentMethodTitle || 'Pago contra entrega',\n      set_paid: false,\n      status: 'pending',\n      customer_note: orderData.notes || '',\n      billing: {\n        first_name: orderData.customerName,\n        last_name: '',\n        address_1: orderData.address || '',\n        address_2: orderData.reference || '',\n        city: orderData.neighborhood || orderData.city || 'Santiago',\n        state: '',\n        postcode: '',\n        country: 'CL',\n        email: orderData.email || '',\n        phone: orderData.phone || ''\n      },\n      shipping: {\n        first_name: orderData.customerName,\n        last_name: '',\n        address_1: orderData.address || '',\n        address_2: orderData.reference || '',\n        city: orderData.neighborhood || orderData.city || 'Santiago',\n        state: '',\n        postcode: '',\n        country: 'CL'\n      },\n      line_items: orderData.items.map(item => {\n        const lineItem = {\n          product_id: parseInt(item.productId),\n          quantity: parseInt(item.quantity)\n        };\n\n        // Si tiene variación, agregar variation_id\n        if (item.variationId) {\n          lineItem.variation_id = parseInt(item.variationId);\n        }\n\n        // Si tiene meta data (personalizaciones)\n        if (item.customizations) {\n          lineItem.meta_data = [];\n          \n          // Instrucciones especiales\n          if (item.customizations.specialInstructions) {\n            lineItem.meta_data.push({\n              key: 'instrucciones_especiales',\n              value: item.customizations.specialInstructions\n            });\n          }\n\n          // Campos de Advanced Product Fields\n          if (item.customizations.productAddons?.length > 0) {\n            item.customizations.productAddons.forEach(addon => {\n              lineItem.meta_data.push({\n                key: addon.key,\n                value: addon.value,\n                display_key: addon.display || addon.key,\n                display_value: addon.value\n              });\n            });\n          }\n\n          // Si es un combo, agregar información de las selecciones\n          if (item.customizations.type === 'combo' && item.customizations.comboSelections) {\n            // Agregar cada categoría del combo como meta data\n            Object.entries(item.customizations.comboSelections).forEach(([categoryId, selections]) => {\n              const categoryInfo = item.customizations.comboConfig?.[categoryId];\n              if (categoryInfo && selections.length > 0) {\n                // Crear una lista legible de los productos seleccionados\n                const selectedNames = selections.map(sel => sel.name).join(', ');\n                lineItem.meta_data.push({\n                  key: `combo_${categoryInfo.name || categoryId}`,\n                  value: selectedNames,\n                  display_key: categoryInfo.name || `Categoría ${categoryId}`,\n                  display_value: selectedNames\n                });\n              }\n            });\n            \n            // Agregar un indicador de que es un combo\n            lineItem.meta_data.push({\n              key: '_is_combo',\n              value: 'true'\n            });\n          }\n        }\n\n        return lineItem;\n      }),\n      shipping_lines: [],\n      fee_lines: [],\n      meta_data: []\n    };\n\n    // Agregar línea de envío si es delivery\n    if (orderData.orderType === 'delivery' && orderData.shippingMethod) {\n      order.shipping_lines.push({\n        method_id: orderData.shippingMethod.methodId || 'flat_rate',\n        method_title: orderData.shippingMethod.title || 'Envío a domicilio',\n        total: orderData.shippingMethod.cost?.toString() || '0'\n      });\n    }\n\n    // Agregar meta data adicional\n    order.meta_data.push({\n      key: '_order_type',\n      value: orderData.orderType || 'delivery'\n    });\n\n    if (orderData.paymentMethod === 'cod' && orderData.cashAmount) {\n      order.meta_data.push({\n        key: '_cash_amount',\n        value: orderData.cashAmount\n      });\n    }\n\n    return this.request('orders', 'POST', order);\n  }\n\n  // Obtener un pedido\n  async getOrder(orderId) {\n    return this.request(`orders/${orderId}`);\n  }\n\n  // Actualizar estado de un pedido\n  async updateOrderStatus(orderId, status) {\n    return this.request(`orders/${orderId}`, 'PUT', { status });\n  }\n\n  // === CLIENTES ===\n  \n  // Crear cliente\n  async createCustomer(customerData) {\n    return this.request('customers', 'POST', customerData);\n  }\n\n  // Obtener cliente\n  async getCustomer(customerId) {\n    return this.request(`customers/${customerId}`);\n  }\n\n  // === MÉTODOS DE UTILIDAD ===\n\n  // Limpiar cache\n  clearCache() {\n    this.cache = {\n      shippingZones: null,\n      paymentGateways: null,\n      storeSettings: null,\n      shippingMethods: null\n    };\n  }\n\n  // === ZONAS DE ENVÍO ===\n  \n  // Obtener zonas de envío disponibles para delivery\n  async getDeliveryZones() {\n    try {\n      // Intentar obtener desde un endpoint personalizado o configuración\n      const response = await fetch(\n        'https://escandalosospizzas.cl/wp/wp-json/wp/v2/settings/delivery_zones',\n        { headers: getAuthHeaders() }\n      );\n      \n      if (response.ok) {\n        const zones = await response.json();\n        return zones;\n      }\n    } catch (error) {\n      console.error('Error obteniendo zonas de delivery:', error);\n    }\n    \n    // Si no hay configuración, devolver array vacío\n    // Las zonas deberían configurarse en WooCommerce\n    return [];\n  }\n\n  // === VALORES POR DEFECTO ===\n  // Estos valores solo se usan si la API falla completamente\n\n  getDefaultStoreInfo() {\n    console.warn('Usando información de tienda por defecto. Configure en WooCommerce.');\n    return {\n      name: 'Escandalosos Pizza',\n      description: 'Dark kitchen Isla de Maipo',\n      address: 'Camino las parcelas 12',\n      address2: '',\n      city: 'Isla de Maipo',\n      postcode: '',\n      country: 'CL',\n      phone: '+56 942740261',\n      email: 'hola@escandalosospizza.cl',\n      currency: 'CLP',\n      schedule: {\n        monday_thursday: { open: '18:00', close: '22:00', label: 'Lunes a jueves' },\n        friday: { open: '18:00', close: '23:00', label: 'Viernes' },\n        saturday: { open: '13:00', close: '23:00', label: 'Sábado' },\n        sunday: { open: '13:00', close: '22:00', label: 'Domingo' }\n      },\n      deliveryTime: '30-45 minutos',\n      pickupTime: '20-30 minutos'\n    };\n  }\n\n  getDefaultShippingMethods() {\n    console.warn('No se encontraron métodos de envío configurados en WooCommerce.');\n    // Devolver array vacío - los métodos deben configurarse en WooCommerce\n    return [];\n  }\n\n  getDefaultPaymentMethods() {\n    console.warn('No se encontraron métodos de pago configurados en WooCommerce.');\n    // Devolver array vacío - los métodos deben configurarse en WooCommerce\n    return [];\n  }\n}\n\nexport default new WooCommerceAPI();"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}