{"ast":null,"code":"// src/pages/HomePage/HomePage.jsx\nimport React,{useState,useEffect}from'react';import{Search,Tag}from'lucide-react';import{useWooCommerce}from'../../hooks/useWooCommerce';import ProductCard from'../../components/ProductCard/ProductCard';import ProductModal from'../../components/ProductModal/ProductModal';import CustomizationModal from'../../components/CustomizationModal/CustomizationModal';import'./HomePage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const HomePage=()=>{const{products,categories,loading}=useWooCommerce();const[searchTerm,setSearchTerm]=useState('');const[selectedCategory,setSelectedCategory]=useState('all');const[selectedProduct,setSelectedProduct]=useState(null);const[showProductModal,setShowProductModal]=useState(false);const[showCustomizationModal,setShowCustomizationModal]=useState(false);const[filteredProducts,setFilteredProducts]=useState([]);useEffect(()=>{filterProducts();},[products,searchTerm,selectedCategory]);const filterProducts=()=>{let filtered=[...products];// Filtrar por búsqueda\nif(searchTerm){filtered=filtered.filter(product=>{var _product$description;return product.name.toLowerCase().includes(searchTerm.toLowerCase())||((_product$description=product.description)===null||_product$description===void 0?void 0:_product$description.toLowerCase().includes(searchTerm.toLowerCase()));});}// Filtrar por categoría\nif(selectedCategory!=='all'){if(selectedCategory==='promos'){filtered=filtered.filter(product=>product.on_sale||product.categories.some(cat=>cat.slug==='promociones'));}else if(selectedCategory==='combos'){filtered=filtered.filter(product=>product.categories.some(cat=>cat.slug==='combos'));}else{filtered=filtered.filter(product=>product.categories.some(cat=>cat.id===parseInt(selectedCategory)));}}setFilteredProducts(filtered);};const handleProductCustomize=product=>{var _product$attributes,_product$categories;setSelectedProduct(product);// Determinar qué modal abrir basado en el tipo de producto\nif(product.type==='variable'||product.type==='grouped'||((_product$attributes=product.attributes)===null||_product$attributes===void 0?void 0:_product$attributes.length)>0||(_product$categories=product.categories)!==null&&_product$categories!==void 0&&_product$categories.some(cat=>['pizzas','combos','personalizables'].includes(cat.slug))){setShowCustomizationModal(true);}else{setShowProductModal(true);}};const handleCloseModals=()=>{setShowProductModal(false);setShowCustomizationModal(false);setSelectedProduct(null);};return/*#__PURE__*/_jsxs(\"div\",{className:\"home-page\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"search-section\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"search-bar\",children:[/*#__PURE__*/_jsx(Search,{className:\"search-icon\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Buscar productos...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"search-input\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"categories-section\",children:[/*#__PURE__*/_jsx(\"button\",{className:`category-chip ${selectedCategory==='all'?'active':''}`,onClick:()=>setSelectedCategory('all'),children:\"Todos\"}),/*#__PURE__*/_jsxs(\"button\",{className:`category-chip ${selectedCategory==='promos'?'active':''}`,onClick:()=>setSelectedCategory('promos'),children:[/*#__PURE__*/_jsx(Tag,{size:16}),\"Promociones\"]}),/*#__PURE__*/_jsx(\"button\",{className:`category-chip ${selectedCategory==='combos'?'active':''}`,onClick:()=>setSelectedCategory('combos'),children:\"Combos\"}),categories.map(category=>/*#__PURE__*/_jsx(\"button\",{className:`category-chip ${selectedCategory===category.id.toString()?'active':''}`,onClick:()=>setSelectedCategory(category.id.toString()),children:category.name},category.id))]}),loading?/*#__PURE__*/_jsxs(\"div\",{className:\"loading-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Cargando productos...\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"products-grid\",children:filteredProducts.length>0?filteredProducts.map(product=>/*#__PURE__*/_jsx(ProductCard,{product:product,onCustomize:handleProductCustomize},product.id)):/*#__PURE__*/_jsx(\"div\",{className:\"no-products\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No se encontraron productos\"})})}),showProductModal&&selectedProduct&&/*#__PURE__*/_jsx(ProductModal,{product:selectedProduct,isOpen:showProductModal,onClose:handleCloseModals}),showCustomizationModal&&selectedProduct&&/*#__PURE__*/_jsx(CustomizationModal,{product:selectedProduct,isOpen:showCustomizationModal,onClose:handleCloseModals})]});};export default HomePage;","map":{"version":3,"names":["React","useState","useEffect","Search","Tag","useWooCommerce","ProductCard","ProductModal","CustomizationModal","jsx","_jsx","jsxs","_jsxs","HomePage","products","categories","loading","searchTerm","setSearchTerm","selectedCategory","setSelectedCategory","selectedProduct","setSelectedProduct","showProductModal","setShowProductModal","showCustomizationModal","setShowCustomizationModal","filteredProducts","setFilteredProducts","filterProducts","filtered","filter","product","_product$description","name","toLowerCase","includes","description","on_sale","some","cat","slug","id","parseInt","handleProductCustomize","_product$attributes","_product$categories","type","attributes","length","handleCloseModals","className","children","placeholder","value","onChange","e","target","onClick","size","map","category","toString","onCustomize","isOpen","onClose"],"sources":["/Users/franciscalabra/Desktop/pizzeria-escandalosos/src/pages/HomePage/HomePage.jsx"],"sourcesContent":["// src/pages/HomePage/HomePage.jsx\nimport React, { useState, useEffect } from 'react';\nimport { Search, Tag } from 'lucide-react';\nimport { useWooCommerce } from '../../hooks/useWooCommerce';\nimport ProductCard from '../../components/ProductCard/ProductCard';\nimport ProductModal from '../../components/ProductModal/ProductModal';\nimport CustomizationModal from '../../components/CustomizationModal/CustomizationModal';\nimport './HomePage.css';\n\nconst HomePage = () => {\n  const { products, categories, loading } = useWooCommerce();\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedCategory, setSelectedCategory] = useState('all');\n  const [selectedProduct, setSelectedProduct] = useState(null);\n  const [showProductModal, setShowProductModal] = useState(false);\n  const [showCustomizationModal, setShowCustomizationModal] = useState(false);\n  const [filteredProducts, setFilteredProducts] = useState([]);\n\n  useEffect(() => {\n    filterProducts();\n  }, [products, searchTerm, selectedCategory]);\n\n  const filterProducts = () => {\n    let filtered = [...products];\n\n    // Filtrar por búsqueda\n    if (searchTerm) {\n      filtered = filtered.filter(product =>\n        product.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        product.description?.toLowerCase().includes(searchTerm.toLowerCase())\n      );\n    }\n\n    // Filtrar por categoría\n    if (selectedCategory !== 'all') {\n      if (selectedCategory === 'promos') {\n        filtered = filtered.filter(product => \n          product.on_sale || product.categories.some(cat => cat.slug === 'promociones')\n        );\n      } else if (selectedCategory === 'combos') {\n        filtered = filtered.filter(product => \n          product.categories.some(cat => cat.slug === 'combos')\n        );\n      } else {\n        filtered = filtered.filter(product =>\n          product.categories.some(cat => cat.id === parseInt(selectedCategory))\n        );\n      }\n    }\n\n    setFilteredProducts(filtered);\n  };\n\n  const handleProductCustomize = (product) => {\n    setSelectedProduct(product);\n    \n    // Determinar qué modal abrir basado en el tipo de producto\n    if (product.type === 'variable' || \n        product.type === 'grouped' ||\n        product.attributes?.length > 0 ||\n        product.categories?.some(cat => ['pizzas', 'combos', 'personalizables'].includes(cat.slug))) {\n      setShowCustomizationModal(true);\n    } else {\n      setShowProductModal(true);\n    }\n  };\n\n  const handleCloseModals = () => {\n    setShowProductModal(false);\n    setShowCustomizationModal(false);\n    setSelectedProduct(null);\n  };\n\n  return (\n    <div className=\"home-page\">\n      {/* Header de búsqueda */}\n      <div className=\"search-section\">\n        <div className=\"search-bar\">\n          <Search className=\"search-icon\" />\n          <input\n            type=\"text\"\n            placeholder=\"Buscar productos...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            className=\"search-input\"\n          />\n        </div>\n      </div>\n\n      {/* Categorías */}\n      <div className=\"categories-section\">\n        <button\n          className={`category-chip ${selectedCategory === 'all' ? 'active' : ''}`}\n          onClick={() => setSelectedCategory('all')}\n        >\n          Todos\n        </button>\n        <button\n          className={`category-chip ${selectedCategory === 'promos' ? 'active' : ''}`}\n          onClick={() => setSelectedCategory('promos')}\n        >\n          <Tag size={16} />\n          Promociones\n        </button>\n        <button\n          className={`category-chip ${selectedCategory === 'combos' ? 'active' : ''}`}\n          onClick={() => setSelectedCategory('combos')}\n        >\n          Combos\n        </button>\n        {categories.map(category => (\n          <button\n            key={category.id}\n            className={`category-chip ${selectedCategory === category.id.toString() ? 'active' : ''}`}\n            onClick={() => setSelectedCategory(category.id.toString())}\n          >\n            {category.name}\n          </button>\n        ))}\n      </div>\n\n      {/* Grid de productos */}\n      {loading ? (\n        <div className=\"loading-container\">\n          <div className=\"spinner\"></div>\n          <p>Cargando productos...</p>\n        </div>\n      ) : (\n        <div className=\"products-grid\">\n          {filteredProducts.length > 0 ? (\n            filteredProducts.map(product => (\n              <ProductCard\n                key={product.id}\n                product={product}\n                onCustomize={handleProductCustomize}\n              />\n            ))\n          ) : (\n            <div className=\"no-products\">\n              <p>No se encontraron productos</p>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Modal de detalles del producto */}\n      {showProductModal && selectedProduct && (\n        <ProductModal\n          product={selectedProduct}\n          isOpen={showProductModal}\n          onClose={handleCloseModals}\n        />\n      )}\n\n      {/* Modal de personalización */}\n      {showCustomizationModal && selectedProduct && (\n        <CustomizationModal\n          product={selectedProduct}\n          isOpen={showCustomizationModal}\n          onClose={handleCloseModals}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default HomePage;"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,MAAM,CAAEC,GAAG,KAAQ,cAAc,CAC1C,OAASC,cAAc,KAAQ,4BAA4B,CAC3D,MAAO,CAAAC,WAAW,KAAM,0CAA0C,CAClE,MAAO,CAAAC,YAAY,KAAM,4CAA4C,CACrE,MAAO,CAAAC,kBAAkB,KAAM,wDAAwD,CACvF,MAAO,gBAAgB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAExB,KAAM,CAAAC,QAAQ,CAAGA,CAAA,GAAM,CACrB,KAAM,CAAEC,QAAQ,CAAEC,UAAU,CAAEC,OAAQ,CAAC,CAAGX,cAAc,CAAC,CAAC,CAC1D,KAAM,CAACY,UAAU,CAAEC,aAAa,CAAC,CAAGjB,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAACkB,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGnB,QAAQ,CAAC,KAAK,CAAC,CAC/D,KAAM,CAACoB,eAAe,CAAEC,kBAAkB,CAAC,CAAGrB,QAAQ,CAAC,IAAI,CAAC,CAC5D,KAAM,CAACsB,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGvB,QAAQ,CAAC,KAAK,CAAC,CAC/D,KAAM,CAACwB,sBAAsB,CAAEC,yBAAyB,CAAC,CAAGzB,QAAQ,CAAC,KAAK,CAAC,CAC3E,KAAM,CAAC0B,gBAAgB,CAAEC,mBAAmB,CAAC,CAAG3B,QAAQ,CAAC,EAAE,CAAC,CAE5DC,SAAS,CAAC,IAAM,CACd2B,cAAc,CAAC,CAAC,CAClB,CAAC,CAAE,CAACf,QAAQ,CAAEG,UAAU,CAAEE,gBAAgB,CAAC,CAAC,CAE5C,KAAM,CAAAU,cAAc,CAAGA,CAAA,GAAM,CAC3B,GAAI,CAAAC,QAAQ,CAAG,CAAC,GAAGhB,QAAQ,CAAC,CAE5B;AACA,GAAIG,UAAU,CAAE,CACda,QAAQ,CAAGA,QAAQ,CAACC,MAAM,CAACC,OAAO,OAAAC,oBAAA,OAChC,CAAAD,OAAO,CAACE,IAAI,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACnB,UAAU,CAACkB,WAAW,CAAC,CAAC,CAAC,IAAAF,oBAAA,CAC7DD,OAAO,CAACK,WAAW,UAAAJ,oBAAA,iBAAnBA,oBAAA,CAAqBE,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACnB,UAAU,CAACkB,WAAW,CAAC,CAAC,CAAC,GACvE,CAAC,CACH,CAEA;AACA,GAAIhB,gBAAgB,GAAK,KAAK,CAAE,CAC9B,GAAIA,gBAAgB,GAAK,QAAQ,CAAE,CACjCW,QAAQ,CAAGA,QAAQ,CAACC,MAAM,CAACC,OAAO,EAChCA,OAAO,CAACM,OAAO,EAAIN,OAAO,CAACjB,UAAU,CAACwB,IAAI,CAACC,GAAG,EAAIA,GAAG,CAACC,IAAI,GAAK,aAAa,CAC9E,CAAC,CACH,CAAC,IAAM,IAAItB,gBAAgB,GAAK,QAAQ,CAAE,CACxCW,QAAQ,CAAGA,QAAQ,CAACC,MAAM,CAACC,OAAO,EAChCA,OAAO,CAACjB,UAAU,CAACwB,IAAI,CAACC,GAAG,EAAIA,GAAG,CAACC,IAAI,GAAK,QAAQ,CACtD,CAAC,CACH,CAAC,IAAM,CACLX,QAAQ,CAAGA,QAAQ,CAACC,MAAM,CAACC,OAAO,EAChCA,OAAO,CAACjB,UAAU,CAACwB,IAAI,CAACC,GAAG,EAAIA,GAAG,CAACE,EAAE,GAAKC,QAAQ,CAACxB,gBAAgB,CAAC,CACtE,CAAC,CACH,CACF,CAEAS,mBAAmB,CAACE,QAAQ,CAAC,CAC/B,CAAC,CAED,KAAM,CAAAc,sBAAsB,CAAIZ,OAAO,EAAK,KAAAa,mBAAA,CAAAC,mBAAA,CAC1CxB,kBAAkB,CAACU,OAAO,CAAC,CAE3B;AACA,GAAIA,OAAO,CAACe,IAAI,GAAK,UAAU,EAC3Bf,OAAO,CAACe,IAAI,GAAK,SAAS,EAC1B,EAAAF,mBAAA,CAAAb,OAAO,CAACgB,UAAU,UAAAH,mBAAA,iBAAlBA,mBAAA,CAAoBI,MAAM,EAAG,CAAC,GAAAH,mBAAA,CAC9Bd,OAAO,CAACjB,UAAU,UAAA+B,mBAAA,WAAlBA,mBAAA,CAAoBP,IAAI,CAACC,GAAG,EAAI,CAAC,QAAQ,CAAE,QAAQ,CAAE,iBAAiB,CAAC,CAACJ,QAAQ,CAACI,GAAG,CAACC,IAAI,CAAC,CAAC,CAAE,CAC/Ff,yBAAyB,CAAC,IAAI,CAAC,CACjC,CAAC,IAAM,CACLF,mBAAmB,CAAC,IAAI,CAAC,CAC3B,CACF,CAAC,CAED,KAAM,CAAA0B,iBAAiB,CAAGA,CAAA,GAAM,CAC9B1B,mBAAmB,CAAC,KAAK,CAAC,CAC1BE,yBAAyB,CAAC,KAAK,CAAC,CAChCJ,kBAAkB,CAAC,IAAI,CAAC,CAC1B,CAAC,CAED,mBACEV,KAAA,QAAKuC,SAAS,CAAC,WAAW,CAAAC,QAAA,eAExB1C,IAAA,QAAKyC,SAAS,CAAC,gBAAgB,CAAAC,QAAA,cAC7BxC,KAAA,QAAKuC,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzB1C,IAAA,CAACP,MAAM,EAACgD,SAAS,CAAC,aAAa,CAAE,CAAC,cAClCzC,IAAA,UACEqC,IAAI,CAAC,MAAM,CACXM,WAAW,CAAC,qBAAqB,CACjCC,KAAK,CAAErC,UAAW,CAClBsC,QAAQ,CAAGC,CAAC,EAAKtC,aAAa,CAACsC,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAC/CH,SAAS,CAAC,cAAc,CACzB,CAAC,EACC,CAAC,CACH,CAAC,cAGNvC,KAAA,QAAKuC,SAAS,CAAC,oBAAoB,CAAAC,QAAA,eACjC1C,IAAA,WACEyC,SAAS,CAAE,iBAAiBhC,gBAAgB,GAAK,KAAK,CAAG,QAAQ,CAAG,EAAE,EAAG,CACzEuC,OAAO,CAAEA,CAAA,GAAMtC,mBAAmB,CAAC,KAAK,CAAE,CAAAgC,QAAA,CAC3C,OAED,CAAQ,CAAC,cACTxC,KAAA,WACEuC,SAAS,CAAE,iBAAiBhC,gBAAgB,GAAK,QAAQ,CAAG,QAAQ,CAAG,EAAE,EAAG,CAC5EuC,OAAO,CAAEA,CAAA,GAAMtC,mBAAmB,CAAC,QAAQ,CAAE,CAAAgC,QAAA,eAE7C1C,IAAA,CAACN,GAAG,EAACuD,IAAI,CAAE,EAAG,CAAE,CAAC,cAEnB,EAAQ,CAAC,cACTjD,IAAA,WACEyC,SAAS,CAAE,iBAAiBhC,gBAAgB,GAAK,QAAQ,CAAG,QAAQ,CAAG,EAAE,EAAG,CAC5EuC,OAAO,CAAEA,CAAA,GAAMtC,mBAAmB,CAAC,QAAQ,CAAE,CAAAgC,QAAA,CAC9C,QAED,CAAQ,CAAC,CACRrC,UAAU,CAAC6C,GAAG,CAACC,QAAQ,eACtBnD,IAAA,WAEEyC,SAAS,CAAE,iBAAiBhC,gBAAgB,GAAK0C,QAAQ,CAACnB,EAAE,CAACoB,QAAQ,CAAC,CAAC,CAAG,QAAQ,CAAG,EAAE,EAAG,CAC1FJ,OAAO,CAAEA,CAAA,GAAMtC,mBAAmB,CAACyC,QAAQ,CAACnB,EAAE,CAACoB,QAAQ,CAAC,CAAC,CAAE,CAAAV,QAAA,CAE1DS,QAAQ,CAAC3B,IAAI,EAJT2B,QAAQ,CAACnB,EAKR,CACT,CAAC,EACC,CAAC,CAGL1B,OAAO,cACNJ,KAAA,QAAKuC,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChC1C,IAAA,QAAKyC,SAAS,CAAC,SAAS,CAAM,CAAC,cAC/BzC,IAAA,MAAA0C,QAAA,CAAG,uBAAqB,CAAG,CAAC,EACzB,CAAC,cAEN1C,IAAA,QAAKyC,SAAS,CAAC,eAAe,CAAAC,QAAA,CAC3BzB,gBAAgB,CAACsB,MAAM,CAAG,CAAC,CAC1BtB,gBAAgB,CAACiC,GAAG,CAAC5B,OAAO,eAC1BtB,IAAA,CAACJ,WAAW,EAEV0B,OAAO,CAAEA,OAAQ,CACjB+B,WAAW,CAAEnB,sBAAuB,EAF/BZ,OAAO,CAACU,EAGd,CACF,CAAC,cAEFhC,IAAA,QAAKyC,SAAS,CAAC,aAAa,CAAAC,QAAA,cAC1B1C,IAAA,MAAA0C,QAAA,CAAG,6BAA2B,CAAG,CAAC,CAC/B,CACN,CACE,CACN,CAGA7B,gBAAgB,EAAIF,eAAe,eAClCX,IAAA,CAACH,YAAY,EACXyB,OAAO,CAAEX,eAAgB,CACzB2C,MAAM,CAAEzC,gBAAiB,CACzB0C,OAAO,CAAEf,iBAAkB,CAC5B,CACF,CAGAzB,sBAAsB,EAAIJ,eAAe,eACxCX,IAAA,CAACF,kBAAkB,EACjBwB,OAAO,CAAEX,eAAgB,CACzB2C,MAAM,CAAEvC,sBAAuB,CAC/BwC,OAAO,CAAEf,iBAAkB,CAC5B,CACF,EACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAArC,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}