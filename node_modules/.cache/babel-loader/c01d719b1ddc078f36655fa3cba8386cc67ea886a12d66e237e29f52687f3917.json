{"ast":null,"code":"// src/hooks/useWooCommerce.js\nimport{useState,useEffect,useCallback}from'react';import woocommerceApi from'../services/woocommerceApi';export const useWooCommerce=()=>{const[products,setProducts]=useState([]);const[categories,setCategories]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);// Cargar productos\nconst loadProducts=useCallback(async function(){let params=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};setLoading(true);setError(null);try{const data=await woocommerceApi.getProducts(params);setProducts(data);return data;}catch(err){setError(err.message);console.error('Error cargando productos:',err);}finally{setLoading(false);}},[]);// Cargar categorías\nconst loadCategories=useCallback(async()=>{try{const data=await woocommerceApi.getCategories();setCategories(data);return data;}catch(err){console.error('Error cargando categorías:',err);}},[]);// Crear pedido\nconst createOrder=useCallback(async orderData=>{setLoading(true);setError(null);try{const order=await woocommerceApi.createOrder(orderData);return order;}catch(err){setError(err.message);throw err;}finally{setLoading(false);}},[]);// Cargar productos al montar el componente\nuseEffect(()=>{loadProducts();loadCategories();},[loadProducts,loadCategories]);return{products,categories,loading,error,loadProducts,loadCategories,createOrder,// Exportar la API completa para uso directo si es necesario\napi:woocommerceApi};};// Hook para un producto específico\nexport const useProduct=productId=>{const[product,setProduct]=useState(null);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);useEffect(()=>{if(!productId)return;const loadProduct=async()=>{setLoading(true);setError(null);try{const data=await woocommerceApi.getProduct(productId);setProduct(data);}catch(err){setError(err.message);}finally{setLoading(false);}};loadProduct();},[productId]);return{product,loading,error};};// Hook para gestionar el carrito con WooCommerce\nexport const useWooCommerceCart=()=>{const[cart,setCart]=useState(()=>{const savedCart=localStorage.getItem('woo_cart');return savedCart?JSON.parse(savedCart):[];});// Guardar carrito en localStorage\nuseEffect(()=>{localStorage.setItem('woo_cart',JSON.stringify(cart));},[cart]);// Agregar al carrito\nconst addToCart=useCallback(function(product){let quantity=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;let customizations=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};setCart(prevCart=>{var _product$images$;const existingItem=prevCart.find(item=>item.id===product.id&&JSON.stringify(item.customizations)===JSON.stringify(customizations));if(existingItem){return prevCart.map(item=>item===existingItem?{...item,quantity:item.quantity+quantity}:item);}return[...prevCart,{id:product.id,productId:product.id,name:product.name,price:parseFloat(product.price),image:((_product$images$=product.images[0])===null||_product$images$===void 0?void 0:_product$images$.src)||'',quantity,customizations}];});},[]);// Remover del carrito\nconst removeFromCart=useCallback(itemId=>{setCart(prevCart=>prevCart.filter(item=>item.id!==itemId));},[]);// Actualizar cantidad\nconst updateQuantity=useCallback((itemId,quantity)=>{if(quantity<=0){removeFromCart(itemId);return;}setCart(prevCart=>prevCart.map(item=>item.id===itemId?{...item,quantity}:item));},[removeFromCart]);// Limpiar carrito\nconst clearCart=useCallback(()=>{setCart([]);},[]);// Calcular total\nconst getCartTotal=useCallback(()=>{return cart.reduce((total,item)=>total+item.price*item.quantity,0);},[cart]);// Obtener cantidad de items\nconst getItemCount=useCallback(()=>{return cart.reduce((total,item)=>total+item.quantity,0);},[cart]);return{cart,addToCart,removeFromCart,updateQuantity,clearCart,getCartTotal,getItemCount};};","map":{"version":3,"names":["useState","useEffect","useCallback","woocommerceApi","useWooCommerce","products","setProducts","categories","setCategories","loading","setLoading","error","setError","loadProducts","params","arguments","length","undefined","data","getProducts","err","message","console","loadCategories","getCategories","createOrder","orderData","order","api","useProduct","productId","product","setProduct","loadProduct","getProduct","useWooCommerceCart","cart","setCart","savedCart","localStorage","getItem","JSON","parse","setItem","stringify","addToCart","quantity","customizations","prevCart","_product$images$","existingItem","find","item","id","map","name","price","parseFloat","image","images","src","removeFromCart","itemId","filter","updateQuantity","clearCart","getCartTotal","reduce","total","getItemCount"],"sources":["/Users/franciscalabra/Desktop/escandalosos/src/hooks/useWooCommerce.js"],"sourcesContent":["// src/hooks/useWooCommerce.js\nimport { useState, useEffect, useCallback } from 'react';\nimport woocommerceApi from '../services/woocommerceApi';\n\nexport const useWooCommerce = () => {\n  const [products, setProducts] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  // Cargar productos\n  const loadProducts = useCallback(async (params = {}) => {\n    setLoading(true);\n    setError(null);\n    try {\n      const data = await woocommerceApi.getProducts(params);\n      setProducts(data);\n      return data;\n    } catch (err) {\n      setError(err.message);\n      console.error('Error cargando productos:', err);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  // Cargar categorías\n  const loadCategories = useCallback(async () => {\n    try {\n      const data = await woocommerceApi.getCategories();\n      setCategories(data);\n      return data;\n    } catch (err) {\n      console.error('Error cargando categorías:', err);\n    }\n  }, []);\n\n  // Crear pedido\n  const createOrder = useCallback(async (orderData) => {\n    setLoading(true);\n    setError(null);\n    try {\n      const order = await woocommerceApi.createOrder(orderData);\n      return order;\n    } catch (err) {\n      setError(err.message);\n      throw err;\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  // Cargar productos al montar el componente\n  useEffect(() => {\n    loadProducts();\n    loadCategories();\n  }, [loadProducts, loadCategories]);\n\n  return {\n    products,\n    categories,\n    loading,\n    error,\n    loadProducts,\n    loadCategories,\n    createOrder,\n    // Exportar la API completa para uso directo si es necesario\n    api: woocommerceApi\n  };\n};\n\n// Hook para un producto específico\nexport const useProduct = (productId) => {\n  const [product, setProduct] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    if (!productId) return;\n\n    const loadProduct = async () => {\n      setLoading(true);\n      setError(null);\n      try {\n        const data = await woocommerceApi.getProduct(productId);\n        setProduct(data);\n      } catch (err) {\n        setError(err.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadProduct();\n  }, [productId]);\n\n  return { product, loading, error };\n};\n\n// Hook para gestionar el carrito con WooCommerce\nexport const useWooCommerceCart = () => {\n  const [cart, setCart] = useState(() => {\n    const savedCart = localStorage.getItem('woo_cart');\n    return savedCart ? JSON.parse(savedCart) : [];\n  });\n\n  // Guardar carrito en localStorage\n  useEffect(() => {\n    localStorage.setItem('woo_cart', JSON.stringify(cart));\n  }, [cart]);\n\n  // Agregar al carrito\n  const addToCart = useCallback((product, quantity = 1, customizations = {}) => {\n    setCart(prevCart => {\n      const existingItem = prevCart.find(item => \n        item.id === product.id && \n        JSON.stringify(item.customizations) === JSON.stringify(customizations)\n      );\n\n      if (existingItem) {\n        return prevCart.map(item =>\n          item === existingItem\n            ? { ...item, quantity: item.quantity + quantity }\n            : item\n        );\n      }\n\n      return [...prevCart, {\n        id: product.id,\n        productId: product.id,\n        name: product.name,\n        price: parseFloat(product.price),\n        image: product.images[0]?.src || '',\n        quantity,\n        customizations\n      }];\n    });\n  }, []);\n\n  // Remover del carrito\n  const removeFromCart = useCallback((itemId) => {\n    setCart(prevCart => prevCart.filter(item => item.id !== itemId));\n  }, []);\n\n  // Actualizar cantidad\n  const updateQuantity = useCallback((itemId, quantity) => {\n    if (quantity <= 0) {\n      removeFromCart(itemId);\n      return;\n    }\n\n    setCart(prevCart =>\n      prevCart.map(item =>\n        item.id === itemId ? { ...item, quantity } : item\n      )\n    );\n  }, [removeFromCart]);\n\n  // Limpiar carrito\n  const clearCart = useCallback(() => {\n    setCart([]);\n  }, []);\n\n  // Calcular total\n  const getCartTotal = useCallback(() => {\n    return cart.reduce((total, item) => total + (item.price * item.quantity), 0);\n  }, [cart]);\n\n  // Obtener cantidad de items\n  const getItemCount = useCallback(() => {\n    return cart.reduce((total, item) => total + item.quantity, 0);\n  }, [cart]);\n\n  return {\n    cart,\n    addToCart,\n    removeFromCart,\n    updateQuantity,\n    clearCart,\n    getCartTotal,\n    getItemCount\n  };\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}