{"ast":null,"code":"// src/components/CustomizationModal/CustomizationModal.jsx\nimport React,{useState,useContext,useEffect}from'react';import{X,Plus,Minus,Info,Check,Loader,Pizza,Upload}from'lucide-react';import{CartContext}from'../../context/CartContext';import woocommerceApi from'../../services/woocommerceApi';import'./CustomizationModal.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const CustomizationModal=_ref=>{let{product,isOpen,onClose}=_ref;const{addToCart}=useContext(CartContext);// Estados para datos de WooCommerce\nconst[variations,setVariations]=useState([]);const[attributes,setAttributes]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);// Estados para Advanced Product Fields\nconst[productAddons,setProductAddons]=useState([]);const[addonValues,setAddonValues]=useState({});const[addonFiles,setAddonFiles]=useState({});// Estados de selección\nconst[selectedAttributes,setSelectedAttributes]=useState({});const[selectedVariation,setSelectedVariation]=useState(null);const[quantity,setQuantity]=useState(1);const[specialInstructions,setSpecialInstructions]=useState('');const[totalPrice,setTotalPrice]=useState(0);const[addingToCart,setAddingToCart]=useState(false);// Reset estados cuando se abre el modal\nuseEffect(()=>{if(isOpen&&product){resetForm();loadProductData();}},[isOpen,product]);// Actualizar precio cuando cambia la selección\nuseEffect(()=>{updatePrice();},[selectedVariation,quantity,product,addonValues]);const resetForm=()=>{setSelectedAttributes({});setSelectedVariation(null);setQuantity(1);setSpecialInstructions('');setProductAddons([]);setAddonValues({});setAddonFiles({});setError(null);};const loadProductData=async()=>{setLoading(true);setError(null);try{// Si es un producto variable, cargar variaciones\nif(product.type==='variable'){const variationsData=await woocommerceApi.getProductVariations(product.id);setVariations(variationsData||[]);// Extraer atributos del producto\nif(product.attributes){const variableAttributes=product.attributes.filter(attr=>attr.variation);setAttributes(variableAttributes);// Establecer valores por defecto\nconst defaultAttributes={};variableAttributes.forEach(attr=>{if(attr.options&&attr.options.length>0){defaultAttributes[attr.name]=attr.options[0];}});setSelectedAttributes(defaultAttributes);// Buscar variación por defecto\nfindMatchingVariation(defaultAttributes);}}else{// Para productos simples, establecer el precio directamente\nsetTotalPrice(parseFloat(product.price)*quantity);}// Cargar Advanced Product Fields si existen\nloadProductAddons();}catch(err){console.error('Error loading product data:',err);setError('Error al cargar las opciones del producto. Por favor, intenta de nuevo.');}finally{setLoading(false);}};const loadProductAddons=()=>{// Verificar si el producto tiene campos adicionales del plugin Advanced Product Fields\nif(product.meta_data){// Buscar los campos adicionales en meta_data\nconst addonsData=product.meta_data.find(meta=>meta.key==='_product_addons'||meta.key==='product_addons'||meta.key==='_wapf_fieldgroup');if(addonsData&&addonsData.value){// Procesar los campos adicionales\nconst fields=Array.isArray(addonsData.value)?addonsData.value:[addonsData.value];setProductAddons(fields);// Inicializar valores por defecto\nconst defaultValues={};fields.forEach(field=>{if(field.type==='checkbox'){defaultValues[field.id||field.name]=[];}else if(field.type==='number'&&field.min){defaultValues[field.id||field.name]=field.min;}else{defaultValues[field.id||field.name]='';}});setAddonValues(defaultValues);}}// También verificar si hay campos en el objeto addons del producto\nif(product.addons&&Array.isArray(product.addons)){setProductAddons(product.addons);// Inicializar valores por defecto\nconst defaultValues={};product.addons.forEach(field=>{if(field.type==='checkbox'||field.type==='multiple_choice'){defaultValues[field.id||field.name]=[];}else if(field.type==='number'&&field.min!==undefined){defaultValues[field.id||field.name]=field.min;}else{defaultValues[field.id||field.name]='';}});setAddonValues(defaultValues);}};const handleAttributeChange=(attributeName,value)=>{const newAttributes={...selectedAttributes,[attributeName]:value};setSelectedAttributes(newAttributes);// Buscar variación que coincida con los atributos seleccionados\nfindMatchingVariation(newAttributes);};const findMatchingVariation=attributes=>{if(!variations||variations.length===0)return;const matching=variations.find(variation=>{return variation.attributes.every(attr=>{const normalizedAttrName=attr.name.toLowerCase().replace(/-/g,' ');const selectedValue=attributes[attr.name]||attributes[normalizedAttrName];return selectedValue===attr.option;});});setSelectedVariation(matching||null);};const handleAddonChange=(fieldId,value)=>{setAddonValues(prev=>({...prev,[fieldId]:value}));};const handleFileUpload=(fieldId,file)=>{if(file){setAddonFiles(prev=>({...prev,[fieldId]:file}));setAddonValues(prev=>({...prev,[fieldId]:file.name}));}};const calculateAddonPrice=()=>{let addonTotal=0;productAddons.forEach(addon=>{const fieldId=addon.id||addon.name;const value=addonValues[fieldId];if(!value||Array.isArray(value)&&value.length===0)return;// Precio fijo\nif(addon.price_type==='flat_fee'&&addon.price){addonTotal+=parseFloat(addon.price);}// Precio basado en cantidad\nelse if(addon.price_type==='quantity_based'&&addon.price){addonTotal+=parseFloat(addon.price)*quantity;}// Precio por carácter (para campos de texto)\nelse if(addon.price_type==='per_char'&&addon.price&&typeof value==='string'){addonTotal+=parseFloat(addon.price)*value.length;}// Para campos con opciones (radio, select, checkbox)\nelse if(addon.options&&Array.isArray(addon.options)){addon.options.forEach(option=>{const isSelected=Array.isArray(value)?value.includes(option.label||option.value):value===(option.label||option.value);if(isSelected&&option.price){if(option.price_type==='quantity_based'){addonTotal+=parseFloat(option.price)*quantity;}else{addonTotal+=parseFloat(option.price);}}});}});return addonTotal;};const updatePrice=()=>{let basePrice=0;if(selectedVariation&&selectedVariation.price){basePrice=parseFloat(selectedVariation.price);}else if(product&&product.price){basePrice=parseFloat(product.price);}const addonPrice=calculateAddonPrice();setTotalPrice((basePrice+addonPrice)*quantity);};const formatPrice=price=>{return new Intl.NumberFormat('es-CL',{style:'currency',currency:'CLP',minimumFractionDigits:0,maximumFractionDigits:0}).format(price);};const isValidSelection=()=>{if(product.type==='variable'){// Para productos variables, verificar que se haya seleccionado una variación válida\nif(!selectedVariation||selectedVariation.stock_status==='outofstock'){return false;}}// Validar campos requeridos de Advanced Product Fields\nfor(const addon of productAddons){if(addon.required){const fieldId=addon.id||addon.name;const value=addonValues[fieldId];if(!value||Array.isArray(value)&&value.length===0){setError(`Por favor, completa el campo: ${addon.title||addon.name}`);return false;}}}return true;};const handleAddToCart=async()=>{if(!isValidSelection()){if(!error){setError('Por favor, selecciona todas las opciones requeridas');}return;}setAddingToCart(true);try{var _selectedVariation$im,_product$images,_product$images$;// Preparar meta_data para Advanced Product Fields\nconst addonMetaData=[];productAddons.forEach(addon=>{const fieldId=addon.id||addon.name;const value=addonValues[fieldId];if(value&&!(Array.isArray(value)&&value.length===0)){// Agregar el campo a meta_data\naddonMetaData.push({key:addon.name||addon.title,value:Array.isArray(value)?value.join(', '):value,display:addon.title||addon.name,price:addon.price||0,price_type:addon.price_type||'flat_fee'});}});const cartItem={id:selectedVariation?`${product.id}-${selectedVariation.id}-${Date.now()}`:`${product.id}-${Date.now()}`,productId:product.id,variationId:selectedVariation===null||selectedVariation===void 0?void 0:selectedVariation.id,name:product.name,price:totalPrice/quantity,// Precio unitario incluyendo addons\nimage:(selectedVariation===null||selectedVariation===void 0?void 0:(_selectedVariation$im=selectedVariation.image)===null||_selectedVariation$im===void 0?void 0:_selectedVariation$im.src)||((_product$images=product.images)===null||_product$images===void 0?void 0:(_product$images$=_product$images[0])===null||_product$images$===void 0?void 0:_product$images$.src)||'',quantity,customizations:{attributes:selectedAttributes,specialInstructions:specialInstructions.trim(),variationDetails:selectedVariation?{name:selectedVariation.name,attributes:selectedVariation.attributes}:null,// Agregar datos de Advanced Product Fields\nproductAddons:addonMetaData,addonValues:addonValues,addonFiles:Object.keys(addonFiles).length>0?addonFiles:null}};addToCart(cartItem);// Mostrar mensaje de éxito\nsetTimeout(()=>{onClose();resetForm();},500);}catch(err){setError('Error al agregar al carrito. Por favor, intenta de nuevo.');}finally{setAddingToCart(false);}};const renderAddonField=addon=>{var _addon$options,_addon$options2,_addon$options3;const fieldId=addon.id||addon.name;const value=addonValues[fieldId]||'';switch(addon.type){case'text':case'custom_text':return/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:value,onChange:e=>handleAddonChange(fieldId,e.target.value),placeholder:addon.placeholder||'',maxLength:addon.max||undefined,className:\"addon-text-input\",required:addon.required});case'textarea':case'custom_textarea':return/*#__PURE__*/_jsx(\"textarea\",{value:value,onChange:e=>handleAddonChange(fieldId,e.target.value),placeholder:addon.placeholder||'',maxLength:addon.max||undefined,rows:4,className:\"addon-textarea\",required:addon.required});case'number':return/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:value,onChange:e=>handleAddonChange(fieldId,parseFloat(e.target.value)||0),min:addon.min||undefined,max:addon.max||undefined,step:addon.step||1,className:\"addon-number-input\",required:addon.required});case'email':return/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:value,onChange:e=>handleAddonChange(fieldId,e.target.value),placeholder:addon.placeholder||'email@ejemplo.com',className:\"addon-email-input\",required:addon.required});case'select':case'dropdown':return/*#__PURE__*/_jsxs(\"select\",{value:value,onChange:e=>handleAddonChange(fieldId,e.target.value),className:\"addon-select\",required:addon.required,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Selecciona una opci\\xF3n\"}),(_addon$options=addon.options)===null||_addon$options===void 0?void 0:_addon$options.map((option,index)=>/*#__PURE__*/_jsxs(\"option\",{value:option.label||option.value,children:[option.label||option.value,option.price&&option.price>0&&` (+${formatPrice(option.price)})`]},index))]});case'radio':case'radiobutton':return/*#__PURE__*/_jsx(\"div\",{className:\"addon-radio-group\",children:(_addon$options2=addon.options)===null||_addon$options2===void 0?void 0:_addon$options2.map((option,index)=>/*#__PURE__*/_jsxs(\"label\",{className:\"addon-radio-option\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:fieldId,value:option.label||option.value,checked:value===(option.label||option.value),onChange:e=>handleAddonChange(fieldId,e.target.value),required:addon.required}),/*#__PURE__*/_jsxs(\"span\",{className:\"radio-label\",children:[option.label||option.value,option.price&&option.price>0&&` (+${formatPrice(option.price)})`]})]},index))});case'checkbox':case'multiple_choice':return/*#__PURE__*/_jsx(\"div\",{className:\"addon-checkbox-group\",children:(_addon$options3=addon.options)===null||_addon$options3===void 0?void 0:_addon$options3.map((option,index)=>/*#__PURE__*/_jsxs(\"label\",{className:\"addon-checkbox-option\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",value:option.label||option.value,checked:Array.isArray(value)&&value.includes(option.label||option.value),onChange:e=>{const optionValue=option.label||option.value;const currentValues=Array.isArray(value)?value:[];if(e.target.checked){handleAddonChange(fieldId,[...currentValues,optionValue]);}else{handleAddonChange(fieldId,currentValues.filter(v=>v!==optionValue));}}}),/*#__PURE__*/_jsxs(\"span\",{className:\"checkbox-label\",children:[option.label||option.value,option.price&&option.price>0&&` (+${formatPrice(option.price)})`]})]},index))});case'file':case'file_upload':return/*#__PURE__*/_jsxs(\"div\",{className:\"addon-file-upload\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"file-upload-label\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:e=>handleFileUpload(fieldId,e.target.files[0]),accept:addon.allowed_types||'*',required:addon.required,className:\"file-input\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"file-upload-button\",children:[/*#__PURE__*/_jsx(Upload,{size:16}),addonFiles[fieldId]?addonFiles[fieldId].name:'Seleccionar archivo']})]}),addon.max_size&&/*#__PURE__*/_jsxs(\"p\",{className:\"file-size-info\",children:[\"Tama\\xF1o m\\xE1ximo: \",addon.max_size,\"MB\"]})]});case'date':case'date_picker':return/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:value,onChange:e=>handleAddonChange(fieldId,e.target.value),min:addon.min_date||undefined,max:addon.max_date||undefined,className:\"addon-date-input\",required:addon.required});case'color':case'color_picker':return/*#__PURE__*/_jsx(\"input\",{type:\"color\",value:value||'#000000',onChange:e=>handleAddonChange(fieldId,e.target.value),className:\"addon-color-input\",required:addon.required});case'true_false':return/*#__PURE__*/_jsxs(\"label\",{className:\"addon-checkbox-option\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:value===true||value==='yes',onChange:e=>handleAddonChange(fieldId,e.target.checked),required:addon.required}),/*#__PURE__*/_jsx(\"span\",{className:\"checkbox-label\",children:addon.label||'Sí'})]});default:return null;}};if(!isOpen||!product)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"customization-modal-overlay\",onClick:onClose,children:/*#__PURE__*/_jsxs(\"div\",{className:\"customization-modal\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"button\",{className:\"close-button\",onClick:onClose,children:/*#__PURE__*/_jsx(X,{size:24})}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"Personaliza tu \",product.name]}),loading?/*#__PURE__*/_jsxs(\"div\",{className:\"loading-container\",children:[/*#__PURE__*/_jsx(Loader,{className:\"loading-spinner\",size:48}),/*#__PURE__*/_jsx(\"p\",{children:\"Cargando opciones...\"})]}):error?/*#__PURE__*/_jsxs(\"div\",{className:\"error-container\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:loadProductData,className:\"retry-button\",children:\"Reintentar\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"customization-product-info\",children:[product.images&&product.images[0]?/*#__PURE__*/_jsx(\"img\",{src:product.images[0].src,alt:product.name,className:\"customization-product-image\"}):/*#__PURE__*/_jsx(\"div\",{className:\"customization-product-image placeholder\",children:/*#__PURE__*/_jsx(Pizza,{size:48})}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-details\",children:[/*#__PURE__*/_jsx(\"h3\",{children:product.name}),product.short_description&&/*#__PURE__*/_jsx(\"p\",{className:\"product-description\",dangerouslySetInnerHTML:{__html:product.short_description}})]})]}),attributes.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"customization-section\",children:attributes.map(attribute=>/*#__PURE__*/_jsxs(\"div\",{className:\"attribute-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:attribute.name}),attribute.description&&/*#__PURE__*/_jsx(\"p\",{className:\"section-description\",children:attribute.description}),/*#__PURE__*/_jsx(\"div\",{className:\"attribute-options\",children:attribute.options.map(option=>/*#__PURE__*/_jsxs(\"label\",{className:\"attribute-option\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:attribute.name,value:option,checked:selectedAttributes[attribute.name]===option,onChange:()=>handleAttributeChange(attribute.name,option)}),/*#__PURE__*/_jsxs(\"span\",{className:\"option-label\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"option-check\",children:/*#__PURE__*/_jsx(Check,{size:16})}),option]})]},option))})]},attribute.id||attribute.name))}),productAddons.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"customization-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Opciones adicionales\"}),productAddons.map((addon,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"addon-field\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"addon-label\",children:[addon.title||addon.name,addon.required&&/*#__PURE__*/_jsx(\"span\",{className:\"required\",children:\"*\"}),addon.price&&addon.price>0&&/*#__PURE__*/_jsx(\"span\",{className:\"addon-price\",children:addon.price_type==='quantity_based'?` (+${formatPrice(addon.price)} por unidad)`:` (+${formatPrice(addon.price)})`})]}),addon.description&&/*#__PURE__*/_jsx(\"p\",{className:\"addon-description\",children:addon.description}),renderAddonField(addon)]},addon.id||addon.name||index))]}),selectedVariation&&(selectedVariation.stock_status==='outofstock'||selectedVariation.stock_quantity&&selectedVariation.stock_quantity<10)&&/*#__PURE__*/_jsx(\"div\",{className:\"variation-info\",children:/*#__PURE__*/_jsx(\"div\",{className:\"variation-details\",children:selectedVariation.stock_status==='outofstock'?/*#__PURE__*/_jsx(\"p\",{className:\"out-of-stock\",children:\"\\u26A0\\uFE0F Producto agotado\"}):selectedVariation.stock_quantity&&selectedVariation.stock_quantity<10?/*#__PURE__*/_jsxs(\"p\",{className:\"low-stock\",children:[\"\\u26A1 \\xDAltimas \",selectedVariation.stock_quantity,\" unidades\"]}):null})}),/*#__PURE__*/_jsxs(\"div\",{className:\"customization-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Instrucciones especiales (opcional)\"}),/*#__PURE__*/_jsx(\"p\",{className:\"section-description\",children:\"\\xBFAlguna preferencia especial?\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"special-instructions\",value:specialInstructions,onChange:e=>setSpecialInstructions(e.target.value),placeholder:\"Ej: Sin cebolla, extra queso, etc.\",maxLength:200}),/*#__PURE__*/_jsxs(\"span\",{className:\"char-count\",children:[specialInstructions.length,\"/200\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"customization-section quantity-controls\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"quantity-selector\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"quantity-btn\",onClick:()=>setQuantity(Math.max(1,quantity-1)),disabled:quantity<=1,children:/*#__PURE__*/_jsx(Minus,{size:16})}),/*#__PURE__*/_jsx(\"span\",{className:\"quantity-value\",children:quantity}),/*#__PURE__*/_jsx(\"button\",{className:\"quantity-btn\",onClick:()=>setQuantity(quantity+1),disabled:selectedVariation&&selectedVariation.stock_quantity&&quantity>=selectedVariation.stock_quantity,children:/*#__PURE__*/_jsx(Plus,{size:16})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"quantity-price\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"price-label\",children:\"Precio unitario\"}),/*#__PURE__*/_jsx(\"span\",{className:\"price-value\",children:formatPrice(totalPrice/quantity)})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"customization-footer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"total-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"total-label\",children:\"Total\"}),/*#__PURE__*/_jsx(\"span\",{className:\"total-price\",children:formatPrice(totalPrice)})]}),/*#__PURE__*/_jsx(\"button\",{className:`add-to-cart-btn ${addingToCart?'adding':''}`,onClick:handleAddToCart,disabled:loading||addingToCart||selectedVariation&&selectedVariation.stock_status==='outofstock',children:addingToCart?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Loader,{className:\"btn-spinner\",size:20}),/*#__PURE__*/_jsx(\"span\",{children:\"Agregando...\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Check,{className:\"btn-icon\",size:20}),/*#__PURE__*/_jsx(\"span\",{children:\"Agregar al carrito\"})]})})]})]})});};export default CustomizationModal;","map":{"version":3,"names":["React","useState","useContext","useEffect","X","Plus","Minus","Info","Check","Loader","Pizza","Upload","CartContext","woocommerceApi","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CustomizationModal","_ref","product","isOpen","onClose","addToCart","variations","setVariations","attributes","setAttributes","loading","setLoading","error","setError","productAddons","setProductAddons","addonValues","setAddonValues","addonFiles","setAddonFiles","selectedAttributes","setSelectedAttributes","selectedVariation","setSelectedVariation","quantity","setQuantity","specialInstructions","setSpecialInstructions","totalPrice","setTotalPrice","addingToCart","setAddingToCart","resetForm","loadProductData","updatePrice","type","variationsData","getProductVariations","id","variableAttributes","filter","attr","variation","defaultAttributes","forEach","options","length","name","findMatchingVariation","parseFloat","price","loadProductAddons","err","console","meta_data","addonsData","find","meta","key","value","fields","Array","isArray","defaultValues","field","min","addons","undefined","handleAttributeChange","attributeName","newAttributes","matching","every","normalizedAttrName","toLowerCase","replace","selectedValue","option","handleAddonChange","fieldId","prev","handleFileUpload","file","calculateAddonPrice","addonTotal","addon","price_type","isSelected","includes","label","basePrice","addonPrice","formatPrice","Intl","NumberFormat","style","currency","minimumFractionDigits","maximumFractionDigits","format","isValidSelection","stock_status","required","title","handleAddToCart","_selectedVariation$im","_product$images","_product$images$","addonMetaData","push","join","display","cartItem","Date","now","productId","variationId","image","src","images","customizations","trim","variationDetails","Object","keys","setTimeout","renderAddonField","_addon$options","_addon$options2","_addon$options3","onChange","e","target","placeholder","maxLength","max","className","rows","step","children","map","index","checked","optionValue","currentValues","v","files","accept","allowed_types","size","max_size","min_date","max_date","onClick","stopPropagation","alt","short_description","dangerouslySetInnerHTML","__html","attribute","description","stock_quantity","Math","disabled"],"sources":["/Users/franciscalabra/Desktop/pizzeria-escandalosos/src/components/CustomizationModal/CustomizationModal.jsx"],"sourcesContent":["// src/components/CustomizationModal/CustomizationModal.jsx\nimport React, { useState, useContext, useEffect } from 'react';\nimport { X, Plus, Minus, Info, Check, Loader, Pizza, Upload } from 'lucide-react';\nimport { CartContext } from '../../context/CartContext';\nimport woocommerceApi from '../../services/woocommerceApi';\nimport './CustomizationModal.css';\n\nconst CustomizationModal = ({ product, isOpen, onClose }) => {\n  const { addToCart } = useContext(CartContext);\n  \n  // Estados para datos de WooCommerce\n  const [variations, setVariations] = useState([]);\n  const [attributes, setAttributes] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  \n  // Estados para Advanced Product Fields\n  const [productAddons, setProductAddons] = useState([]);\n  const [addonValues, setAddonValues] = useState({});\n  const [addonFiles, setAddonFiles] = useState({});\n  \n  // Estados de selección\n  const [selectedAttributes, setSelectedAttributes] = useState({});\n  const [selectedVariation, setSelectedVariation] = useState(null);\n  const [quantity, setQuantity] = useState(1);\n  const [specialInstructions, setSpecialInstructions] = useState('');\n  const [totalPrice, setTotalPrice] = useState(0);\n  const [addingToCart, setAddingToCart] = useState(false);\n\n  // Reset estados cuando se abre el modal\n  useEffect(() => {\n    if (isOpen && product) {\n      resetForm();\n      loadProductData();\n    }\n  }, [isOpen, product]);\n\n  // Actualizar precio cuando cambia la selección\n  useEffect(() => {\n    updatePrice();\n  }, [selectedVariation, quantity, product, addonValues]);\n\n  const resetForm = () => {\n    setSelectedAttributes({});\n    setSelectedVariation(null);\n    setQuantity(1);\n    setSpecialInstructions('');\n    setProductAddons([]);\n    setAddonValues({});\n    setAddonFiles({});\n    setError(null);\n  };\n\n  const loadProductData = async () => {\n    setLoading(true);\n    setError(null);\n    \n    try {\n      // Si es un producto variable, cargar variaciones\n      if (product.type === 'variable') {\n        const variationsData = await woocommerceApi.getProductVariations(product.id);\n        setVariations(variationsData || []);\n        \n        // Extraer atributos del producto\n        if (product.attributes) {\n          const variableAttributes = product.attributes.filter(attr => attr.variation);\n          setAttributes(variableAttributes);\n          \n          // Establecer valores por defecto\n          const defaultAttributes = {};\n          variableAttributes.forEach(attr => {\n            if (attr.options && attr.options.length > 0) {\n              defaultAttributes[attr.name] = attr.options[0];\n            }\n          });\n          setSelectedAttributes(defaultAttributes);\n          \n          // Buscar variación por defecto\n          findMatchingVariation(defaultAttributes);\n        }\n      } else {\n        // Para productos simples, establecer el precio directamente\n        setTotalPrice(parseFloat(product.price) * quantity);\n      }\n\n      // Cargar Advanced Product Fields si existen\n      loadProductAddons();\n      \n    } catch (err) {\n      console.error('Error loading product data:', err);\n      setError('Error al cargar las opciones del producto. Por favor, intenta de nuevo.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadProductAddons = () => {\n    // Verificar si el producto tiene campos adicionales del plugin Advanced Product Fields\n    if (product.meta_data) {\n      // Buscar los campos adicionales en meta_data\n      const addonsData = product.meta_data.find(meta => \n        meta.key === '_product_addons' || \n        meta.key === 'product_addons' ||\n        meta.key === '_wapf_fieldgroup'\n      );\n      \n      if (addonsData && addonsData.value) {\n        // Procesar los campos adicionales\n        const fields = Array.isArray(addonsData.value) ? addonsData.value : [addonsData.value];\n        setProductAddons(fields);\n        \n        // Inicializar valores por defecto\n        const defaultValues = {};\n        fields.forEach(field => {\n          if (field.type === 'checkbox') {\n            defaultValues[field.id || field.name] = [];\n          } else if (field.type === 'number' && field.min) {\n            defaultValues[field.id || field.name] = field.min;\n          } else {\n            defaultValues[field.id || field.name] = '';\n          }\n        });\n        setAddonValues(defaultValues);\n      }\n    }\n\n    // También verificar si hay campos en el objeto addons del producto\n    if (product.addons && Array.isArray(product.addons)) {\n      setProductAddons(product.addons);\n      \n      // Inicializar valores por defecto\n      const defaultValues = {};\n      product.addons.forEach(field => {\n        if (field.type === 'checkbox' || field.type === 'multiple_choice') {\n          defaultValues[field.id || field.name] = [];\n        } else if (field.type === 'number' && field.min !== undefined) {\n          defaultValues[field.id || field.name] = field.min;\n        } else {\n          defaultValues[field.id || field.name] = '';\n        }\n      });\n      setAddonValues(defaultValues);\n    }\n  };\n\n  const handleAttributeChange = (attributeName, value) => {\n    const newAttributes = {\n      ...selectedAttributes,\n      [attributeName]: value\n    };\n    setSelectedAttributes(newAttributes);\n    \n    // Buscar variación que coincida con los atributos seleccionados\n    findMatchingVariation(newAttributes);\n  };\n\n  const findMatchingVariation = (attributes) => {\n    if (!variations || variations.length === 0) return;\n    \n    const matching = variations.find(variation => {\n      return variation.attributes.every(attr => {\n        const normalizedAttrName = attr.name.toLowerCase().replace(/-/g, ' ');\n        const selectedValue = attributes[attr.name] || attributes[normalizedAttrName];\n        return selectedValue === attr.option;\n      });\n    });\n    \n    setSelectedVariation(matching || null);\n  };\n\n  const handleAddonChange = (fieldId, value) => {\n    setAddonValues(prev => ({\n      ...prev,\n      [fieldId]: value\n    }));\n  };\n\n  const handleFileUpload = (fieldId, file) => {\n    if (file) {\n      setAddonFiles(prev => ({\n        ...prev,\n        [fieldId]: file\n      }));\n      setAddonValues(prev => ({\n        ...prev,\n        [fieldId]: file.name\n      }));\n    }\n  };\n\n  const calculateAddonPrice = () => {\n    let addonTotal = 0;\n    \n    productAddons.forEach(addon => {\n      const fieldId = addon.id || addon.name;\n      const value = addonValues[fieldId];\n      \n      if (!value || (Array.isArray(value) && value.length === 0)) return;\n      \n      // Precio fijo\n      if (addon.price_type === 'flat_fee' && addon.price) {\n        addonTotal += parseFloat(addon.price);\n      }\n      \n      // Precio basado en cantidad\n      else if (addon.price_type === 'quantity_based' && addon.price) {\n        addonTotal += parseFloat(addon.price) * quantity;\n      }\n      \n      // Precio por carácter (para campos de texto)\n      else if (addon.price_type === 'per_char' && addon.price && typeof value === 'string') {\n        addonTotal += parseFloat(addon.price) * value.length;\n      }\n      \n      // Para campos con opciones (radio, select, checkbox)\n      else if (addon.options && Array.isArray(addon.options)) {\n        addon.options.forEach(option => {\n          const isSelected = Array.isArray(value) \n            ? value.includes(option.label || option.value)\n            : value === (option.label || option.value);\n            \n          if (isSelected && option.price) {\n            if (option.price_type === 'quantity_based') {\n              addonTotal += parseFloat(option.price) * quantity;\n            } else {\n              addonTotal += parseFloat(option.price);\n            }\n          }\n        });\n      }\n    });\n    \n    return addonTotal;\n  };\n\n  const updatePrice = () => {\n    let basePrice = 0;\n    \n    if (selectedVariation && selectedVariation.price) {\n      basePrice = parseFloat(selectedVariation.price);\n    } else if (product && product.price) {\n      basePrice = parseFloat(product.price);\n    }\n    \n    const addonPrice = calculateAddonPrice();\n    setTotalPrice((basePrice + addonPrice) * quantity);\n  };\n\n  const formatPrice = (price) => {\n    return new Intl.NumberFormat('es-CL', {\n      style: 'currency',\n      currency: 'CLP',\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 0,\n    }).format(price);\n  };\n\n  const isValidSelection = () => {\n    if (product.type === 'variable') {\n      // Para productos variables, verificar que se haya seleccionado una variación válida\n      if (!selectedVariation || selectedVariation.stock_status === 'outofstock') {\n        return false;\n      }\n    }\n    \n    // Validar campos requeridos de Advanced Product Fields\n    for (const addon of productAddons) {\n      if (addon.required) {\n        const fieldId = addon.id || addon.name;\n        const value = addonValues[fieldId];\n        \n        if (!value || (Array.isArray(value) && value.length === 0)) {\n          setError(`Por favor, completa el campo: ${addon.title || addon.name}`);\n          return false;\n        }\n      }\n    }\n    \n    return true;\n  };\n\n  const handleAddToCart = async () => {\n    if (!isValidSelection()) {\n      if (!error) {\n        setError('Por favor, selecciona todas las opciones requeridas');\n      }\n      return;\n    }\n\n    setAddingToCart(true);\n\n    try {\n      // Preparar meta_data para Advanced Product Fields\n      const addonMetaData = [];\n      \n      productAddons.forEach(addon => {\n        const fieldId = addon.id || addon.name;\n        const value = addonValues[fieldId];\n        \n        if (value && !(Array.isArray(value) && value.length === 0)) {\n          // Agregar el campo a meta_data\n          addonMetaData.push({\n            key: addon.name || addon.title,\n            value: Array.isArray(value) ? value.join(', ') : value,\n            display: addon.title || addon.name,\n            price: addon.price || 0,\n            price_type: addon.price_type || 'flat_fee'\n          });\n        }\n      });\n\n      const cartItem = {\n        id: selectedVariation ? `${product.id}-${selectedVariation.id}-${Date.now()}` : `${product.id}-${Date.now()}`,\n        productId: product.id,\n        variationId: selectedVariation?.id,\n        name: product.name,\n        price: totalPrice / quantity, // Precio unitario incluyendo addons\n        image: selectedVariation?.image?.src || product.images?.[0]?.src || '',\n        quantity,\n        customizations: {\n          attributes: selectedAttributes,\n          specialInstructions: specialInstructions.trim(),\n          variationDetails: selectedVariation ? {\n            name: selectedVariation.name,\n            attributes: selectedVariation.attributes\n          } : null,\n          // Agregar datos de Advanced Product Fields\n          productAddons: addonMetaData,\n          addonValues: addonValues,\n          addonFiles: Object.keys(addonFiles).length > 0 ? addonFiles : null\n        }\n      };\n\n      addToCart(cartItem);\n      \n      // Mostrar mensaje de éxito\n      setTimeout(() => {\n        onClose();\n        resetForm();\n      }, 500);\n      \n    } catch (err) {\n      setError('Error al agregar al carrito. Por favor, intenta de nuevo.');\n    } finally {\n      setAddingToCart(false);\n    }\n  };\n\n  const renderAddonField = (addon) => {\n    const fieldId = addon.id || addon.name;\n    const value = addonValues[fieldId] || '';\n    \n    switch (addon.type) {\n      case 'text':\n      case 'custom_text':\n        return (\n          <input\n            type=\"text\"\n            value={value}\n            onChange={(e) => handleAddonChange(fieldId, e.target.value)}\n            placeholder={addon.placeholder || ''}\n            maxLength={addon.max || undefined}\n            className=\"addon-text-input\"\n            required={addon.required}\n          />\n        );\n        \n      case 'textarea':\n      case 'custom_textarea':\n        return (\n          <textarea\n            value={value}\n            onChange={(e) => handleAddonChange(fieldId, e.target.value)}\n            placeholder={addon.placeholder || ''}\n            maxLength={addon.max || undefined}\n            rows={4}\n            className=\"addon-textarea\"\n            required={addon.required}\n          />\n        );\n        \n      case 'number':\n        return (\n          <input\n            type=\"number\"\n            value={value}\n            onChange={(e) => handleAddonChange(fieldId, parseFloat(e.target.value) || 0)}\n            min={addon.min || undefined}\n            max={addon.max || undefined}\n            step={addon.step || 1}\n            className=\"addon-number-input\"\n            required={addon.required}\n          />\n        );\n        \n      case 'email':\n        return (\n          <input\n            type=\"email\"\n            value={value}\n            onChange={(e) => handleAddonChange(fieldId, e.target.value)}\n            placeholder={addon.placeholder || 'email@ejemplo.com'}\n            className=\"addon-email-input\"\n            required={addon.required}\n          />\n        );\n        \n      case 'select':\n      case 'dropdown':\n        return (\n          <select\n            value={value}\n            onChange={(e) => handleAddonChange(fieldId, e.target.value)}\n            className=\"addon-select\"\n            required={addon.required}\n          >\n            <option value=\"\">Selecciona una opción</option>\n            {addon.options?.map((option, index) => (\n              <option key={index} value={option.label || option.value}>\n                {option.label || option.value}\n                {option.price && option.price > 0 && ` (+${formatPrice(option.price)})`}\n              </option>\n            ))}\n          </select>\n        );\n        \n      case 'radio':\n      case 'radiobutton':\n        return (\n          <div className=\"addon-radio-group\">\n            {addon.options?.map((option, index) => (\n              <label key={index} className=\"addon-radio-option\">\n                <input\n                  type=\"radio\"\n                  name={fieldId}\n                  value={option.label || option.value}\n                  checked={value === (option.label || option.value)}\n                  onChange={(e) => handleAddonChange(fieldId, e.target.value)}\n                  required={addon.required}\n                />\n                <span className=\"radio-label\">\n                  {option.label || option.value}\n                  {option.price && option.price > 0 && ` (+${formatPrice(option.price)})`}\n                </span>\n              </label>\n            ))}\n          </div>\n        );\n        \n      case 'checkbox':\n      case 'multiple_choice':\n        return (\n          <div className=\"addon-checkbox-group\">\n            {addon.options?.map((option, index) => (\n              <label key={index} className=\"addon-checkbox-option\">\n                <input\n                  type=\"checkbox\"\n                  value={option.label || option.value}\n                  checked={Array.isArray(value) && value.includes(option.label || option.value)}\n                  onChange={(e) => {\n                    const optionValue = option.label || option.value;\n                    const currentValues = Array.isArray(value) ? value : [];\n                    \n                    if (e.target.checked) {\n                      handleAddonChange(fieldId, [...currentValues, optionValue]);\n                    } else {\n                      handleAddonChange(fieldId, currentValues.filter(v => v !== optionValue));\n                    }\n                  }}\n                />\n                <span className=\"checkbox-label\">\n                  {option.label || option.value}\n                  {option.price && option.price > 0 && ` (+${formatPrice(option.price)})`}\n                </span>\n              </label>\n            ))}\n          </div>\n        );\n        \n      case 'file':\n      case 'file_upload':\n        return (\n          <div className=\"addon-file-upload\">\n            <label className=\"file-upload-label\">\n              <input\n                type=\"file\"\n                onChange={(e) => handleFileUpload(fieldId, e.target.files[0])}\n                accept={addon.allowed_types || '*'}\n                required={addon.required}\n                className=\"file-input\"\n              />\n              <span className=\"file-upload-button\">\n                <Upload size={16} />\n                {addonFiles[fieldId] ? addonFiles[fieldId].name : 'Seleccionar archivo'}\n              </span>\n            </label>\n            {addon.max_size && (\n              <p className=\"file-size-info\">Tamaño máximo: {addon.max_size}MB</p>\n            )}\n          </div>\n        );\n        \n      case 'date':\n      case 'date_picker':\n        return (\n          <input\n            type=\"date\"\n            value={value}\n            onChange={(e) => handleAddonChange(fieldId, e.target.value)}\n            min={addon.min_date || undefined}\n            max={addon.max_date || undefined}\n            className=\"addon-date-input\"\n            required={addon.required}\n          />\n        );\n        \n      case 'color':\n      case 'color_picker':\n        return (\n          <input\n            type=\"color\"\n            value={value || '#000000'}\n            onChange={(e) => handleAddonChange(fieldId, e.target.value)}\n            className=\"addon-color-input\"\n            required={addon.required}\n          />\n        );\n        \n      case 'true_false':\n        return (\n          <label className=\"addon-checkbox-option\">\n            <input\n              type=\"checkbox\"\n              checked={value === true || value === 'yes'}\n              onChange={(e) => handleAddonChange(fieldId, e.target.checked)}\n              required={addon.required}\n            />\n            <span className=\"checkbox-label\">\n              {addon.label || 'Sí'}\n            </span>\n          </label>\n        );\n        \n      default:\n        return null;\n    }\n  };\n\n  if (!isOpen || !product) return null;\n\n  return (\n    <div className=\"customization-modal-overlay\" onClick={onClose}>\n      <div className=\"customization-modal\" onClick={(e) => e.stopPropagation()}>\n        <button className=\"close-button\" onClick={onClose}>\n          <X size={24} />\n        </button>\n\n        <h2>Personaliza tu {product.name}</h2>\n\n        {loading ? (\n          <div className=\"loading-container\">\n            <Loader className=\"loading-spinner\" size={48} />\n            <p>Cargando opciones...</p>\n          </div>\n        ) : error ? (\n          <div className=\"error-container\">\n            <p className=\"error-message\">{error}</p>\n            <button onClick={loadProductData} className=\"retry-button\">\n              Reintentar\n            </button>\n          </div>\n        ) : (\n          <>\n            {/* Información del producto */}\n            <div className=\"customization-product-info\">\n              {product.images && product.images[0] ? (\n                <img \n                  src={product.images[0].src} \n                  alt={product.name} \n                  className=\"customization-product-image\"\n                />\n              ) : (\n                <div className=\"customization-product-image placeholder\">\n                  <Pizza size={48} />\n                </div>\n              )}\n              <div className=\"product-details\">\n                <h3>{product.name}</h3>\n                {product.short_description && (\n                  <p className=\"product-description\" \n                     dangerouslySetInnerHTML={{ __html: product.short_description }} />\n                )}\n              </div>\n            </div>\n\n            {/* Atributos de variación */}\n            {attributes.length > 0 && (\n              <div className=\"customization-section\">\n                {attributes.map(attribute => (\n                  <div key={attribute.id || attribute.name} className=\"attribute-section\">\n                    <h4>{attribute.name}</h4>\n                    {attribute.description && (\n                      <p className=\"section-description\">{attribute.description}</p>\n                    )}\n                    <div className=\"attribute-options\">\n                      {attribute.options.map(option => (\n                        <label key={option} className=\"attribute-option\">\n                          <input\n                            type=\"radio\"\n                            name={attribute.name}\n                            value={option}\n                            checked={selectedAttributes[attribute.name] === option}\n                            onChange={() => handleAttributeChange(attribute.name, option)}\n                          />\n                          <span className=\"option-label\">\n                            <span className=\"option-check\">\n                              <Check size={16} />\n                            </span>\n                            {option}\n                          </span>\n                        </label>\n                      ))}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n\n            {/* Advanced Product Fields */}\n            {productAddons.length > 0 && (\n              <div className=\"customization-section\">\n                <h4>Opciones adicionales</h4>\n                {productAddons.map((addon, index) => (\n                  <div key={addon.id || addon.name || index} className=\"addon-field\">\n                    <label className=\"addon-label\">\n                      {addon.title || addon.name}\n                      {addon.required && <span className=\"required\">*</span>}\n                      {addon.price && addon.price > 0 && (\n                        <span className=\"addon-price\">\n                          {addon.price_type === 'quantity_based' \n                            ? ` (+${formatPrice(addon.price)} por unidad)`\n                            : ` (+${formatPrice(addon.price)})`\n                          }\n                        </span>\n                      )}\n                    </label>\n                    {addon.description && (\n                      <p className=\"addon-description\">{addon.description}</p>\n                    )}\n                    {renderAddonField(addon)}\n                  </div>\n                ))}\n              </div>\n            )}\n\n            {/* Mostrar información de la variación seleccionada */}\n            {selectedVariation && (selectedVariation.stock_status === 'outofstock' || \n              (selectedVariation.stock_quantity && selectedVariation.stock_quantity < 10)) && (\n              <div className=\"variation-info\">\n                <div className=\"variation-details\">\n                  {selectedVariation.stock_status === 'outofstock' ? (\n                    <p className=\"out-of-stock\">⚠️ Producto agotado</p>\n                  ) : selectedVariation.stock_quantity && selectedVariation.stock_quantity < 10 ? (\n                    <p className=\"low-stock\">⚡ Últimas {selectedVariation.stock_quantity} unidades</p>\n                  ) : null}\n                </div>\n              </div>\n            )}\n\n            {/* Instrucciones especiales */}\n            <div className=\"customization-section\">\n              <h4>Instrucciones especiales (opcional)</h4>\n              <p className=\"section-description\">\n                ¿Alguna preferencia especial?\n              </p>\n              <textarea\n                className=\"special-instructions\"\n                value={specialInstructions}\n                onChange={(e) => setSpecialInstructions(e.target.value)}\n                placeholder=\"Ej: Sin cebolla, extra queso, etc.\"\n                maxLength={200}\n              />\n              <span className=\"char-count\">\n                {specialInstructions.length}/200\n              </span>\n            </div>\n\n            {/* Controles de cantidad y precio */}\n            <div className=\"customization-section quantity-controls\">\n              <div className=\"quantity-selector\">\n                <button \n                  className=\"quantity-btn\"\n                  onClick={() => setQuantity(Math.max(1, quantity - 1))}\n                  disabled={quantity <= 1}\n                >\n                  <Minus size={16} />\n                </button>\n                <span className=\"quantity-value\">{quantity}</span>\n                <button \n                  className=\"quantity-btn\"\n                  onClick={() => setQuantity(quantity + 1)}\n                  disabled={selectedVariation && selectedVariation.stock_quantity && \n                           quantity >= selectedVariation.stock_quantity}\n                >\n                  <Plus size={16} />\n                </button>\n              </div>\n              <div className=\"quantity-price\">\n                <span className=\"price-label\">Precio unitario</span>\n                <span className=\"price-value\">{formatPrice(totalPrice / quantity)}</span>\n              </div>\n            </div>\n          </>\n        )}\n\n        {/* Footer con precio total y botón de agregar */}\n        <div className=\"customization-footer\">\n          <div className=\"total-info\">\n            <span className=\"total-label\">Total</span>\n            <span className=\"total-price\">{formatPrice(totalPrice)}</span>\n          </div>\n          <button \n            className={`add-to-cart-btn ${addingToCart ? 'adding' : ''}`}\n            onClick={handleAddToCart}\n            disabled={loading || addingToCart || \n                     (selectedVariation && selectedVariation.stock_status === 'outofstock')}\n          >\n            {addingToCart ? (\n              <>\n                <Loader className=\"btn-spinner\" size={20} />\n                <span>Agregando...</span>\n              </>\n            ) : (\n              <>\n                <Check className=\"btn-icon\" size={20} />\n                <span>Agregar al carrito</span>\n              </>\n            )}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CustomizationModal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}