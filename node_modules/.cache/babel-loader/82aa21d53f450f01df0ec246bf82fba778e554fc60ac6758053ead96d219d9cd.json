{"ast":null,"code":"// src/services/woocommerceApi.js\nimport{getApiUrl,getAuthHeaders}from'../config/woocommerce';class WooCommerceAPI{// Método genérico para hacer peticiones\nasync request(endpoint){let method=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'GET';let data=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;try{const url=getApiUrl(endpoint);const options={method,headers:getAuthHeaders()};if(data&&method!=='GET'){options.body=JSON.stringify(data);}const response=await fetch(url,options);if(!response.ok){throw new Error(`Error ${response.status}: ${response.statusText}`);}return await response.json();}catch(error){console.error('Error en la petición a WooCommerce:',error);throw error;}}// === PRODUCTOS ===\n// Obtener todos los productos\nasync getProducts(){let params=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};const queryParams=new URLSearchParams({per_page:100,...params}).toString();return this.request(`products?${queryParams}`);}// Obtener un producto por ID\nasync getProduct(id){return this.request(`products/${id}`);}// Obtener categorías de productos\nasync getCategories(){return this.request('products/categories?per_page=100');}// === PEDIDOS ===\n// Crear un nuevo pedido\nasync createOrder(orderData){const order={payment_method:orderData.paymentMethod||'cash',payment_method_title:orderData.paymentMethodTitle||'Pago en efectivo',set_paid:false,billing:{first_name:orderData.customerName,last_name:'',address_1:orderData.address||'',city:orderData.city||'Santiago',state:'',postcode:'',country:'CL',email:orderData.email||'',phone:orderData.phone||''},shipping:{first_name:orderData.customerName,last_name:'',address_1:orderData.address||'',city:orderData.city||'Santiago',state:'',postcode:'',country:'CL'},line_items:orderData.items.map(item=>({product_id:item.productId,quantity:item.quantity,meta_data:item.customizations||[]})),shipping_lines:orderData.shipping?[{method_id:'flat_rate',method_title:'Delivery',total:orderData.shipping.toString()}]:[]};return this.request('orders','POST',order);}// Obtener pedidos\nasync getOrders(){let params=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};const queryParams=new URLSearchParams({per_page:20,...params}).toString();return this.request(`orders?${queryParams}`);}// Obtener un pedido por ID\nasync getOrder(id){return this.request(`orders/${id}`);}// Actualizar estado del pedido\nasync updateOrderStatus(orderId,status){return this.request(`orders/${orderId}`,'PUT',{status});}// === CLIENTES ===\n// Crear cliente\nasync createCustomer(customerData){const customer={email:customerData.email,first_name:customerData.firstName,last_name:customerData.lastName||'',username:customerData.email,billing:{first_name:customerData.firstName,last_name:customerData.lastName||'',email:customerData.email,phone:customerData.phone||'',address_1:customerData.address||'',city:customerData.city||'Santiago',country:'CL'}};return this.request('customers','POST',customer);}// Buscar cliente por email\nasync getCustomerByEmail(email){return this.request(`customers?email=${email}`);}// === MÉTODOS DE PAGO ===\n// Obtener métodos de pago disponibles\nasync getPaymentMethods(){return this.request('payment_gateways');}// === ZONAS DE ENVÍO ===\n// Obtener zonas de envío\nasync getShippingZones(){return this.request('shipping/zones');}// === CUPONES ===\n// Validar cupón\nasync getCoupon(code){return this.request(`coupons?code=${code}`);}}// Exportar instancia única\nexport default new WooCommerceAPI();","map":{"version":3,"names":["getApiUrl","getAuthHeaders","WooCommerceAPI","request","endpoint","method","arguments","length","undefined","data","url","options","headers","body","JSON","stringify","response","fetch","ok","Error","status","statusText","json","error","console","getProducts","params","queryParams","URLSearchParams","per_page","toString","getProduct","id","getCategories","createOrder","orderData","order","payment_method","paymentMethod","payment_method_title","paymentMethodTitle","set_paid","billing","first_name","customerName","last_name","address_1","address","city","state","postcode","country","email","phone","shipping","line_items","items","map","item","product_id","productId","quantity","meta_data","customizations","shipping_lines","method_id","method_title","total","getOrders","getOrder","updateOrderStatus","orderId","createCustomer","customerData","customer","firstName","lastName","username","getCustomerByEmail","getPaymentMethods","getShippingZones","getCoupon","code"],"sources":["/Users/franciscalabra/Desktop/pizzeria-escandalosos/src/services/woocommerceApi.js"],"sourcesContent":["// src/services/woocommerceApi.js\nimport { getApiUrl, getAuthHeaders } from '../config/woocommerce';\n\nclass WooCommerceAPI {\n  // Método genérico para hacer peticiones\n  async request(endpoint, method = 'GET', data = null) {\n    try {\n      const url = getApiUrl(endpoint);\n      const options = {\n        method,\n        headers: getAuthHeaders(),\n      };\n\n      if (data && method !== 'GET') {\n        options.body = JSON.stringify(data);\n      }\n\n      const response = await fetch(url, options);\n      \n      if (!response.ok) {\n        throw new Error(`Error ${response.status}: ${response.statusText}`);\n      }\n\n      return await response.json();\n    } catch (error) {\n      console.error('Error en la petición a WooCommerce:', error);\n      throw error;\n    }\n  }\n\n  // === PRODUCTOS ===\n  \n  // Obtener todos los productos\n  async getProducts(params = {}) {\n    const queryParams = new URLSearchParams({\n      per_page: 100,\n      ...params\n    }).toString();\n    \n    return this.request(`products?${queryParams}`);\n  }\n\n  // Obtener un producto por ID\n  async getProduct(id) {\n    return this.request(`products/${id}`);\n  }\n\n  // Obtener categorías de productos\n  async getCategories() {\n    return this.request('products/categories?per_page=100');\n  }\n\n  // === PEDIDOS ===\n  \n  // Crear un nuevo pedido\n  async createOrder(orderData) {\n    const order = {\n      payment_method: orderData.paymentMethod || 'cash',\n      payment_method_title: orderData.paymentMethodTitle || 'Pago en efectivo',\n      set_paid: false,\n      billing: {\n        first_name: orderData.customerName,\n        last_name: '',\n        address_1: orderData.address || '',\n        city: orderData.city || 'Santiago',\n        state: '',\n        postcode: '',\n        country: 'CL',\n        email: orderData.email || '',\n        phone: orderData.phone || ''\n      },\n      shipping: {\n        first_name: orderData.customerName,\n        last_name: '',\n        address_1: orderData.address || '',\n        city: orderData.city || 'Santiago',\n        state: '',\n        postcode: '',\n        country: 'CL'\n      },\n      line_items: orderData.items.map(item => ({\n        product_id: item.productId,\n        quantity: item.quantity,\n        meta_data: item.customizations || []\n      })),\n      shipping_lines: orderData.shipping ? [{\n        method_id: 'flat_rate',\n        method_title: 'Delivery',\n        total: orderData.shipping.toString()\n      }] : []\n    };\n\n    return this.request('orders', 'POST', order);\n  }\n\n  // Obtener pedidos\n  async getOrders(params = {}) {\n    const queryParams = new URLSearchParams({\n      per_page: 20,\n      ...params\n    }).toString();\n    \n    return this.request(`orders?${queryParams}`);\n  }\n\n  // Obtener un pedido por ID\n  async getOrder(id) {\n    return this.request(`orders/${id}`);\n  }\n\n  // Actualizar estado del pedido\n  async updateOrderStatus(orderId, status) {\n    return this.request(`orders/${orderId}`, 'PUT', { status });\n  }\n\n  // === CLIENTES ===\n  \n  // Crear cliente\n  async createCustomer(customerData) {\n    const customer = {\n      email: customerData.email,\n      first_name: customerData.firstName,\n      last_name: customerData.lastName || '',\n      username: customerData.email,\n      billing: {\n        first_name: customerData.firstName,\n        last_name: customerData.lastName || '',\n        email: customerData.email,\n        phone: customerData.phone || '',\n        address_1: customerData.address || '',\n        city: customerData.city || 'Santiago',\n        country: 'CL'\n      }\n    };\n\n    return this.request('customers', 'POST', customer);\n  }\n\n  // Buscar cliente por email\n  async getCustomerByEmail(email) {\n    return this.request(`customers?email=${email}`);\n  }\n\n  // === MÉTODOS DE PAGO ===\n  \n  // Obtener métodos de pago disponibles\n  async getPaymentMethods() {\n    return this.request('payment_gateways');\n  }\n\n  // === ZONAS DE ENVÍO ===\n  \n  // Obtener zonas de envío\n  async getShippingZones() {\n    return this.request('shipping/zones');\n  }\n\n  // === CUPONES ===\n  \n  // Validar cupón\n  async getCoupon(code) {\n    return this.request(`coupons?code=${code}`);\n  }\n}\n\n// Exportar instancia única\nexport default new WooCommerceAPI();"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}