{"ast":null,"code":"// src/components/ProductCard/ProductCard.jsx\nimport React,{useContext}from'react';import{ShoppingCart,Tag}from'lucide-react';import{CartContext}from'../../context/CartContext';import'./ProductCard.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProductCard=_ref=>{var _product$variations,_product$images,_product$images$;let{product,onClick}=_ref;const{addToCart}=useContext(CartContext);// Verificar si el producto necesita personalización\nconst needsCustomization=((_product$variations=product.variations)===null||_product$variations===void 0?void 0:_product$variations.length)>0||product.type==='grouped'||product.categories.some(cat=>cat.slug==='combos');const formatPrice=price=>{return new Intl.NumberFormat('es-CL',{style:'currency',currency:'CLP',minimumFractionDigits:0,maximumFractionDigits:0}).format(price);};const handleButtonClick=e=>{e.stopPropagation();if(needsCustomization){// Verificar que onClick sea una función antes de llamarla\nif(onClick&&typeof onClick==='function'){onClick();}else{// Si no hay onClick, simplemente agregar al carrito con el producto básico\naddToCart(product,1);}}else{// Agregar directamente al carrito\naddToCart(product,1);}};const handleCardClick=()=>{// Solo ejecutar onClick si está definido y es una función\nif(onClick&&typeof onClick==='function'){onClick();}};return/*#__PURE__*/_jsxs(\"div\",{className:\"product-card\",onClick:handleCardClick,children:[product.on_sale&&/*#__PURE__*/_jsxs(\"div\",{className:\"product-badge\",children:[/*#__PURE__*/_jsx(Tag,{size:16}),\"PROMO\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"product-image-container\",children:(_product$images=product.images)!==null&&_product$images!==void 0&&(_product$images$=_product$images[0])!==null&&_product$images$!==void 0&&_product$images$.src?/*#__PURE__*/_jsx(\"img\",{src:product.images[0].src,alt:product.name,className:\"product-image\"}):/*#__PURE__*/_jsx(\"div\",{className:\"product-image-placeholder\",children:/*#__PURE__*/_jsx(ShoppingCart,{size:48})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-info\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"product-name\",children:product.name}),product.short_description&&/*#__PURE__*/_jsx(\"p\",{className:\"product-description\",dangerouslySetInnerHTML:{__html:product.short_description}}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-footer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"product-price\",children:[product.on_sale&&product.regular_price&&/*#__PURE__*/_jsx(\"span\",{className:\"product-price-regular\",children:formatPrice(product.regular_price)}),/*#__PURE__*/_jsx(\"span\",{className:\"product-price-sale\",children:formatPrice(product.price)})]}),/*#__PURE__*/_jsx(\"button\",{className:\"product-btn\",onClick:handleButtonClick,children:needsCustomization?'Personalizar':'Agregar al carrito'})]})]})]});};export default ProductCard;","map":{"version":3,"names":["React","useContext","ShoppingCart","Tag","CartContext","jsx","_jsx","jsxs","_jsxs","ProductCard","_ref","_product$variations","_product$images","_product$images$","product","onClick","addToCart","needsCustomization","variations","length","type","categories","some","cat","slug","formatPrice","price","Intl","NumberFormat","style","currency","minimumFractionDigits","maximumFractionDigits","format","handleButtonClick","e","stopPropagation","handleCardClick","className","children","on_sale","size","images","src","alt","name","short_description","dangerouslySetInnerHTML","__html","regular_price"],"sources":["/Users/franciscalabra/Desktop/pizzeria-escandalosos/src/components/ProductCard/ProductCard.jsx"],"sourcesContent":["// src/components/ProductCard/ProductCard.jsx\nimport React, { useContext } from 'react';\nimport { ShoppingCart, Tag } from 'lucide-react';\nimport { CartContext } from '../../context/CartContext';\nimport './ProductCard.css';\n\nconst ProductCard = ({ product, onClick }) => {\n  const { addToCart } = useContext(CartContext);\n  \n  // Verificar si el producto necesita personalización\n  const needsCustomization = product.variations?.length > 0 || \n                           product.type === 'grouped' || \n                           product.categories.some(cat => cat.slug === 'combos');\n\n  const formatPrice = (price) => {\n    return new Intl.NumberFormat('es-CL', {\n      style: 'currency',\n      currency: 'CLP',\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 0,\n    }).format(price);\n  };\n\n  const handleButtonClick = (e) => {\n    e.stopPropagation();\n    \n    if (needsCustomization) {\n      // Verificar que onClick sea una función antes de llamarla\n      if (onClick && typeof onClick === 'function') {\n        onClick();\n      } else {\n        // Si no hay onClick, simplemente agregar al carrito con el producto básico\n        addToCart(product, 1);\n      }\n    } else {\n      // Agregar directamente al carrito\n      addToCart(product, 1);\n    }\n  };\n\n  const handleCardClick = () => {\n    // Solo ejecutar onClick si está definido y es una función\n    if (onClick && typeof onClick === 'function') {\n      onClick();\n    }\n  };\n\n  return (\n    <div className=\"product-card\" onClick={handleCardClick}>\n      {product.on_sale && (\n        <div className=\"product-badge\">\n          <Tag size={16} />\n          PROMO\n        </div>\n      )}\n      \n      <div className=\"product-image-container\">\n        {product.images?.[0]?.src ? (\n          <img \n            src={product.images[0].src} \n            alt={product.name}\n            className=\"product-image\"\n          />\n        ) : (\n          <div className=\"product-image-placeholder\">\n            <ShoppingCart size={48} />\n          </div>\n        )}\n      </div>\n      \n      <div className=\"product-info\">\n        <h3 className=\"product-name\">{product.name}</h3>\n        \n        {product.short_description && (\n          <p className=\"product-description\" \n             dangerouslySetInnerHTML={{ __html: product.short_description }} \n          />\n        )}\n        \n        <div className=\"product-footer\">\n          <div className=\"product-price\">\n            {product.on_sale && product.regular_price && (\n              <span className=\"product-price-regular\">{formatPrice(product.regular_price)}</span>\n            )}\n            <span className=\"product-price-sale\">{formatPrice(product.price)}</span>\n          </div>\n          \n          <button \n            className=\"product-btn\"\n            onClick={handleButtonClick}\n          >\n            {needsCustomization ? 'Personalizar' : 'Agregar al carrito'}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ProductCard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}