{"ast":null,"code":"var _jsxFileName = \"/Users/franciscalabra/Desktop/escandalosos/src/components/CustomizationModal/CustomizationModal.jsx\",\n  _s = $RefreshSig$();\n// src/components/CustomizationModal/CustomizationModal.jsx\nimport React, { useState, useContext, useEffect } from 'react';\nimport { X, Plus, Minus, Info, Check, Loader, Pizza, Upload, ShoppingCart } from 'lucide-react';\nimport { CartContext } from '../../context/CartContext';\nimport woocommerceApi from '../../services/woocommerceApi';\nimport './CustomizationModal.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst CustomizationModal = ({\n  product,\n  isOpen,\n  onClose\n}) => {\n  _s();\n  const {\n    addToCart\n  } = useContext(CartContext);\n\n  // Estados para datos de WooCommerce\n  const [variations, setVariations] = useState([]);\n  const [attributes, setAttributes] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  // Estados para Advanced Product Fields\n  const [productAddons, setProductAddons] = useState([]);\n  const [addonValues, setAddonValues] = useState({});\n  const [addonFiles, setAddonFiles] = useState({});\n\n  // Estados de selección\n  const [selectedAttributes, setSelectedAttributes] = useState({});\n  const [selectedVariation, setSelectedVariation] = useState(null);\n  const [quantity, setQuantity] = useState(1);\n  const [specialInstructions, setSpecialInstructions] = useState('');\n  const [totalPrice, setTotalPrice] = useState(0);\n  const [addingToCart, setAddingToCart] = useState(false);\n\n  // Reset estados cuando se abre el modal\n  useEffect(() => {\n    if (isOpen && product) {\n      resetForm();\n      loadProductData();\n    }\n  }, [isOpen, product]);\n\n  // Actualizar precio cuando cambia la selección\n  useEffect(() => {\n    updatePrice();\n  }, [selectedVariation, quantity, product, addonValues]);\n  const resetForm = () => {\n    setSelectedAttributes({});\n    setSelectedVariation(null);\n    setQuantity(1);\n    setSpecialInstructions('');\n    setProductAddons([]);\n    setAddonValues({});\n    setAddonFiles({});\n    setError(null);\n  };\n  const loadProductData = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      // Debugging: Ver toda la estructura del producto\n      console.log('=== PRODUCTO COMPLETO ===');\n      console.log(product);\n      console.log('=== META DATA ===');\n      console.log(product.meta_data);\n      console.log('=== TODAS LAS PROPIEDADES ===');\n      console.log(Object.keys(product));\n\n      // Si es un producto variable, cargar variaciones\n      if (product.type === 'variable') {\n        const variationsData = await woocommerceApi.getProductVariations(product.id);\n        setVariations(variationsData || []);\n\n        // Extraer atributos del producto\n        if (product.attributes) {\n          const variableAttributes = product.attributes.filter(attr => attr.variation);\n          setAttributes(variableAttributes);\n\n          // Buscar la variación con el precio más alto\n          const highestPriceVariation = variationsData.reduce((prev, current) => {\n            const prevPrice = parseFloat(prev.price) || 0;\n            const currentPrice = parseFloat(current.price) || 0;\n            return currentPrice > prevPrice ? current : prev;\n          }, variationsData[0]);\n\n          // Establecer valores por defecto basados en la variación de mayor precio\n          const defaultAttributes = {};\n          if (highestPriceVariation && highestPriceVariation.attributes) {\n            highestPriceVariation.attributes.forEach(varAttr => {\n              // Encontrar el atributo correspondiente en los atributos del producto\n              const productAttr = variableAttributes.find(attr => attr.name === varAttr.name || attr.name.toLowerCase() === varAttr.name.toLowerCase());\n              if (productAttr) {\n                defaultAttributes[productAttr.name] = varAttr.option;\n              }\n            });\n          } else {\n            // Fallback: si no encontramos la variación de mayor precio\n            variableAttributes.forEach(attr => {\n              if (attr.options && attr.options.length > 0) {\n                // Si el atributo es \"Tamaño\", buscar \"Familiar\" primero\n                if (attr.name.toLowerCase() === 'tamaño' || attr.name.toLowerCase() === 'tamano') {\n                  const familiarOption = attr.options.find(opt => opt.toLowerCase() === 'familiar');\n                  defaultAttributes[attr.name] = familiarOption || attr.options[0];\n                } else {\n                  defaultAttributes[attr.name] = attr.options[0];\n                }\n              }\n            });\n          }\n          setSelectedAttributes(defaultAttributes);\n\n          // Establecer directamente la variación de mayor precio\n          setSelectedVariation(highestPriceVariation);\n\n          // También actualizar el precio inmediatamente\n          if (highestPriceVariation) {\n            const basePrice = parseFloat(highestPriceVariation.price);\n            setTotalPrice(basePrice * quantity);\n          }\n        }\n      } else {\n        // Para productos simples, establecer el precio directamente\n        setTotalPrice(parseFloat(product.price) * quantity);\n      }\n\n      // Cargar Advanced Product Fields si existen\n      await loadProductAddons();\n    } catch (err) {\n      console.error('Error loading product data:', err);\n      setError('Error al cargar las opciones del producto. Por favor, intenta de nuevo.');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const loadProductAddons = async () => {\n    console.log('=== BUSCANDO ADDONS ===');\n\n    // Verificar si el producto tiene campos adicionales del plugin Advanced Product Fields\n    if (product.meta_data) {\n      console.log('Meta data encontrada:', product.meta_data);\n\n      // Buscar el campo _wapf_fieldgroup\n      const fieldGroupData = product.meta_data.find(meta => meta.key === '_wapf_fieldgroup');\n      if (fieldGroupData && fieldGroupData.value) {\n        console.log('Field group data encontrada:', fieldGroupData.value);\n\n        // El valor puede ser un ID de grupo o un array de IDs\n        let groupIds = [];\n        if (Array.isArray(fieldGroupData.value)) {\n          groupIds = fieldGroupData.value;\n        } else if (typeof fieldGroupData.value === 'object' && fieldGroupData.value.groups) {\n          groupIds = fieldGroupData.value.groups;\n        } else if (typeof fieldGroupData.value === 'string' || typeof fieldGroupData.value === 'number') {\n          groupIds = [fieldGroupData.value];\n        }\n        console.log('Group IDs:', groupIds);\n\n        // Si tenemos IDs de grupos, necesitamos obtener los campos de esos grupos\n        // Para esto necesitamos hacer una petición adicional o el plugin debe exponer los campos\n\n        // Por ahora, vamos a buscar si hay campos directamente en el producto\n        // El plugin también puede guardar los campos compilados en otro meta field\n        const possibleFieldKeys = ['_wapf_fields', '_wapf_field_groups_fields', 'wapf_fields', '_product_addons'];\n        for (const key of possibleFieldKeys) {\n          const fieldsData = product.meta_data.find(meta => meta.key === key);\n          if (fieldsData && fieldsData.value) {\n            console.log(`Campos encontrados con key \"${key}\":`, fieldsData.value);\n            const fields = Array.isArray(fieldsData.value) ? fieldsData.value : [fieldsData.value];\n            setProductAddons(fields);\n            initializeAddonValues(fields);\n            return;\n          }\n        }\n\n        // Si no encontramos los campos compilados, intentamos obtenerlos via API personalizada\n        if (groupIds.length > 0 || true) {\n          // Siempre intentar con la API personalizada\n          console.log('Intentando obtener campos del producto via API...');\n          console.log('ID del producto:', product.id);\n          try {\n            // Construir la URL completa\n            const apiUrl = `https://escandalosospizzas.cl/wp/wp-json/custom/v1/product-fields/${product.id}`;\n            console.log('URL de la API:', apiUrl);\n            const response = await fetch(apiUrl);\n            console.log('Status de respuesta:', response.status);\n            if (response.ok) {\n              const data = await response.json();\n              console.log('Respuesta completa de la API:', data);\n              console.log('Tipo de respuesta:', typeof data);\n              console.log('Es array?:', Array.isArray(data));\n              console.log('Claves del objeto:', Object.keys(data));\n              console.log('Valores del objeto:', Object.values(data));\n\n              // Intentar diferentes estructuras de respuesta\n              let fields = null;\n\n              // ESTRUCTURA ESPECÍFICA DE WAPF (Advanced Product Fields)\n              if (data && data.field_groups && data.field_groups.fields) {\n                console.log('Campos encontrados en field_groups.fields');\n                fields = data.field_groups.fields;\n              }\n              // Si la respuesta es un array directo\n              else if (Array.isArray(data)) {\n                fields = data;\n              }\n              // Si los campos están en data.fields\n              else if (data && data.fields && Array.isArray(data.fields)) {\n                fields = data.fields;\n              }\n              // Si los campos están en data.data\n              else if (data && data.data) {\n                fields = data.data;\n              }\n              // Si la respuesta tiene una propiedad items\n              else if (data && data.items) {\n                fields = data.items;\n              }\n              // Si la respuesta tiene una propiedad addons\n              else if (data && data.addons) {\n                fields = data.addons;\n              }\n              // Si la respuesta tiene una propiedad product_fields\n              else if (data && data.product_fields) {\n                fields = data.product_fields;\n              }\n              // Si la respuesta es un objeto con campos como propiedades\n              else if (data && typeof data === 'object' && !Array.isArray(data)) {\n                // Buscar cualquier propiedad que sea un array\n                const keys = Object.keys(data);\n                for (const key of keys) {\n                  if (Array.isArray(data[key])) {\n                    console.log(`Encontrado array de campos en la propiedad: ${key}`);\n                    fields = data[key];\n                    break;\n                  }\n                }\n\n                // Si no encontramos arrays, tal vez los campos están directamente en el objeto\n                if (!fields && keys.length > 0) {\n                  // Verificar si el objeto tiene estructura de campo\n                  const firstKey = keys[0];\n                  if (data[firstKey] && (data[firstKey].type || data[firstKey].label || data[firstKey].name)) {\n                    // Convertir el objeto en array\n                    fields = Object.values(data);\n                  }\n                }\n              }\n              if (fields) {\n                console.log('Campos encontrados y procesados:', fields);\n                // Log de cada campo para debug\n                fields.forEach(field => {\n                  console.log('Campo individual:', {\n                    id: field.id,\n                    label: field.label,\n                    title: field.title,\n                    name: field.name,\n                    type: field.type,\n                    required: field.required,\n                    pricing: field.pricing,\n                    options: field.options\n                  });\n                });\n                setProductAddons(fields);\n                initializeAddonValues(fields);\n                return;\n              } else {\n                console.log('No se pudieron extraer campos de la respuesta');\n              }\n            } else {\n              console.log('La API devolvió un error:', response.status, response.statusText);\n            }\n          } catch (error) {\n            console.log('Error obteniendo campos via API:', error);\n          }\n        }\n      }\n    }\n\n    // Si no encontramos campos via meta_data, verificar si están directamente en el producto\n    if (product.product_fields) {\n      console.log('Campos encontrados en product.product_fields:', product.product_fields);\n      setProductAddons(product.product_fields);\n      initializeAddonValues(product.product_fields);\n    } else if (product.addons) {\n      console.log('Campos encontrados en product.addons:', product.addons);\n      setProductAddons(product.addons);\n      initializeAddonValues(product.addons);\n    }\n    console.log('=== ESTADO FINAL DE ADDONS ===');\n    console.log('productAddons establecidos:', productAddons);\n  };\n  const initializeAddonValues = fields => {\n    const defaultValues = {};\n    fields.forEach(field => {\n      const fieldId = field.id || field.name || field.field_id;\n      if (field.type === 'checkbox' || field.type === 'checkboxes' || field.type === 'multiple_choice') {\n        defaultValues[fieldId] = [];\n      } else if (field.type === 'number' && field.min !== undefined) {\n        defaultValues[fieldId] = field.min;\n      } else if (field.type === 'true_false') {\n        defaultValues[fieldId] = false;\n      } else if (field.type === 'radio' || field.type === 'radiobutton') {\n        var _field$options;\n        // Para radio buttons, buscar si hay una opción seleccionada por defecto\n        const choices = ((_field$options = field.options) === null || _field$options === void 0 ? void 0 : _field$options.choices) || field.options || [];\n        const defaultChoice = choices.find(choice => choice.selected === true);\n        defaultValues[fieldId] = defaultChoice ? defaultChoice.label || defaultChoice.value : '';\n      } else {\n        defaultValues[fieldId] = '';\n      }\n    });\n    console.log('Valores iniciales de addons:', defaultValues);\n    setAddonValues(defaultValues);\n  };\n  const handleAttributeChange = (attributeName, value) => {\n    const newAttributes = {\n      ...selectedAttributes,\n      [attributeName]: value\n    };\n    setSelectedAttributes(newAttributes);\n\n    // Buscar variación que coincida con los atributos seleccionados\n    findMatchingVariation(newAttributes);\n  };\n  const findMatchingVariation = attributes => {\n    if (!variations || variations.length === 0) return;\n    const matching = variations.find(variation => {\n      return variation.attributes.every(attr => {\n        // Normalizar nombres de atributos\n        const normalizedAttrName = attr.name.toLowerCase().replace(/-/g, ' ');\n        const selectedValue = attributes[attr.name] || attributes[normalizedAttrName];\n\n        // Comparar valores normalizados también\n        const normalizedOption = attr.option.toLowerCase();\n        const normalizedSelected = selectedValue === null || selectedValue === void 0 ? void 0 : selectedValue.toLowerCase();\n        return normalizedOption === normalizedSelected || selectedValue == attr.option;\n      });\n    });\n    setSelectedVariation(matching || null);\n\n    // Si encontramos la variación, actualizamos el precio inmediatamente\n    if (matching) {\n      const basePrice = parseFloat(matching.price);\n      const addonPrice = calculateAddonPrice();\n      setTotalPrice((basePrice + addonPrice) * quantity);\n    }\n  };\n  const handleAddonChange = (fieldId, value) => {\n    setAddonValues(prev => ({\n      ...prev,\n      [fieldId]: value\n    }));\n  };\n  const handleFileUpload = (fieldId, file) => {\n    if (file) {\n      setAddonFiles(prev => ({\n        ...prev,\n        [fieldId]: file\n      }));\n      setAddonValues(prev => ({\n        ...prev,\n        [fieldId]: file.name\n      }));\n    }\n  };\n  const calculateAddonPrice = () => {\n    let addonTotal = 0;\n    productAddons.forEach(addon => {\n      var _addon$options, _addon$options2;\n      const fieldId = addon.id || addon.name;\n      const value = addonValues[fieldId];\n      if (!value || Array.isArray(value) && value.length === 0) return;\n\n      // Para WAPF, el precio puede estar en addon.pricing\n      if (addon.pricing && addon.pricing.enabled && addon.pricing.amount) {\n        if (addon.pricing.type === 'fixed') {\n          addonTotal += parseFloat(addon.pricing.amount);\n        } else if (addon.pricing.type === 'quantity_based') {\n          addonTotal += parseFloat(addon.pricing.amount) * quantity;\n        }\n      }\n\n      // Precio fijo tradicional\n      else if (addon.price_type === 'flat_fee' && addon.price) {\n        addonTotal += parseFloat(addon.price);\n      }\n\n      // Precio basado en cantidad\n      else if (addon.price_type === 'quantity_based' && addon.price) {\n        addonTotal += parseFloat(addon.price) * quantity;\n      }\n\n      // Precio por carácter (para campos de texto)\n      else if (addon.price_type === 'per_char' && addon.price && typeof value === 'string') {\n        addonTotal += parseFloat(addon.price) * value.length;\n      }\n\n      // Para campos con opciones (radio, select, checkbox)\n      else if (((_addon$options = addon.options) !== null && _addon$options !== void 0 && _addon$options.choices || addon.options) && Array.isArray(((_addon$options2 = addon.options) === null || _addon$options2 === void 0 ? void 0 : _addon$options2.choices) || addon.options)) {\n        var _addon$options3;\n        const options = ((_addon$options3 = addon.options) === null || _addon$options3 === void 0 ? void 0 : _addon$options3.choices) || addon.options;\n        options.forEach(option => {\n          const isSelected = Array.isArray(value) ? value.includes(option.label || option.value) : value === (option.label || option.value);\n          if (isSelected && (option.pricing_amount || option.price)) {\n            const optionPrice = option.pricing_amount || option.price;\n            if (option.pricing_type === 'quantity_based' || option.price_type === 'quantity_based') {\n              addonTotal += parseFloat(optionPrice) * quantity;\n            } else {\n              addonTotal += parseFloat(optionPrice);\n            }\n          }\n        });\n      }\n    });\n    return addonTotal;\n  };\n  const updatePrice = () => {\n    let basePrice = 0;\n    if (selectedVariation && selectedVariation.price) {\n      basePrice = parseFloat(selectedVariation.price);\n    } else if (product && product.price) {\n      basePrice = parseFloat(product.price);\n    }\n    const addonPrice = calculateAddonPrice();\n    setTotalPrice((basePrice + addonPrice) * quantity);\n  };\n  const formatPrice = price => {\n    return new Intl.NumberFormat('es-CL', {\n      style: 'currency',\n      currency: 'CLP',\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 0\n    }).format(price);\n  };\n  const isValidSelection = () => {\n    if (product.type === 'variable') {\n      // Para productos variables, verificar que se haya seleccionado una variación válida\n      if (!selectedVariation || selectedVariation.stock_status === 'outofstock') {\n        return false;\n      }\n    }\n\n    // Validar campos requeridos de Advanced Product Fields\n    for (const addon of productAddons) {\n      if (addon.required) {\n        const fieldId = addon.id || addon.name;\n        const value = addonValues[fieldId];\n        if (!value || Array.isArray(value) && value.length === 0) {\n          setError(`Por favor, completa el campo: ${addon.title || addon.name}`);\n          return false;\n        }\n      }\n    }\n    return true;\n  };\n  const handleAddToCart = async () => {\n    if (!isValidSelection()) {\n      if (!error) {\n        setError('Por favor, selecciona todas las opciones requeridas');\n      }\n      return;\n    }\n    setAddingToCart(true);\n    try {\n      var _selectedVariation$im, _product$images, _product$images$;\n      // Preparar meta_data para Advanced Product Fields\n      const addonMetaData = [];\n      productAddons.forEach(addon => {\n        const fieldId = addon.id || addon.name;\n        const value = addonValues[fieldId];\n        if (value && !(Array.isArray(value) && value.length === 0)) {\n          var _addon$options4, _addon$options5;\n          // Calcular el precio del addon\n          let addonPrice = 0;\n          let priceType = 'flat_fee';\n\n          // Para WAPF, el precio puede estar en addon.pricing\n          if (addon.pricing && addon.pricing.enabled && addon.pricing.amount) {\n            addonPrice = parseFloat(addon.pricing.amount);\n            priceType = addon.pricing.type || 'fixed';\n          }\n          // Precio tradicional\n          else if (addon.price) {\n            addonPrice = parseFloat(addon.price);\n            priceType = addon.price_type || 'flat_fee';\n          }\n\n          // Para campos con opciones, buscar el precio de la opción seleccionada\n          if (((_addon$options4 = addon.options) !== null && _addon$options4 !== void 0 && _addon$options4.choices || addon.options) && Array.isArray(((_addon$options5 = addon.options) === null || _addon$options5 === void 0 ? void 0 : _addon$options5.choices) || addon.options)) {\n            var _addon$options6;\n            const options = ((_addon$options6 = addon.options) === null || _addon$options6 === void 0 ? void 0 : _addon$options6.choices) || addon.options;\n            options.forEach(option => {\n              const isSelected = Array.isArray(value) ? value.includes(option.label || option.value) : value === (option.label || option.value);\n              if (isSelected && (option.pricing_amount || option.price)) {\n                addonPrice = parseFloat(option.pricing_amount || option.price);\n                priceType = option.pricing_type || option.price_type || 'flat_fee';\n              }\n            });\n          }\n\n          // Agregar el campo a meta_data\n          addonMetaData.push({\n            key: addon.name || addon.title,\n            value: Array.isArray(value) ? value.join(', ') : value,\n            display: addon.title || addon.name,\n            price: addonPrice,\n            price_type: priceType\n          });\n        }\n      });\n      const cartItem = {\n        id: selectedVariation ? `${product.id}-${selectedVariation.id}-${Date.now()}` : `${product.id}-${Date.now()}`,\n        productId: product.id,\n        variationId: selectedVariation === null || selectedVariation === void 0 ? void 0 : selectedVariation.id,\n        name: product.name,\n        price: totalPrice / quantity,\n        // Precio unitario incluyendo addons\n        image: (selectedVariation === null || selectedVariation === void 0 ? void 0 : (_selectedVariation$im = selectedVariation.image) === null || _selectedVariation$im === void 0 ? void 0 : _selectedVariation$im.src) || ((_product$images = product.images) === null || _product$images === void 0 ? void 0 : (_product$images$ = _product$images[0]) === null || _product$images$ === void 0 ? void 0 : _product$images$.src) || '',\n        quantity,\n        customizations: {\n          attributes: selectedAttributes,\n          specialInstructions: specialInstructions.trim(),\n          variationDetails: selectedVariation ? {\n            name: selectedVariation.name,\n            attributes: selectedVariation.attributes\n          } : null,\n          // Agregar datos de Advanced Product Fields\n          productAddons: addonMetaData,\n          addonValues: addonValues,\n          addonFiles: Object.keys(addonFiles).length > 0 ? addonFiles : null,\n          // Agregar el precio total de los addons\n          addonsPrice: calculateAddonPrice()\n        }\n      };\n      addToCart(cartItem);\n\n      // Mostrar mensaje de éxito\n      setTimeout(() => {\n        onClose();\n        resetForm();\n      }, 500);\n    } catch (err) {\n      setError('Error al agregar al carrito. Por favor, intenta de nuevo.');\n    } finally {\n      setAddingToCart(false);\n    }\n  };\n  const renderAddonField = addon => {\n    var _addon$options7, _addon$options8, _addon$options9;\n    const fieldId = addon.id || addon.name;\n    const value = addonValues[fieldId] || '';\n    switch (addon.type) {\n      case 'text':\n      case 'custom_text':\n        return /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: value,\n          onChange: e => handleAddonChange(fieldId, e.target.value),\n          placeholder: addon.placeholder || '',\n          maxLength: addon.max || undefined,\n          className: \"addon-text-input\",\n          required: addon.required\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 603,\n          columnNumber: 11\n        }, this);\n      case 'textarea':\n      case 'custom_textarea':\n        return /*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: value,\n          onChange: e => handleAddonChange(fieldId, e.target.value),\n          placeholder: addon.placeholder || '',\n          maxLength: addon.max || undefined,\n          rows: 4,\n          className: \"addon-textarea\",\n          required: addon.required\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 617,\n          columnNumber: 11\n        }, this);\n      case 'number':\n        return /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          value: value,\n          onChange: e => handleAddonChange(fieldId, parseFloat(e.target.value) || 0),\n          min: addon.min || undefined,\n          max: addon.max || undefined,\n          step: addon.step || 1,\n          className: \"addon-number-input\",\n          required: addon.required\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 630,\n          columnNumber: 11\n        }, this);\n      case 'email':\n        return /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          value: value,\n          onChange: e => handleAddonChange(fieldId, e.target.value),\n          placeholder: addon.placeholder || 'email@ejemplo.com',\n          className: \"addon-email-input\",\n          required: addon.required\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 644,\n          columnNumber: 11\n        }, this);\n      case 'select':\n      case 'dropdown':\n        const selectOptions = ((_addon$options7 = addon.options) === null || _addon$options7 === void 0 ? void 0 : _addon$options7.choices) || addon.options || [];\n        return /*#__PURE__*/_jsxDEV(\"select\", {\n          value: value,\n          onChange: e => handleAddonChange(fieldId, e.target.value),\n          className: \"addon-select\",\n          required: addon.required,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Selecciona una opci\\xF3n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 664,\n            columnNumber: 13\n          }, this), selectOptions.map((option, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: option.label || option.value,\n            children: [option.label || option.value, option.pricing_amount && option.pricing_amount > 0 && ` (+${formatPrice(option.pricing_amount)})`]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 666,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 658,\n          columnNumber: 11\n        }, this);\n      case 'radio':\n      case 'radiobutton':\n        // Obtener las opciones correctamente según la estructura de WAPF\n        const radioOptions = ((_addon$options8 = addon.options) === null || _addon$options8 === void 0 ? void 0 : _addon$options8.choices) || addon.options || [];\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"addon-radio-group\",\n          children: radioOptions.map((option, index) => /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"addon-radio-option\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              name: fieldId,\n              value: option.label || option.value,\n              checked: value === (option.label || option.value),\n              onChange: e => handleAddonChange(fieldId, e.target.value),\n              required: addon.required\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 682,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"radio-label\",\n              children: [option.label || option.value, option.pricing_amount && option.pricing_amount > 0 && ` (+${formatPrice(option.pricing_amount)})`]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 690,\n              columnNumber: 17\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 681,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 679,\n          columnNumber: 11\n        }, this);\n      case 'checkbox':\n      case 'checkboxes':\n      case 'multiple_choice':\n        const checkboxOptions = ((_addon$options9 = addon.options) === null || _addon$options9 === void 0 ? void 0 : _addon$options9.choices) || addon.options || [];\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"addon-checkbox-group\",\n          children: checkboxOptions.map((option, index) => /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"addon-checkbox-option\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              value: option.label || option.value,\n              checked: Array.isArray(value) && value.includes(option.label || option.value),\n              onChange: e => {\n                const optionValue = option.label || option.value;\n                const currentValues = Array.isArray(value) ? value : [];\n                if (e.target.checked) {\n                  handleAddonChange(fieldId, [...currentValues, optionValue]);\n                } else {\n                  handleAddonChange(fieldId, currentValues.filter(v => v !== optionValue));\n                }\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 707,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"checkbox-label\",\n              children: [option.label || option.value, option.pricing_amount && option.pricing_amount > 0 && ` (+${formatPrice(option.pricing_amount)})`]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 722,\n              columnNumber: 17\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 706,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 704,\n          columnNumber: 11\n        }, this);\n      case 'file':\n      case 'file_upload':\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"addon-file-upload\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"file-upload-label\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              onChange: e => handleFileUpload(fieldId, e.target.files[0]),\n              accept: addon.allowed_types || '*',\n              required: addon.required,\n              className: \"file-input\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 736,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"file-upload-button\",\n              children: [/*#__PURE__*/_jsxDEV(Upload, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 744,\n                columnNumber: 17\n              }, this), addonFiles[fieldId] ? addonFiles[fieldId].name : 'Seleccionar archivo']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 743,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 735,\n            columnNumber: 13\n          }, this), addon.max_size && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"file-size-info\",\n            children: [\"Tama\\xF1o m\\xE1ximo: \", addon.max_size, \"MB\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 749,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 734,\n          columnNumber: 11\n        }, this);\n      case 'color':\n        return /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"color\",\n          value: value || '#000000',\n          onChange: e => handleAddonChange(fieldId, e.target.value),\n          className: \"addon-color-input\",\n          required: addon.required\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 758,\n          columnNumber: 11\n        }, this);\n      case 'date':\n        return /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"date\",\n          value: value,\n          onChange: e => handleAddonChange(fieldId, e.target.value),\n          min: addon.min_date || undefined,\n          max: addon.max_date || undefined,\n          className: \"addon-date-input\",\n          required: addon.required\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 769,\n          columnNumber: 11\n        }, this);\n      case 'true_false':\n        return /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"addon-checkbox-option\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            checked: value === true,\n            onChange: e => handleAddonChange(fieldId, e.target.checked),\n            required: addon.required\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 783,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"checkbox-label\",\n            children: addon.true_label || 'Sí'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 789,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 782,\n          columnNumber: 11\n        }, this);\n      default:\n        console.log(`Tipo de campo no reconocido: ${addon.type}`);\n        return null;\n    }\n  };\n  if (!isOpen) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"customization-modal-overlay\",\n    onClick: onClose,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"customization-modal\",\n      onClick: e => e.stopPropagation(),\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"modal-close\",\n        onClick: onClose,\n        children: /*#__PURE__*/_jsxDEV(X, {\n          size: 24\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 807,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 806,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Personalizar Pedido\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 810,\n        columnNumber: 9\n      }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-container\",\n        children: [/*#__PURE__*/_jsxDEV(Loader, {\n          className: \"loading-spinner\",\n          size: 48\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 814,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Cargando opciones...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 815,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 813,\n        columnNumber: 11\n      }, this) : error ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"error-message\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 819,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: loadProductData,\n          className: \"retry-button\",\n          children: \"Reintentar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 820,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 818,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"customization-product-info\",\n          children: [product.images && product.images[0] ? /*#__PURE__*/_jsxDEV(\"img\", {\n            src: product.images[0].src,\n            alt: product.name,\n            className: \"customization-product-image\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 829,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"customization-product-image placeholder\",\n            children: /*#__PURE__*/_jsxDEV(Pizza, {\n              size: 48\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 836,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 835,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"product-details\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: product.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 840,\n              columnNumber: 17\n            }, this), product.short_description && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"product-description\",\n              dangerouslySetInnerHTML: {\n                __html: product.short_description\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 843,\n              columnNumber: 19\n            }, this), !product.short_description && product.description && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"product-description\",\n              dangerouslySetInnerHTML: {\n                __html: product.description\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 848,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"header-price\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"price-label\",\n                children: \"Precio: \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 853,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"price-value\",\n                children: formatPrice(totalPrice / quantity)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 854,\n                columnNumber: 19\n              }, this), selectedVariation && selectedVariation.attributes && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"price-variant\",\n                children: [\" - \", selectedVariation.attributes.map(attr => attr.option).join(', ')]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 856,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 852,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 839,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 827,\n          columnNumber: 13\n        }, this), attributes.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"customization-section\",\n          children: attributes.map(attribute => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"attribute-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: attribute.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 867,\n              columnNumber: 21\n            }, this), attribute.description && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"section-description\",\n              children: attribute.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 869,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"attribute-options\",\n              children: attribute.options.sort((a, b) => {\n                // Si es el atributo de tamaño, ordenar para que Familiar aparezca primero\n                if (attribute.name.toLowerCase() === 'tamaño' || attribute.name.toLowerCase() === 'tamano') {\n                  if (a.toLowerCase() === 'familiar') return -1;\n                  if (b.toLowerCase() === 'familiar') return 1;\n                }\n                return 0;\n              }).map(option => /*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"attribute-option\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"radio\",\n                  name: attribute.name,\n                  value: option,\n                  checked: selectedAttributes[attribute.name] === option,\n                  onChange: () => handleAttributeChange(attribute.name, option)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 883,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"option-label\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"option-check\",\n                    children: /*#__PURE__*/_jsxDEV(Check, {\n                      size: 16\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 892,\n                      columnNumber: 31\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 891,\n                    columnNumber: 29\n                  }, this), option]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 890,\n                  columnNumber: 27\n                }, this)]\n              }, option, true, {\n                fileName: _jsxFileName,\n                lineNumber: 882,\n                columnNumber: 25\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 871,\n              columnNumber: 21\n            }, this)]\n          }, attribute.id || attribute.name, true, {\n            fileName: _jsxFileName,\n            lineNumber: 866,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 864,\n          columnNumber: 15\n        }, this), productAddons.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"customization-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Opciones adicionales\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 907,\n            columnNumber: 17\n          }, this), productAddons.map((addon, index) => {\n            var _addon$pricing, _addon$pricing2;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"addon-field\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"addon-label\",\n                children: [addon.label || addon.title || addon.name || 'Campo adicional', addon.required && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"required\",\n                  children: \"*\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 912,\n                  columnNumber: 42\n                }, this), ((_addon$pricing = addon.pricing) === null || _addon$pricing === void 0 ? void 0 : _addon$pricing.enabled) && ((_addon$pricing2 = addon.pricing) === null || _addon$pricing2 === void 0 ? void 0 : _addon$pricing2.amount) > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"addon-price\",\n                  children: addon.pricing.type === 'quantity_based' ? ` (+${formatPrice(addon.pricing.amount)} por unidad)` : ` (+${formatPrice(addon.pricing.amount)})`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 914,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 910,\n                columnNumber: 21\n              }, this), addon.description && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"addon-description\",\n                children: addon.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 923,\n                columnNumber: 23\n              }, this), renderAddonField(addon)]\n            }, addon.id || addon.name || index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 909,\n              columnNumber: 19\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 906,\n          columnNumber: 15\n        }, this), selectedVariation && (selectedVariation.stock_status === 'outofstock' || selectedVariation.stock_quantity && selectedVariation.stock_quantity < 10) && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"variation-info\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"variation-details\",\n            children: selectedVariation.stock_status === 'outofstock' ? /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"out-of-stock\",\n              children: \"\\u26A0\\uFE0F Producto agotado\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 937,\n              columnNumber: 21\n            }, this) : selectedVariation.stock_quantity && selectedVariation.stock_quantity < 10 ? /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"low-stock\",\n              children: [\"\\u26A1 \\xDAltimas \", selectedVariation.stock_quantity, \" unidades\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 939,\n              columnNumber: 21\n            }, this) : null\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 935,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 934,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"customization-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Instrucciones especiales (opcional)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 947,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"section-description\",\n            children: \"\\xBFAlguna preferencia especial?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 948,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            className: \"special-instructions\",\n            value: specialInstructions,\n            onChange: e => setSpecialInstructions(e.target.value),\n            placeholder: \"Ej: Sin cebolla, extra queso, etc.\",\n            rows: 3\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 951,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 946,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"quantity-price-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"quantity-selector\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \"Cantidad\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 963,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"quantity-controls\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setQuantity(Math.max(1, quantity - 1)),\n                disabled: quantity <= 1,\n                children: /*#__PURE__*/_jsxDEV(Minus, {\n                  size: 20\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 969,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 965,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"quantity-value\",\n                children: quantity\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 971,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setQuantity(quantity + 1),\n                disabled: (selectedVariation === null || selectedVariation === void 0 ? void 0 : selectedVariation.stock_status) === 'outofstock',\n                children: /*#__PURE__*/_jsxDEV(Plus, {\n                  size: 20\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 976,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 972,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 964,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 962,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"price-info\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \"Total\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 982,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"total-price\",\n              children: formatPrice(totalPrice)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 983,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 981,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 961,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `add-to-cart-button ${addingToCart ? 'loading' : ''}`,\n          onClick: handleAddToCart,\n          disabled: addingToCart || (selectedVariation === null || selectedVariation === void 0 ? void 0 : selectedVariation.stock_status) === 'outofstock',\n          children: addingToCart ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Loader, {\n              className: \"button-spinner\",\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 995,\n              columnNumber: 19\n            }, this), \"Agregando...\"]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(ShoppingCart, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1000,\n              columnNumber: 19\n            }, this), \"Agregar al Carrito\"]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 988,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 805,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 804,\n    columnNumber: 5\n  }, this);\n};\n_s(CustomizationModal, \"4XaR/Sq9+ME7045Ck6oUWYvYuN0=\");\n_c = CustomizationModal;\nexport default CustomizationModal;\nvar _c;\n$RefreshReg$(_c, \"CustomizationModal\");","map":{"version":3,"names":["React","useState","useContext","useEffect","X","Plus","Minus","Info","Check","Loader","Pizza","Upload","ShoppingCart","CartContext","woocommerceApi","jsxDEV","_jsxDEV","Fragment","_Fragment","CustomizationModal","product","isOpen","onClose","_s","addToCart","variations","setVariations","attributes","setAttributes","loading","setLoading","error","setError","productAddons","setProductAddons","addonValues","setAddonValues","addonFiles","setAddonFiles","selectedAttributes","setSelectedAttributes","selectedVariation","setSelectedVariation","quantity","setQuantity","specialInstructions","setSpecialInstructions","totalPrice","setTotalPrice","addingToCart","setAddingToCart","resetForm","loadProductData","updatePrice","console","log","meta_data","Object","keys","type","variationsData","getProductVariations","id","variableAttributes","filter","attr","variation","highestPriceVariation","reduce","prev","current","prevPrice","parseFloat","price","currentPrice","defaultAttributes","forEach","varAttr","productAttr","find","name","toLowerCase","option","options","length","familiarOption","opt","basePrice","loadProductAddons","err","fieldGroupData","meta","key","value","groupIds","Array","isArray","groups","possibleFieldKeys","fieldsData","fields","initializeAddonValues","apiUrl","response","fetch","status","ok","data","json","values","field_groups","items","addons","product_fields","firstKey","label","field","title","required","pricing","statusText","defaultValues","fieldId","field_id","min","undefined","_field$options","choices","defaultChoice","choice","selected","handleAttributeChange","attributeName","newAttributes","findMatchingVariation","matching","every","normalizedAttrName","replace","selectedValue","normalizedOption","normalizedSelected","addonPrice","calculateAddonPrice","handleAddonChange","handleFileUpload","file","addonTotal","addon","_addon$options","_addon$options2","enabled","amount","price_type","_addon$options3","isSelected","includes","pricing_amount","optionPrice","pricing_type","formatPrice","Intl","NumberFormat","style","currency","minimumFractionDigits","maximumFractionDigits","format","isValidSelection","stock_status","handleAddToCart","_selectedVariation$im","_product$images","_product$images$","addonMetaData","_addon$options4","_addon$options5","priceType","_addon$options6","push","join","display","cartItem","Date","now","productId","variationId","image","src","images","customizations","trim","variationDetails","addonsPrice","setTimeout","renderAddonField","_addon$options7","_addon$options8","_addon$options9","onChange","e","target","placeholder","maxLength","max","className","fileName","_jsxFileName","lineNumber","columnNumber","rows","step","selectOptions","children","map","index","radioOptions","checked","checkboxOptions","optionValue","currentValues","v","files","accept","allowed_types","size","max_size","min_date","max_date","true_label","onClick","stopPropagation","alt","short_description","dangerouslySetInnerHTML","__html","description","attribute","sort","a","b","_addon$pricing","_addon$pricing2","stock_quantity","Math","disabled","_c","$RefreshReg$"],"sources":["/Users/franciscalabra/Desktop/escandalosos/src/components/CustomizationModal/CustomizationModal.jsx"],"sourcesContent":["// src/components/CustomizationModal/CustomizationModal.jsx\nimport React, { useState, useContext, useEffect } from 'react';\nimport { X, Plus, Minus, Info, Check, Loader, Pizza, Upload, ShoppingCart } from 'lucide-react';\nimport { CartContext } from '../../context/CartContext';\nimport woocommerceApi from '../../services/woocommerceApi';\nimport './CustomizationModal.css';\n\nconst CustomizationModal = ({ product, isOpen, onClose }) => {\n  const { addToCart } = useContext(CartContext);\n  \n  // Estados para datos de WooCommerce\n  const [variations, setVariations] = useState([]);\n  const [attributes, setAttributes] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  \n  // Estados para Advanced Product Fields\n  const [productAddons, setProductAddons] = useState([]);\n  const [addonValues, setAddonValues] = useState({});\n  const [addonFiles, setAddonFiles] = useState({});\n  \n  // Estados de selección\n  const [selectedAttributes, setSelectedAttributes] = useState({});\n  const [selectedVariation, setSelectedVariation] = useState(null);\n  const [quantity, setQuantity] = useState(1);\n  const [specialInstructions, setSpecialInstructions] = useState('');\n  const [totalPrice, setTotalPrice] = useState(0);\n  const [addingToCart, setAddingToCart] = useState(false);\n\n  // Reset estados cuando se abre el modal\n  useEffect(() => {\n    if (isOpen && product) {\n      resetForm();\n      loadProductData();\n    }\n  }, [isOpen, product]);\n\n  // Actualizar precio cuando cambia la selección\n  useEffect(() => {\n    updatePrice();\n  }, [selectedVariation, quantity, product, addonValues]);\n\n  const resetForm = () => {\n    setSelectedAttributes({});\n    setSelectedVariation(null);\n    setQuantity(1);\n    setSpecialInstructions('');\n    setProductAddons([]);\n    setAddonValues({});\n    setAddonFiles({});\n    setError(null);\n  };\n\n  const loadProductData = async () => {\n    setLoading(true);\n    setError(null);\n    \n    try {\n      // Debugging: Ver toda la estructura del producto\n      console.log('=== PRODUCTO COMPLETO ===');\n      console.log(product);\n      console.log('=== META DATA ===');\n      console.log(product.meta_data);\n      console.log('=== TODAS LAS PROPIEDADES ===');\n      console.log(Object.keys(product));\n      \n      // Si es un producto variable, cargar variaciones\n      if (product.type === 'variable') {\n        const variationsData = await woocommerceApi.getProductVariations(product.id);\n        setVariations(variationsData || []);\n        \n        // Extraer atributos del producto\n        if (product.attributes) {\n          const variableAttributes = product.attributes.filter(attr => attr.variation);\n          setAttributes(variableAttributes);\n          \n          // Buscar la variación con el precio más alto\n          const highestPriceVariation = variationsData.reduce((prev, current) => {\n            const prevPrice = parseFloat(prev.price) || 0;\n            const currentPrice = parseFloat(current.price) || 0;\n            return currentPrice > prevPrice ? current : prev;\n          }, variationsData[0]);\n\n          // Establecer valores por defecto basados en la variación de mayor precio\n          const defaultAttributes = {};\n          if (highestPriceVariation && highestPriceVariation.attributes) {\n            highestPriceVariation.attributes.forEach(varAttr => {\n              // Encontrar el atributo correspondiente en los atributos del producto\n              const productAttr = variableAttributes.find(attr => \n                attr.name === varAttr.name || \n                attr.name.toLowerCase() === varAttr.name.toLowerCase()\n              );\n              \n              if (productAttr) {\n                defaultAttributes[productAttr.name] = varAttr.option;\n              }\n            });\n          } else {\n            // Fallback: si no encontramos la variación de mayor precio\n            variableAttributes.forEach(attr => {\n              if (attr.options && attr.options.length > 0) {\n                // Si el atributo es \"Tamaño\", buscar \"Familiar\" primero\n                if (attr.name.toLowerCase() === 'tamaño' || attr.name.toLowerCase() === 'tamano') {\n                  const familiarOption = attr.options.find(opt => \n                    opt.toLowerCase() === 'familiar'\n                  );\n                  defaultAttributes[attr.name] = familiarOption || attr.options[0];\n                } else {\n                  defaultAttributes[attr.name] = attr.options[0];\n                }\n              }\n            });\n          }\n          \n          setSelectedAttributes(defaultAttributes);\n          \n          // Establecer directamente la variación de mayor precio\n          setSelectedVariation(highestPriceVariation);\n          \n          // También actualizar el precio inmediatamente\n          if (highestPriceVariation) {\n            const basePrice = parseFloat(highestPriceVariation.price);\n            setTotalPrice(basePrice * quantity);\n          }\n        }\n      } else {\n        // Para productos simples, establecer el precio directamente\n        setTotalPrice(parseFloat(product.price) * quantity);\n      }\n\n      // Cargar Advanced Product Fields si existen\n      await loadProductAddons();\n      \n    } catch (err) {\n      console.error('Error loading product data:', err);\n      setError('Error al cargar las opciones del producto. Por favor, intenta de nuevo.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadProductAddons = async () => {\n    console.log('=== BUSCANDO ADDONS ===');\n    \n    // Verificar si el producto tiene campos adicionales del plugin Advanced Product Fields\n    if (product.meta_data) {\n      console.log('Meta data encontrada:', product.meta_data);\n      \n      // Buscar el campo _wapf_fieldgroup\n      const fieldGroupData = product.meta_data.find(meta => meta.key === '_wapf_fieldgroup');\n      \n      if (fieldGroupData && fieldGroupData.value) {\n        console.log('Field group data encontrada:', fieldGroupData.value);\n        \n        // El valor puede ser un ID de grupo o un array de IDs\n        let groupIds = [];\n        if (Array.isArray(fieldGroupData.value)) {\n          groupIds = fieldGroupData.value;\n        } else if (typeof fieldGroupData.value === 'object' && fieldGroupData.value.groups) {\n          groupIds = fieldGroupData.value.groups;\n        } else if (typeof fieldGroupData.value === 'string' || typeof fieldGroupData.value === 'number') {\n          groupIds = [fieldGroupData.value];\n        }\n        \n        console.log('Group IDs:', groupIds);\n        \n        // Si tenemos IDs de grupos, necesitamos obtener los campos de esos grupos\n        // Para esto necesitamos hacer una petición adicional o el plugin debe exponer los campos\n        \n        // Por ahora, vamos a buscar si hay campos directamente en el producto\n        // El plugin también puede guardar los campos compilados en otro meta field\n        const possibleFieldKeys = [\n          '_wapf_fields',\n          '_wapf_field_groups_fields',\n          'wapf_fields',\n          '_product_addons'\n        ];\n        \n        for (const key of possibleFieldKeys) {\n          const fieldsData = product.meta_data.find(meta => meta.key === key);\n          if (fieldsData && fieldsData.value) {\n            console.log(`Campos encontrados con key \"${key}\":`, fieldsData.value);\n            const fields = Array.isArray(fieldsData.value) ? fieldsData.value : [fieldsData.value];\n            setProductAddons(fields);\n            initializeAddonValues(fields);\n            return;\n          }\n        }\n        \n        // Si no encontramos los campos compilados, intentamos obtenerlos via API personalizada\n        if (groupIds.length > 0 || true) { // Siempre intentar con la API personalizada\n          console.log('Intentando obtener campos del producto via API...');\n          console.log('ID del producto:', product.id);\n          \n          try {\n            // Construir la URL completa\n            const apiUrl = `https://escandalosospizzas.cl/wp/wp-json/custom/v1/product-fields/${product.id}`;\n            console.log('URL de la API:', apiUrl);\n            \n            const response = await fetch(apiUrl);\n            console.log('Status de respuesta:', response.status);\n            \n            if (response.ok) {\n              const data = await response.json();\n              console.log('Respuesta completa de la API:', data);\n              console.log('Tipo de respuesta:', typeof data);\n              console.log('Es array?:', Array.isArray(data));\n              console.log('Claves del objeto:', Object.keys(data));\n              console.log('Valores del objeto:', Object.values(data));\n              \n              // Intentar diferentes estructuras de respuesta\n              let fields = null;\n              \n              // ESTRUCTURA ESPECÍFICA DE WAPF (Advanced Product Fields)\n              if (data && data.field_groups && data.field_groups.fields) {\n                console.log('Campos encontrados en field_groups.fields');\n                fields = data.field_groups.fields;\n              }\n              // Si la respuesta es un array directo\n              else if (Array.isArray(data)) {\n                fields = data;\n              }\n              // Si los campos están en data.fields\n              else if (data && data.fields && Array.isArray(data.fields)) {\n                fields = data.fields;\n              }\n              // Si los campos están en data.data\n              else if (data && data.data) {\n                fields = data.data;\n              }\n              // Si la respuesta tiene una propiedad items\n              else if (data && data.items) {\n                fields = data.items;\n              }\n              // Si la respuesta tiene una propiedad addons\n              else if (data && data.addons) {\n                fields = data.addons;\n              }\n              // Si la respuesta tiene una propiedad product_fields\n              else if (data && data.product_fields) {\n                fields = data.product_fields;\n              }\n              // Si la respuesta es un objeto con campos como propiedades\n              else if (data && typeof data === 'object' && !Array.isArray(data)) {\n                // Buscar cualquier propiedad que sea un array\n                const keys = Object.keys(data);\n                for (const key of keys) {\n                  if (Array.isArray(data[key])) {\n                    console.log(`Encontrado array de campos en la propiedad: ${key}`);\n                    fields = data[key];\n                    break;\n                  }\n                }\n                \n                // Si no encontramos arrays, tal vez los campos están directamente en el objeto\n                if (!fields && keys.length > 0) {\n                  // Verificar si el objeto tiene estructura de campo\n                  const firstKey = keys[0];\n                  if (data[firstKey] && (data[firstKey].type || data[firstKey].label || data[firstKey].name)) {\n                    // Convertir el objeto en array\n                    fields = Object.values(data);\n                  }\n                }\n              }\n              \n              if (fields) {\n                console.log('Campos encontrados y procesados:', fields);\n                // Log de cada campo para debug\n                fields.forEach(field => {\n                  console.log('Campo individual:', {\n                    id: field.id,\n                    label: field.label,\n                    title: field.title,\n                    name: field.name,\n                    type: field.type,\n                    required: field.required,\n                    pricing: field.pricing,\n                    options: field.options\n                  });\n                });\n                setProductAddons(fields);\n                initializeAddonValues(fields);\n                return;\n              } else {\n                console.log('No se pudieron extraer campos de la respuesta');\n              }\n            } else {\n              console.log('La API devolvió un error:', response.status, response.statusText);\n            }\n          } catch (error) {\n            console.log('Error obteniendo campos via API:', error);\n          }\n        }\n      }\n    }\n    \n    // Si no encontramos campos via meta_data, verificar si están directamente en el producto\n    if (product.product_fields) {\n      console.log('Campos encontrados en product.product_fields:', product.product_fields);\n      setProductAddons(product.product_fields);\n      initializeAddonValues(product.product_fields);\n    } else if (product.addons) {\n      console.log('Campos encontrados en product.addons:', product.addons);\n      setProductAddons(product.addons);\n      initializeAddonValues(product.addons);\n    }\n    \n    console.log('=== ESTADO FINAL DE ADDONS ===');\n    console.log('productAddons establecidos:', productAddons);\n  };\n\n  const initializeAddonValues = (fields) => {\n    const defaultValues = {};\n    fields.forEach(field => {\n      const fieldId = field.id || field.name || field.field_id;\n      \n      if (field.type === 'checkbox' || field.type === 'checkboxes' || field.type === 'multiple_choice') {\n        defaultValues[fieldId] = [];\n      } else if (field.type === 'number' && field.min !== undefined) {\n        defaultValues[fieldId] = field.min;\n      } else if (field.type === 'true_false') {\n        defaultValues[fieldId] = false;\n      } else if (field.type === 'radio' || field.type === 'radiobutton') {\n        // Para radio buttons, buscar si hay una opción seleccionada por defecto\n        const choices = field.options?.choices || field.options || [];\n        const defaultChoice = choices.find(choice => choice.selected === true);\n        defaultValues[fieldId] = defaultChoice ? (defaultChoice.label || defaultChoice.value) : '';\n      } else {\n        defaultValues[fieldId] = '';\n      }\n    });\n    console.log('Valores iniciales de addons:', defaultValues);\n    setAddonValues(defaultValues);\n  };\n\n  const handleAttributeChange = (attributeName, value) => {\n    const newAttributes = {\n      ...selectedAttributes,\n      [attributeName]: value\n    };\n    setSelectedAttributes(newAttributes);\n    \n    // Buscar variación que coincida con los atributos seleccionados\n    findMatchingVariation(newAttributes);\n  };\n\n  const findMatchingVariation = (attributes) => {\n    if (!variations || variations.length === 0) return;\n    \n    const matching = variations.find(variation => {\n      return variation.attributes.every(attr => {\n        // Normalizar nombres de atributos\n        const normalizedAttrName = attr.name.toLowerCase().replace(/-/g, ' ');\n        const selectedValue = attributes[attr.name] || attributes[normalizedAttrName];\n        \n        // Comparar valores normalizados también\n        const normalizedOption = attr.option.toLowerCase();\n        const normalizedSelected = selectedValue?.toLowerCase();\n        \n        return normalizedOption === normalizedSelected || selectedValue == attr.option;\n      });\n    });\n    \n    setSelectedVariation(matching || null);\n    \n    // Si encontramos la variación, actualizamos el precio inmediatamente\n    if (matching) {\n      const basePrice = parseFloat(matching.price);\n      const addonPrice = calculateAddonPrice();\n      setTotalPrice((basePrice + addonPrice) * quantity);\n    }\n  };\n\n  const handleAddonChange = (fieldId, value) => {\n    setAddonValues(prev => ({\n      ...prev,\n      [fieldId]: value\n    }));\n  };\n\n  const handleFileUpload = (fieldId, file) => {\n    if (file) {\n      setAddonFiles(prev => ({\n        ...prev,\n        [fieldId]: file\n      }));\n      setAddonValues(prev => ({\n        ...prev,\n        [fieldId]: file.name\n      }));\n    }\n  };\n\n  const calculateAddonPrice = () => {\n    let addonTotal = 0;\n    \n    productAddons.forEach(addon => {\n      const fieldId = addon.id || addon.name;\n      const value = addonValues[fieldId];\n      \n      if (!value || (Array.isArray(value) && value.length === 0)) return;\n      \n      // Para WAPF, el precio puede estar en addon.pricing\n      if (addon.pricing && addon.pricing.enabled && addon.pricing.amount) {\n        if (addon.pricing.type === 'fixed') {\n          addonTotal += parseFloat(addon.pricing.amount);\n        } else if (addon.pricing.type === 'quantity_based') {\n          addonTotal += parseFloat(addon.pricing.amount) * quantity;\n        }\n      }\n      \n      // Precio fijo tradicional\n      else if (addon.price_type === 'flat_fee' && addon.price) {\n        addonTotal += parseFloat(addon.price);\n      }\n      \n      // Precio basado en cantidad\n      else if (addon.price_type === 'quantity_based' && addon.price) {\n        addonTotal += parseFloat(addon.price) * quantity;\n      }\n      \n      // Precio por carácter (para campos de texto)\n      else if (addon.price_type === 'per_char' && addon.price && typeof value === 'string') {\n        addonTotal += parseFloat(addon.price) * value.length;\n      }\n      \n      // Para campos con opciones (radio, select, checkbox)\n      else if ((addon.options?.choices || addon.options) && Array.isArray(addon.options?.choices || addon.options)) {\n        const options = addon.options?.choices || addon.options;\n        options.forEach(option => {\n          const isSelected = Array.isArray(value) \n            ? value.includes(option.label || option.value)\n            : value === (option.label || option.value);\n            \n          if (isSelected && (option.pricing_amount || option.price)) {\n            const optionPrice = option.pricing_amount || option.price;\n            if (option.pricing_type === 'quantity_based' || option.price_type === 'quantity_based') {\n              addonTotal += parseFloat(optionPrice) * quantity;\n            } else {\n              addonTotal += parseFloat(optionPrice);\n            }\n          }\n        });\n      }\n    });\n    \n    return addonTotal;\n  };\n\n  const updatePrice = () => {\n    let basePrice = 0;\n    \n    if (selectedVariation && selectedVariation.price) {\n      basePrice = parseFloat(selectedVariation.price);\n    } else if (product && product.price) {\n      basePrice = parseFloat(product.price);\n    }\n    \n    const addonPrice = calculateAddonPrice();\n    setTotalPrice((basePrice + addonPrice) * quantity);\n  };\n\n  const formatPrice = (price) => {\n    return new Intl.NumberFormat('es-CL', {\n      style: 'currency',\n      currency: 'CLP',\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 0,\n    }).format(price);\n  };\n\n  const isValidSelection = () => {\n    if (product.type === 'variable') {\n      // Para productos variables, verificar que se haya seleccionado una variación válida\n      if (!selectedVariation || selectedVariation.stock_status === 'outofstock') {\n        return false;\n      }\n    }\n    \n    // Validar campos requeridos de Advanced Product Fields\n    for (const addon of productAddons) {\n      if (addon.required) {\n        const fieldId = addon.id || addon.name;\n        const value = addonValues[fieldId];\n        \n        if (!value || (Array.isArray(value) && value.length === 0)) {\n          setError(`Por favor, completa el campo: ${addon.title || addon.name}`);\n          return false;\n        }\n      }\n    }\n    \n    return true;\n  };\n\n  const handleAddToCart = async () => {\n    if (!isValidSelection()) {\n      if (!error) {\n        setError('Por favor, selecciona todas las opciones requeridas');\n      }\n      return;\n    }\n\n    setAddingToCart(true);\n\n    try {\n      // Preparar meta_data para Advanced Product Fields\n      const addonMetaData = [];\n      \n      productAddons.forEach(addon => {\n        const fieldId = addon.id || addon.name;\n        const value = addonValues[fieldId];\n        \n        if (value && !(Array.isArray(value) && value.length === 0)) {\n          // Calcular el precio del addon\n          let addonPrice = 0;\n          let priceType = 'flat_fee';\n          \n          // Para WAPF, el precio puede estar en addon.pricing\n          if (addon.pricing && addon.pricing.enabled && addon.pricing.amount) {\n            addonPrice = parseFloat(addon.pricing.amount);\n            priceType = addon.pricing.type || 'fixed';\n          }\n          // Precio tradicional\n          else if (addon.price) {\n            addonPrice = parseFloat(addon.price);\n            priceType = addon.price_type || 'flat_fee';\n          }\n          \n          // Para campos con opciones, buscar el precio de la opción seleccionada\n          if ((addon.options?.choices || addon.options) && Array.isArray(addon.options?.choices || addon.options)) {\n            const options = addon.options?.choices || addon.options;\n            options.forEach(option => {\n              const isSelected = Array.isArray(value) \n                ? value.includes(option.label || option.value)\n                : value === (option.label || option.value);\n                \n              if (isSelected && (option.pricing_amount || option.price)) {\n                addonPrice = parseFloat(option.pricing_amount || option.price);\n                priceType = option.pricing_type || option.price_type || 'flat_fee';\n              }\n            });\n          }\n          \n          // Agregar el campo a meta_data\n          addonMetaData.push({\n            key: addon.name || addon.title,\n            value: Array.isArray(value) ? value.join(', ') : value,\n            display: addon.title || addon.name,\n            price: addonPrice,\n            price_type: priceType\n          });\n        }\n      });\n\n      const cartItem = {\n        id: selectedVariation ? `${product.id}-${selectedVariation.id}-${Date.now()}` : `${product.id}-${Date.now()}`,\n        productId: product.id,\n        variationId: selectedVariation?.id,\n        name: product.name,\n        price: totalPrice / quantity, // Precio unitario incluyendo addons\n        image: selectedVariation?.image?.src || product.images?.[0]?.src || '',\n        quantity,\n        customizations: {\n          attributes: selectedAttributes,\n          specialInstructions: specialInstructions.trim(),\n          variationDetails: selectedVariation ? {\n            name: selectedVariation.name,\n            attributes: selectedVariation.attributes\n          } : null,\n          // Agregar datos de Advanced Product Fields\n          productAddons: addonMetaData,\n          addonValues: addonValues,\n          addonFiles: Object.keys(addonFiles).length > 0 ? addonFiles : null,\n          // Agregar el precio total de los addons\n          addonsPrice: calculateAddonPrice()\n        }\n      };\n\n      addToCart(cartItem);\n      \n      // Mostrar mensaje de éxito\n      setTimeout(() => {\n        onClose();\n        resetForm();\n      }, 500);\n      \n    } catch (err) {\n      setError('Error al agregar al carrito. Por favor, intenta de nuevo.');\n    } finally {\n      setAddingToCart(false);\n    }\n  };\n\n  const renderAddonField = (addon) => {\n    const fieldId = addon.id || addon.name;\n    const value = addonValues[fieldId] || '';\n    \n    switch (addon.type) {\n      case 'text':\n      case 'custom_text':\n        return (\n          <input\n            type=\"text\"\n            value={value}\n            onChange={(e) => handleAddonChange(fieldId, e.target.value)}\n            placeholder={addon.placeholder || ''}\n            maxLength={addon.max || undefined}\n            className=\"addon-text-input\"\n            required={addon.required}\n          />\n        );\n        \n      case 'textarea':\n      case 'custom_textarea':\n        return (\n          <textarea\n            value={value}\n            onChange={(e) => handleAddonChange(fieldId, e.target.value)}\n            placeholder={addon.placeholder || ''}\n            maxLength={addon.max || undefined}\n            rows={4}\n            className=\"addon-textarea\"\n            required={addon.required}\n          />\n        );\n        \n      case 'number':\n        return (\n          <input\n            type=\"number\"\n            value={value}\n            onChange={(e) => handleAddonChange(fieldId, parseFloat(e.target.value) || 0)}\n            min={addon.min || undefined}\n            max={addon.max || undefined}\n            step={addon.step || 1}\n            className=\"addon-number-input\"\n            required={addon.required}\n          />\n        );\n        \n      case 'email':\n        return (\n          <input\n            type=\"email\"\n            value={value}\n            onChange={(e) => handleAddonChange(fieldId, e.target.value)}\n            placeholder={addon.placeholder || 'email@ejemplo.com'}\n            className=\"addon-email-input\"\n            required={addon.required}\n          />\n        );\n        \n      case 'select':\n      case 'dropdown':\n        const selectOptions = addon.options?.choices || addon.options || [];\n        return (\n          <select\n            value={value}\n            onChange={(e) => handleAddonChange(fieldId, e.target.value)}\n            className=\"addon-select\"\n            required={addon.required}\n          >\n            <option value=\"\">Selecciona una opción</option>\n            {selectOptions.map((option, index) => (\n              <option key={index} value={option.label || option.value}>\n                {option.label || option.value}\n                {(option.pricing_amount && option.pricing_amount > 0) && ` (+${formatPrice(option.pricing_amount)})`}\n              </option>\n            ))}\n          </select>\n        );\n        \n      case 'radio':\n      case 'radiobutton':\n        // Obtener las opciones correctamente según la estructura de WAPF\n        const radioOptions = addon.options?.choices || addon.options || [];\n        return (\n          <div className=\"addon-radio-group\">\n            {radioOptions.map((option, index) => (\n              <label key={index} className=\"addon-radio-option\">\n                <input\n                  type=\"radio\"\n                  name={fieldId}\n                  value={option.label || option.value}\n                  checked={value === (option.label || option.value)}\n                  onChange={(e) => handleAddonChange(fieldId, e.target.value)}\n                  required={addon.required}\n                />\n                <span className=\"radio-label\">\n                  {option.label || option.value}\n                  {(option.pricing_amount && option.pricing_amount > 0) && ` (+${formatPrice(option.pricing_amount)})`}\n                </span>\n              </label>\n            ))}\n          </div>\n        );\n        \n      case 'checkbox':\n      case 'checkboxes':\n      case 'multiple_choice':\n        const checkboxOptions = addon.options?.choices || addon.options || [];\n        return (\n          <div className=\"addon-checkbox-group\">\n            {checkboxOptions.map((option, index) => (\n              <label key={index} className=\"addon-checkbox-option\">\n                <input\n                  type=\"checkbox\"\n                  value={option.label || option.value}\n                  checked={Array.isArray(value) && value.includes(option.label || option.value)}\n                  onChange={(e) => {\n                    const optionValue = option.label || option.value;\n                    const currentValues = Array.isArray(value) ? value : [];\n                    \n                    if (e.target.checked) {\n                      handleAddonChange(fieldId, [...currentValues, optionValue]);\n                    } else {\n                      handleAddonChange(fieldId, currentValues.filter(v => v !== optionValue));\n                    }\n                  }}\n                />\n                <span className=\"checkbox-label\">\n                  {option.label || option.value}\n                  {(option.pricing_amount && option.pricing_amount > 0) && ` (+${formatPrice(option.pricing_amount)})`}\n                </span>\n              </label>\n            ))}\n          </div>\n        );\n        \n      case 'file':\n      case 'file_upload':\n        return (\n          <div className=\"addon-file-upload\">\n            <label className=\"file-upload-label\">\n              <input\n                type=\"file\"\n                onChange={(e) => handleFileUpload(fieldId, e.target.files[0])}\n                accept={addon.allowed_types || '*'}\n                required={addon.required}\n                className=\"file-input\"\n              />\n              <span className=\"file-upload-button\">\n                <Upload size={16} />\n                {addonFiles[fieldId] ? addonFiles[fieldId].name : 'Seleccionar archivo'}\n              </span>\n            </label>\n            {addon.max_size && (\n              <p className=\"file-size-info\">\n                Tamaño máximo: {addon.max_size}MB\n              </p>\n            )}\n          </div>\n        );\n        \n      case 'color':\n        return (\n          <input\n            type=\"color\"\n            value={value || '#000000'}\n            onChange={(e) => handleAddonChange(fieldId, e.target.value)}\n            className=\"addon-color-input\"\n            required={addon.required}\n          />\n        );\n        \n      case 'date':\n        return (\n          <input\n            type=\"date\"\n            value={value}\n            onChange={(e) => handleAddonChange(fieldId, e.target.value)}\n            min={addon.min_date || undefined}\n            max={addon.max_date || undefined}\n            className=\"addon-date-input\"\n            required={addon.required}\n          />\n        );\n        \n      case 'true_false':\n        return (\n          <label className=\"addon-checkbox-option\">\n            <input\n              type=\"checkbox\"\n              checked={value === true}\n              onChange={(e) => handleAddonChange(fieldId, e.target.checked)}\n              required={addon.required}\n            />\n            <span className=\"checkbox-label\">\n              {addon.true_label || 'Sí'}\n            </span>\n          </label>\n        );\n        \n      default:\n        console.log(`Tipo de campo no reconocido: ${addon.type}`);\n        return null;\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"customization-modal-overlay\" onClick={onClose}>\n      <div className=\"customization-modal\" onClick={(e) => e.stopPropagation()}>\n        <button className=\"modal-close\" onClick={onClose}>\n          <X size={24} />\n        </button>\n        \n        <h2>Personalizar Pedido</h2>\n        \n        {loading ? (\n          <div className=\"loading-container\">\n            <Loader className=\"loading-spinner\" size={48} />\n            <p>Cargando opciones...</p>\n          </div>\n        ) : error ? (\n          <div className=\"error-container\">\n            <p className=\"error-message\">{error}</p>\n            <button onClick={loadProductData} className=\"retry-button\">\n              Reintentar\n            </button>\n          </div>\n        ) : (\n          <>\n            {/* Información del producto */}\n            <div className=\"customization-product-info\">\n              {product.images && product.images[0] ? (\n                <img \n                  src={product.images[0].src} \n                  alt={product.name} \n                  className=\"customization-product-image\"\n                />\n              ) : (\n                <div className=\"customization-product-image placeholder\">\n                  <Pizza size={48} />\n                </div>\n              )}\n              <div className=\"product-details\">\n                <h3>{product.name}</h3>\n                {/* Mostrar descripción corta si está disponible */}\n                {product.short_description && (\n                  <p className=\"product-description\" \n                     dangerouslySetInnerHTML={{ __html: product.short_description }} />\n                )}\n                {/* Si no hay descripción corta, mostrar la descripción normal completa */}\n                {!product.short_description && product.description && (\n                  <p className=\"product-description\" \n                     dangerouslySetInnerHTML={{ __html: product.description }} />\n                )}\n                {/* Mostrar precio actual */}\n                <div className=\"header-price\">\n                  <span className=\"price-label\">Precio: </span>\n                  <span className=\"price-value\">{formatPrice(totalPrice / quantity)}</span>\n                  {selectedVariation && selectedVariation.attributes && (\n                    <span className=\"price-variant\"> - {selectedVariation.attributes.map(attr => attr.option).join(', ')}</span>\n                  )}\n                </div>\n              </div>\n            </div>\n\n            {/* Atributos de variación */}\n            {attributes.length > 0 && (\n              <div className=\"customization-section\">\n                {attributes.map(attribute => (\n                  <div key={attribute.id || attribute.name} className=\"attribute-section\">\n                    <h4>{attribute.name}</h4>\n                    {attribute.description && (\n                      <p className=\"section-description\">{attribute.description}</p>\n                    )}\n                    <div className=\"attribute-options\">\n                      {attribute.options\n                        .sort((a, b) => {\n                          // Si es el atributo de tamaño, ordenar para que Familiar aparezca primero\n                          if (attribute.name.toLowerCase() === 'tamaño' || attribute.name.toLowerCase() === 'tamano') {\n                            if (a.toLowerCase() === 'familiar') return -1;\n                            if (b.toLowerCase() === 'familiar') return 1;\n                          }\n                          return 0;\n                        })\n                        .map(option => (\n                        <label key={option} className=\"attribute-option\">\n                          <input\n                            type=\"radio\"\n                            name={attribute.name}\n                            value={option}\n                            checked={selectedAttributes[attribute.name] === option}\n                            onChange={() => handleAttributeChange(attribute.name, option)}\n                          />\n                          <span className=\"option-label\">\n                            <span className=\"option-check\">\n                              <Check size={16} />\n                            </span>\n                            {option}\n                          </span>\n                        </label>\n                      ))}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n\n            {/* Advanced Product Fields */}\n            {productAddons.length > 0 && (\n              <div className=\"customization-section\">\n                <h4>Opciones adicionales</h4>\n                {productAddons.map((addon, index) => (\n                  <div key={addon.id || addon.name || index} className=\"addon-field\">\n                    <label className=\"addon-label\">\n                      {addon.label || addon.title || addon.name || 'Campo adicional'}\n                      {addon.required && <span className=\"required\">*</span>}\n                      {(addon.pricing?.enabled && addon.pricing?.amount > 0) && (\n                        <span className=\"addon-price\">\n                          {addon.pricing.type === 'quantity_based' \n                            ? ` (+${formatPrice(addon.pricing.amount)} por unidad)`\n                            : ` (+${formatPrice(addon.pricing.amount)})`\n                          }\n                        </span>\n                      )}\n                    </label>\n                    {addon.description && (\n                      <p className=\"addon-description\">{addon.description}</p>\n                    )}\n                    {renderAddonField(addon)}\n                  </div>\n                ))}\n              </div>\n            )}\n\n            {/* Mostrar información de la variación seleccionada */}\n            {selectedVariation && (selectedVariation.stock_status === 'outofstock' || \n              (selectedVariation.stock_quantity && selectedVariation.stock_quantity < 10)) && (\n              <div className=\"variation-info\">\n                <div className=\"variation-details\">\n                  {selectedVariation.stock_status === 'outofstock' ? (\n                    <p className=\"out-of-stock\">⚠️ Producto agotado</p>\n                  ) : selectedVariation.stock_quantity && selectedVariation.stock_quantity < 10 ? (\n                    <p className=\"low-stock\">⚡ Últimas {selectedVariation.stock_quantity} unidades</p>\n                  ) : null}\n                </div>\n              </div>\n            )}\n\n            {/* Instrucciones especiales */}\n            <div className=\"customization-section\">\n              <h4>Instrucciones especiales (opcional)</h4>\n              <p className=\"section-description\">\n                ¿Alguna preferencia especial?\n              </p>\n              <textarea\n                className=\"special-instructions\"\n                value={specialInstructions}\n                onChange={(e) => setSpecialInstructions(e.target.value)}\n                placeholder=\"Ej: Sin cebolla, extra queso, etc.\"\n                rows={3}\n              />\n            </div>\n\n            {/* Cantidad y precio */}\n            <div className=\"quantity-price-section\">\n              <div className=\"quantity-selector\">\n                <h4>Cantidad</h4>\n                <div className=\"quantity-controls\">\n                  <button \n                    onClick={() => setQuantity(Math.max(1, quantity - 1))}\n                    disabled={quantity <= 1}\n                  >\n                    <Minus size={20} />\n                  </button>\n                  <span className=\"quantity-value\">{quantity}</span>\n                  <button \n                    onClick={() => setQuantity(quantity + 1)}\n                    disabled={selectedVariation?.stock_status === 'outofstock'}\n                  >\n                    <Plus size={20} />\n                  </button>\n                </div>\n              </div>\n              \n              <div className=\"price-info\">\n                <h4>Total</h4>\n                <p className=\"total-price\">{formatPrice(totalPrice)}</p>\n              </div>\n            </div>\n\n            {/* Botón agregar al carrito */}\n            <button \n              className={`add-to-cart-button ${addingToCart ? 'loading' : ''}`}\n              onClick={handleAddToCart}\n              disabled={addingToCart || (selectedVariation?.stock_status === 'outofstock')}\n            >\n              {addingToCart ? (\n                <>\n                  <Loader className=\"button-spinner\" size={20} />\n                  Agregando...\n                </>\n              ) : (\n                <>\n                  <ShoppingCart size={20} />\n                  Agregar al Carrito\n                </>\n              )}\n            </button>\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default CustomizationModal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}