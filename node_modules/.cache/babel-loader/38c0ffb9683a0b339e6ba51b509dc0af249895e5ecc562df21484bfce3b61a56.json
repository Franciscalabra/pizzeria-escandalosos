{"ast":null,"code":"var _jsxFileName = \"/Users/franciscalabra/Desktop/escandalosos/src/components/ComboModal/ComboModal.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useContext, useEffect, useRef } from 'react';\nimport { X, Plus, Minus, Loader, Pizza, Check, ShoppingCart, ChevronRight, ChevronLeft, Package } from 'lucide-react';\nimport { CartContext } from '../../context/CartContext';\nimport woocommerceApi from '../../services/woocommerceApi';\nimport escandalososApi from '../../services/escandalososApi';\nimport './ComboModal.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ComboModal = ({\n  product,\n  isOpen,\n  onClose\n}) => {\n  _s();\n  const {\n    addToCart\n  } = useContext(CartContext);\n  const modalRef = useRef(null);\n\n  // Estados principales\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [comboConfig, setComboConfig] = useState(null);\n  const [availableProducts, setAvailableProducts] = useState({});\n  const [selectedProducts, setSelectedProducts] = useState({});\n  const [quantity, setQuantity] = useState(1);\n  const [addingToCart, setAddingToCart] = useState(false);\n  const [currentStep, setCurrentStep] = useState(0);\n  const [animationClass, setAnimationClass] = useState('');\n\n  // Reset estados cuando se abre el modal\n  useEffect(() => {\n    if (isOpen && product) {\n      resetForm();\n      loadComboData();\n      // Prevenir scroll del body\n      document.body.style.overflow = 'hidden';\n    } else {\n      document.body.style.overflow = '';\n    }\n    return () => {\n      document.body.style.overflow = '';\n    };\n  }, [isOpen, product]);\n\n  // Manejo de teclas (ESC para cerrar)\n  useEffect(() => {\n    const handleEsc = e => {\n      if (e.key === 'Escape' && isOpen) {\n        onClose();\n      }\n    };\n    window.addEventListener('keydown', handleEsc);\n    return () => window.removeEventListener('keydown', handleEsc);\n  }, [isOpen, onClose]);\n  const resetForm = () => {\n    setSelectedProducts({});\n    setQuantity(1);\n    setError(null);\n    setCurrentStep(0);\n    setAnimationClass('');\n  };\n  const loadComboData = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      // Obtener configuración del plugin Escandalosos\n      const escandalososConfig = await escandalososApi.getConfig();\n\n      // Verificar si el producto es un combo\n      const productConfig = escandalososConfig.products[product.id];\n      if (!productConfig || !productConfig.is_combo) {\n        throw new Error('Este producto no está configurado como combo');\n      }\n      setComboConfig(productConfig.combo_config);\n\n      // Cargar productos para cada categoría del combo\n      const productsToLoad = {};\n      for (const [categoryId, config] of Object.entries(productConfig.combo_config)) {\n        try {\n          // Obtener productos de la categoría\n          const categoryProducts = await woocommerceApi.getProducts({\n            category: categoryId,\n            status: 'publish',\n            per_page: 100\n          });\n          productsToLoad[categoryId] = categoryProducts.filter(p => p.id !== product.id &&\n          // Excluir el combo actual\n          p.status === 'publish' && p.catalog_visibility !== 'hidden');\n        } catch (err) {\n          console.error(`Error cargando productos de categoría ${categoryId}:`, err);\n          productsToLoad[categoryId] = [];\n        }\n      }\n      setAvailableProducts(productsToLoad);\n      initializeSelections(productConfig.combo_config);\n    } catch (error) {\n      console.error('Error cargando datos del combo:', error);\n      setError('Error al cargar las opciones del combo. Por favor, intenta nuevamente.');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const initializeSelections = comboConfig => {\n    const initialSelections = {};\n    Object.entries(comboConfig).forEach(([categoryId, config]) => {\n      initialSelections[categoryId] = [];\n    });\n    setSelectedProducts(initialSelections);\n  };\n  const handleProductToggle = (categoryId, productId) => {\n    const category = comboConfig[categoryId];\n    const currentSelections = selectedProducts[categoryId] || [];\n    if (currentSelections.includes(productId)) {\n      // Deseleccionar el producto\n      setSelectedProducts(prev => ({\n        ...prev,\n        [categoryId]: currentSelections.filter(id => id !== productId)\n      }));\n    } else {\n      // Seleccionar el producto\n      if (category.maxSelection === 1) {\n        // Si solo se permite una selección, reemplazar\n        setSelectedProducts(prev => ({\n          ...prev,\n          [categoryId]: [productId]\n        }));\n      } else {\n        // Para múltiples selecciones\n        if (currentSelections.length < category.maxSelection) {\n          setSelectedProducts(prev => ({\n            ...prev,\n            [categoryId]: [...currentSelections, productId]\n          }));\n        }\n      }\n    }\n  };\n  const isStepComplete = categoryId => {\n    const category = comboConfig[categoryId];\n    const selections = selectedProducts[categoryId] || [];\n    return selections.length >= category.minSelection;\n  };\n  const canProceed = () => {\n    const categoryIds = Object.keys(comboConfig);\n\n    // Si estamos en el último paso de categorías, verificar si podemos ir al resumen\n    if (currentStep === categoryIds.length - 1) {\n      const currentCategoryId = categoryIds[currentStep];\n      return isStepComplete(currentCategoryId) && canAddToCart();\n    }\n\n    // Para otros pasos, solo verificar si el paso actual está completo\n    if (currentStep < categoryIds.length) {\n      const currentCategoryId = categoryIds[currentStep];\n      return isStepComplete(currentCategoryId);\n    }\n    return false;\n  };\n  const canAddToCart = () => {\n    return Object.entries(comboConfig).every(([categoryId, config]) => {\n      const selections = selectedProducts[categoryId] || [];\n      return selections.length >= config.minSelection;\n    });\n  };\n  const handleNextStep = () => {\n    const categoryIds = Object.keys(comboConfig);\n    if (currentStep < categoryIds.length - 1) {\n      // Avanzar al siguiente paso de categoría\n      setAnimationClass('fade-exit-active');\n      setTimeout(() => {\n        setCurrentStep(currentStep + 1);\n        setAnimationClass('fade-enter-active');\n      }, 200);\n    } else if (currentStep === categoryIds.length - 1) {\n      // Ir al paso final de resumen\n      setAnimationClass('fade-exit-active');\n      setTimeout(() => {\n        setCurrentStep(categoryIds.length);\n        setAnimationClass('fade-enter-active');\n      }, 200);\n    }\n  };\n  const handlePreviousStep = () => {\n    if (currentStep > 0) {\n      setAnimationClass('fade-exit-active');\n      setTimeout(() => {\n        setCurrentStep(currentStep - 1);\n        setAnimationClass('fade-enter-active');\n      }, 200);\n    }\n  };\n  const handleStepClick = index => {\n    if (index <= currentStep || index > 0 && isStepComplete(Object.keys(comboConfig)[index - 1])) {\n      setAnimationClass('fade-exit-active');\n      setTimeout(() => {\n        setCurrentStep(index);\n        setAnimationClass('fade-enter-active');\n      }, 200);\n    }\n  };\n  const calculateTotalPrice = () => {\n    const basePrice = parseFloat(product.price) || 0;\n    return basePrice * quantity;\n  };\n  const formatPrice = price => {\n    return new Intl.NumberFormat('es-CL', {\n      style: 'currency',\n      currency: 'CLP',\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 0\n    }).format(price);\n  };\n  const handleAddToCart = async () => {\n    if (!canAddToCart()) return;\n    setAddingToCart(true);\n    try {\n      var _product$images, _product$images$, _modalRef$current;\n      // Preparar información del combo\n      const comboInfo = {\n        selections: {}\n      };\n\n      // Mapear productos seleccionados con sus nombres\n      for (const [categoryId, productIds] of Object.entries(selectedProducts)) {\n        const categoryProducts = availableProducts[categoryId] || [];\n        comboInfo.selections[categoryId] = productIds.map(id => {\n          const product = categoryProducts.find(p => p.id === id);\n          return {\n            id,\n            name: (product === null || product === void 0 ? void 0 : product.name) || 'Producto'\n          };\n        });\n      }\n\n      // Crear el item del carrito con la estructura esperada por CheckoutPage\n      const cartItem = {\n        // Usar un ID único para el item del carrito\n        id: `${product.id}-combo-${Date.now()}`,\n        // IMPORTANTE: Agregar productId que es lo que espera CheckoutPage\n        productId: product.id,\n        // Mantener el resto de la información\n        name: product.name,\n        price: parseFloat(product.price),\n        quantity: quantity,\n        image: ((_product$images = product.images) === null || _product$images === void 0 ? void 0 : (_product$images$ = _product$images[0]) === null || _product$images$ === void 0 ? void 0 : _product$images$.src) || null,\n        // Agregar customizations en el formato esperado\n        customizations: {\n          type: 'combo',\n          comboSelections: comboInfo.selections,\n          comboConfig: comboConfig,\n          // Agregar información adicional para el pedido\n          specialInstructions: '',\n          // Por si se necesita después\n          productAddons: [] // Por compatibilidad con el checkout\n        }\n      };\n\n      // Agregar al carrito\n      await addToCart(cartItem);\n\n      // Cerrar modal con animación\n      (_modalRef$current = modalRef.current) === null || _modalRef$current === void 0 ? void 0 : _modalRef$current.classList.add('closing');\n      setTimeout(() => {\n        onClose();\n      }, 300);\n    } catch (error) {\n      console.error('Error al agregar al carrito:', error);\n      setError('Error al agregar el combo al carrito');\n    } finally {\n      setAddingToCart(false);\n    }\n  };\n  const renderProgressSteps = () => {\n    if (!comboConfig) return null;\n    const categoryIds = Object.keys(comboConfig);\n    const isLastStep = currentStep >= categoryIds.length;\n    if (isLastStep) return null; // No mostrar en el paso final\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"progress-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"progress-steps\",\n        children: categoryIds.map((categoryId, index) => {\n          const category = comboConfig[categoryId];\n          const isActive = index === currentStep;\n          const isCompleted = isStepComplete(categoryId) && index < currentStep;\n          const isClickable = index <= currentStep || index > 0 && isStepComplete(categoryIds[index - 1]);\n          return /*#__PURE__*/_jsxDEV(React.Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: `progress-step ${isActive ? 'active' : ''} ${isCompleted ? 'completed' : ''}`,\n              onClick: () => isClickable && handleStepClick(index),\n              style: {\n                cursor: isClickable ? 'pointer' : 'default'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"step-indicator\",\n                children: isCompleted ? /*#__PURE__*/_jsxDEV(Check, {\n                  size: 20\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 321,\n                  columnNumber: 36\n                }, this) : index + 1\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 320,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"step-label\",\n                children: category.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 323,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 17\n            }, this), index < categoryIds.length - 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `step-connector ${isCompleted ? 'completed' : ''}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 326,\n              columnNumber: 19\n            }, this)]\n          }, categoryId, true, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 7\n    }, this);\n  };\n  const renderCategoryProducts = () => {\n    if (!comboConfig) return null;\n    const categoryIds = Object.keys(comboConfig);\n\n    // Verificar que no estamos en el paso final\n    if (currentStep >= categoryIds.length) return null;\n    const currentCategoryId = categoryIds[currentStep];\n    const currentCategory = comboConfig[currentCategoryId];\n    const products = availableProducts[currentCategoryId] || [];\n    const selections = selectedProducts[currentCategoryId] || [];\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `category-section ${animationClass}`,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"category-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"category-title\",\n          children: currentCategory.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"category-description\",\n          children: [\"Selecciona \", currentCategory.minSelection === currentCategory.maxSelection ? currentCategory.minSelection : `entre ${currentCategory.minSelection} y ${currentCategory.maxSelection}`, currentCategory.minSelection === 1 ? ' opción' : ' opciones']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 11\n        }, this), selections.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"selection-indicator\",\n          children: [/*#__PURE__*/_jsxDEV(Check, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 361,\n            columnNumber: 15\n          }, this), selections.length, \" de \", currentCategory.maxSelection, \" seleccionado\", selections.length !== 1 ? 's' : '']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"products-grid\",\n        children: products.map(prod => {\n          const isSelected = selections.includes(prod.id);\n          const isDisabled = !isSelected && selections.length >= currentCategory.maxSelection;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `product-card ${isSelected ? 'selected' : ''} ${isDisabled ? 'disabled' : ''}`,\n            onClick: () => !isDisabled && handleProductToggle(currentCategoryId, prod.id),\n            tabIndex: 0,\n            role: \"button\",\n            \"aria-pressed\": isSelected,\n            onKeyPress: e => {\n              if ((e.key === 'Enter' || e.key === ' ') && !isDisabled) {\n                handleProductToggle(currentCategoryId, prod.id);\n              }\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"product-image-container\",\n              children: [prod.images && prod.images[0] ? /*#__PURE__*/_jsxDEV(\"img\", {\n                src: prod.images[0].src,\n                alt: prod.name,\n                className: \"product-image\",\n                loading: \"lazy\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 388,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"product-image-placeholder\",\n                children: /*#__PURE__*/_jsxDEV(Pizza, {\n                  size: 40\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 396,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 395,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"selection-badge\",\n                children: /*#__PURE__*/_jsxDEV(Check, {\n                  size: 20\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 400,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 399,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"product-info\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"product-name\",\n                children: prod.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 405,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"product-description\",\n                dangerouslySetInnerHTML: {\n                  __html: prod.short_description || prod.description || ''\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 406,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 404,\n              columnNumber: 17\n            }, this)]\n          }, prod.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 373,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 9\n      }, this), products.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"state-container\",\n        children: [/*#__PURE__*/_jsxDEV(Package, {\n          size: 64,\n          color: \"var(--text-light)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 416,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"state-message\",\n          children: \"No hay productos disponibles en esta categor\\xEDa\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 415,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 7\n    }, this);\n  };\n  const renderFinalStep = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"summary-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"summary-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"summary-title\",\n          children: \"\\xA1Tu combo est\\xE1 listo!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 428,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"summary-price\",\n          children: formatPrice(product.price)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 429,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 427,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"selections-summary\",\n        children: Object.entries(selectedProducts).map(([categoryId, productIds]) => {\n          const category = comboConfig[categoryId];\n          const categoryProducts = availableProducts[categoryId] || [];\n          if (productIds.length === 0) return null;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"selection-category\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"selection-category-name\",\n              children: category.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 441,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"selected-items\",\n              children: productIds.map(id => {\n                const product = categoryProducts.find(p => p.id === id);\n                return /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"selected-item-tag\",\n                  children: (product === null || product === void 0 ? void 0 : product.name) || 'Producto'\n                }, id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 446,\n                  columnNumber: 23\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 442,\n              columnNumber: 17\n            }, this)]\n          }, categoryId, true, {\n            fileName: _jsxFileName,\n            lineNumber: 440,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 432,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"quantity-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"quantity-control\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"quantity-label\",\n            children: \"Cantidad\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 459,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"quantity-selector\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"quantity-button\",\n              onClick: () => setQuantity(Math.max(1, quantity - 1)),\n              disabled: quantity <= 1,\n              \"aria-label\": \"Disminuir cantidad\",\n              children: /*#__PURE__*/_jsxDEV(Minus, {\n                size: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 467,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 461,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"quantity-display\",\n              children: quantity\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 469,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"quantity-button\",\n              onClick: () => setQuantity(quantity + 1),\n              \"aria-label\": \"Aumentar cantidad\",\n              children: /*#__PURE__*/_jsxDEV(Plus, {\n                size: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 475,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 470,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 460,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 458,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"total-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"total-label\",\n            children: \"Total\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 481,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"total-amount\",\n            children: formatPrice(calculateTotalPrice())\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 482,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 480,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 457,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 426,\n      columnNumber: 7\n    }, this);\n  };\n  if (!isOpen) return null;\n  const categoryIds = Object.keys(comboConfig || {});\n  const isLastStep = currentStep >= categoryIds.length;\n  const isOnCategoryStep = currentStep < categoryIds.length;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"combo-modal-overlay\",\n    onClick: onClose,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: modalRef,\n      className: \"combo-modal\",\n      onClick: e => e.stopPropagation(),\n      role: \"dialog\",\n      \"aria-modal\": \"true\",\n      \"aria-labelledby\": \"combo-modal-title\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-handle\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 505,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"modal-close\",\n        onClick: onClose,\n        \"aria-label\": \"Cerrar modal\",\n        children: /*#__PURE__*/_jsxDEV(X, {\n          size: 24\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 512,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 507,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"combo-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          id: \"combo-modal-title\",\n          className: \"combo-title\",\n          children: isLastStep ? 'Confirma tu pedido' : 'Arma tu combo perfecto'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 516,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"combo-subtitle\",\n          children: isLastStep ? 'Revisa tu selección y agrega al carrito' : `Personaliza tu ${(product === null || product === void 0 ? void 0 : product.name) || 'combo'} paso a paso`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 519,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 515,\n        columnNumber: 9\n      }, this), renderProgressSteps(), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"state-container\",\n        children: [/*#__PURE__*/_jsxDEV(Loader, {\n          className: \"loading-spinner\",\n          size: 48\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 530,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"state-message\",\n          children: \"Cargando opciones del combo...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 531,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 529,\n        columnNumber: 11\n      }, this) : error ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"state-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"error-message\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 535,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: loadComboData,\n          className: \"retry-button\",\n          children: \"Reintentar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 536,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 534,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"combo-content\",\n          children: isOnCategoryStep ? renderCategoryProducts() : renderFinalStep()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 542,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-footer\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"nav-button secondary\",\n            onClick: handlePreviousStep,\n            disabled: currentStep === 0,\n            children: [/*#__PURE__*/_jsxDEV(ChevronLeft, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 552,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Anterior\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 553,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 547,\n            columnNumber: 15\n          }, this), isOnCategoryStep ? /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"nav-button primary\",\n            onClick: handleNextStep,\n            disabled: !canProceed(),\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Siguiente\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 562,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(ChevronRight, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 563,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 557,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"add-to-cart-button\",\n            onClick: handleAddToCart,\n            disabled: addingToCart || !canAddToCart(),\n            children: addingToCart ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Loader, {\n                className: \"loading-spinner\",\n                size: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 573,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Agregando...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 574,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(ShoppingCart, {\n                size: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 578,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Agregar al Carrito\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 579,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 566,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 546,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 497,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 496,\n    columnNumber: 5\n  }, this);\n};\n_s(ComboModal, \"aAO5ZuSet555gwXPfO7t72zDEaA=\");\n_c = ComboModal;\nexport default ComboModal;\nvar _c;\n$RefreshReg$(_c, \"ComboModal\");","map":{"version":3,"names":["React","useState","useContext","useEffect","useRef","X","Plus","Minus","Loader","Pizza","Check","ShoppingCart","ChevronRight","ChevronLeft","Package","CartContext","woocommerceApi","escandalososApi","jsxDEV","_jsxDEV","Fragment","_Fragment","ComboModal","product","isOpen","onClose","_s","addToCart","modalRef","loading","setLoading","error","setError","comboConfig","setComboConfig","availableProducts","setAvailableProducts","selectedProducts","setSelectedProducts","quantity","setQuantity","addingToCart","setAddingToCart","currentStep","setCurrentStep","animationClass","setAnimationClass","resetForm","loadComboData","document","body","style","overflow","handleEsc","e","key","window","addEventListener","removeEventListener","escandalososConfig","getConfig","productConfig","products","id","is_combo","Error","combo_config","productsToLoad","categoryId","config","Object","entries","categoryProducts","getProducts","category","status","per_page","filter","p","catalog_visibility","err","console","initializeSelections","initialSelections","forEach","handleProductToggle","productId","currentSelections","includes","prev","maxSelection","length","isStepComplete","selections","minSelection","canProceed","categoryIds","keys","currentCategoryId","canAddToCart","every","handleNextStep","setTimeout","handlePreviousStep","handleStepClick","index","calculateTotalPrice","basePrice","parseFloat","price","formatPrice","Intl","NumberFormat","currency","minimumFractionDigits","maximumFractionDigits","format","handleAddToCart","_product$images","_product$images$","_modalRef$current","comboInfo","productIds","map","find","name","cartItem","Date","now","image","images","src","customizations","type","comboSelections","specialInstructions","productAddons","current","classList","add","renderProgressSteps","isLastStep","className","children","isActive","isCompleted","isClickable","onClick","cursor","size","fileName","_jsxFileName","lineNumber","columnNumber","renderCategoryProducts","currentCategory","prod","isSelected","isDisabled","tabIndex","role","onKeyPress","alt","dangerouslySetInnerHTML","__html","short_description","description","color","renderFinalStep","Math","max","disabled","isOnCategoryStep","ref","stopPropagation","_c","$RefreshReg$"],"sources":["/Users/franciscalabra/Desktop/escandalosos/src/components/ComboModal/ComboModal.jsx"],"sourcesContent":["import React, { useState, useContext, useEffect, useRef } from 'react';\nimport { X, Plus, Minus, Loader, Pizza, Check, ShoppingCart, ChevronRight, ChevronLeft, Package } from 'lucide-react';\nimport { CartContext } from '../../context/CartContext';\nimport woocommerceApi from '../../services/woocommerceApi';\nimport escandalososApi from '../../services/escandalososApi';\nimport './ComboModal.css';\n\nconst ComboModal = ({ product, isOpen, onClose }) => {\n  const { addToCart } = useContext(CartContext);\n  const modalRef = useRef(null);\n  \n  // Estados principales\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [comboConfig, setComboConfig] = useState(null);\n  const [availableProducts, setAvailableProducts] = useState({});\n  const [selectedProducts, setSelectedProducts] = useState({});\n  const [quantity, setQuantity] = useState(1);\n  const [addingToCart, setAddingToCart] = useState(false);\n  const [currentStep, setCurrentStep] = useState(0);\n  const [animationClass, setAnimationClass] = useState('');\n\n  // Reset estados cuando se abre el modal\n  useEffect(() => {\n    if (isOpen && product) {\n      resetForm();\n      loadComboData();\n      // Prevenir scroll del body\n      document.body.style.overflow = 'hidden';\n    } else {\n      document.body.style.overflow = '';\n    }\n    \n    return () => {\n      document.body.style.overflow = '';\n    };\n  }, [isOpen, product]);\n\n  // Manejo de teclas (ESC para cerrar)\n  useEffect(() => {\n    const handleEsc = (e) => {\n      if (e.key === 'Escape' && isOpen) {\n        onClose();\n      }\n    };\n    \n    window.addEventListener('keydown', handleEsc);\n    return () => window.removeEventListener('keydown', handleEsc);\n  }, [isOpen, onClose]);\n\n  const resetForm = () => {\n    setSelectedProducts({});\n    setQuantity(1);\n    setError(null);\n    setCurrentStep(0);\n    setAnimationClass('');\n  };\n\n  const loadComboData = async () => {\n    setLoading(true);\n    setError(null);\n    \n    try {\n      // Obtener configuración del plugin Escandalosos\n      const escandalososConfig = await escandalososApi.getConfig();\n      \n      // Verificar si el producto es un combo\n      const productConfig = escandalososConfig.products[product.id];\n      if (!productConfig || !productConfig.is_combo) {\n        throw new Error('Este producto no está configurado como combo');\n      }\n      \n      setComboConfig(productConfig.combo_config);\n      \n      // Cargar productos para cada categoría del combo\n      const productsToLoad = {};\n      \n      for (const [categoryId, config] of Object.entries(productConfig.combo_config)) {\n        try {\n          // Obtener productos de la categoría\n          const categoryProducts = await woocommerceApi.getProducts({\n            category: categoryId,\n            status: 'publish',\n            per_page: 100\n          });\n          \n          productsToLoad[categoryId] = categoryProducts.filter(p => \n            p.id !== product.id && // Excluir el combo actual\n            p.status === 'publish' &&\n            p.catalog_visibility !== 'hidden'\n          );\n        } catch (err) {\n          console.error(`Error cargando productos de categoría ${categoryId}:`, err);\n          productsToLoad[categoryId] = [];\n        }\n      }\n      \n      setAvailableProducts(productsToLoad);\n      initializeSelections(productConfig.combo_config);\n      \n    } catch (error) {\n      console.error('Error cargando datos del combo:', error);\n      setError('Error al cargar las opciones del combo. Por favor, intenta nuevamente.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const initializeSelections = (comboConfig) => {\n    const initialSelections = {};\n    \n    Object.entries(comboConfig).forEach(([categoryId, config]) => {\n      initialSelections[categoryId] = [];\n    });\n    \n    setSelectedProducts(initialSelections);\n  };\n\n  const handleProductToggle = (categoryId, productId) => {\n    const category = comboConfig[categoryId];\n    const currentSelections = selectedProducts[categoryId] || [];\n    \n    if (currentSelections.includes(productId)) {\n      // Deseleccionar el producto\n      setSelectedProducts(prev => ({\n        ...prev,\n        [categoryId]: currentSelections.filter(id => id !== productId)\n      }));\n    } else {\n      // Seleccionar el producto\n      if (category.maxSelection === 1) {\n        // Si solo se permite una selección, reemplazar\n        setSelectedProducts(prev => ({\n          ...prev,\n          [categoryId]: [productId]\n        }));\n      } else {\n        // Para múltiples selecciones\n        if (currentSelections.length < category.maxSelection) {\n          setSelectedProducts(prev => ({\n            ...prev,\n            [categoryId]: [...currentSelections, productId]\n          }));\n        }\n      }\n    }\n  };\n\n  const isStepComplete = (categoryId) => {\n    const category = comboConfig[categoryId];\n    const selections = selectedProducts[categoryId] || [];\n    return selections.length >= category.minSelection;\n  };\n\n  const canProceed = () => {\n    const categoryIds = Object.keys(comboConfig);\n    \n    // Si estamos en el último paso de categorías, verificar si podemos ir al resumen\n    if (currentStep === categoryIds.length - 1) {\n      const currentCategoryId = categoryIds[currentStep];\n      return isStepComplete(currentCategoryId) && canAddToCart();\n    }\n    \n    // Para otros pasos, solo verificar si el paso actual está completo\n    if (currentStep < categoryIds.length) {\n      const currentCategoryId = categoryIds[currentStep];\n      return isStepComplete(currentCategoryId);\n    }\n    \n    return false;\n  };\n\n  const canAddToCart = () => {\n    return Object.entries(comboConfig).every(([categoryId, config]) => {\n      const selections = selectedProducts[categoryId] || [];\n      return selections.length >= config.minSelection;\n    });\n  };\n\n  const handleNextStep = () => {\n    const categoryIds = Object.keys(comboConfig);\n    \n    if (currentStep < categoryIds.length - 1) {\n      // Avanzar al siguiente paso de categoría\n      setAnimationClass('fade-exit-active');\n      setTimeout(() => {\n        setCurrentStep(currentStep + 1);\n        setAnimationClass('fade-enter-active');\n      }, 200);\n    } else if (currentStep === categoryIds.length - 1) {\n      // Ir al paso final de resumen\n      setAnimationClass('fade-exit-active');\n      setTimeout(() => {\n        setCurrentStep(categoryIds.length);\n        setAnimationClass('fade-enter-active');\n      }, 200);\n    }\n  };\n\n  const handlePreviousStep = () => {\n    if (currentStep > 0) {\n      setAnimationClass('fade-exit-active');\n      setTimeout(() => {\n        setCurrentStep(currentStep - 1);\n        setAnimationClass('fade-enter-active');\n      }, 200);\n    }\n  };\n\n  const handleStepClick = (index) => {\n    if (index <= currentStep || (index > 0 && isStepComplete(Object.keys(comboConfig)[index - 1]))) {\n      setAnimationClass('fade-exit-active');\n      setTimeout(() => {\n        setCurrentStep(index);\n        setAnimationClass('fade-enter-active');\n      }, 200);\n    }\n  };\n\n  const calculateTotalPrice = () => {\n    const basePrice = parseFloat(product.price) || 0;\n    return basePrice * quantity;\n  };\n\n  const formatPrice = (price) => {\n    return new Intl.NumberFormat('es-CL', {\n      style: 'currency',\n      currency: 'CLP',\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 0\n    }).format(price);\n  };\n\n  const handleAddToCart = async () => {\n    if (!canAddToCart()) return;\n    \n    setAddingToCart(true);\n    \n    try {\n      // Preparar información del combo\n      const comboInfo = {\n        selections: {}\n      };\n      \n      // Mapear productos seleccionados con sus nombres\n      for (const [categoryId, productIds] of Object.entries(selectedProducts)) {\n        const categoryProducts = availableProducts[categoryId] || [];\n        comboInfo.selections[categoryId] = productIds.map(id => {\n          const product = categoryProducts.find(p => p.id === id);\n          return {\n            id,\n            name: product?.name || 'Producto'\n          };\n        });\n      }\n      \n      // Crear el item del carrito con la estructura esperada por CheckoutPage\n      const cartItem = {\n        // Usar un ID único para el item del carrito\n        id: `${product.id}-combo-${Date.now()}`,\n        // IMPORTANTE: Agregar productId que es lo que espera CheckoutPage\n        productId: product.id,\n        // Mantener el resto de la información\n        name: product.name,\n        price: parseFloat(product.price),\n        quantity: quantity,\n        image: product.images?.[0]?.src || null,\n        // Agregar customizations en el formato esperado\n        customizations: {\n          type: 'combo',\n          comboSelections: comboInfo.selections,\n          comboConfig: comboConfig,\n          // Agregar información adicional para el pedido\n          specialInstructions: '', // Por si se necesita después\n          productAddons: [] // Por compatibilidad con el checkout\n        }\n      };\n      \n      // Agregar al carrito\n      await addToCart(cartItem);\n      \n      // Cerrar modal con animación\n      modalRef.current?.classList.add('closing');\n      setTimeout(() => {\n        onClose();\n      }, 300);\n      \n    } catch (error) {\n      console.error('Error al agregar al carrito:', error);\n      setError('Error al agregar el combo al carrito');\n    } finally {\n      setAddingToCart(false);\n    }\n  };\n\n  const renderProgressSteps = () => {\n    if (!comboConfig) return null;\n    \n    const categoryIds = Object.keys(comboConfig);\n    const isLastStep = currentStep >= categoryIds.length;\n    \n    if (isLastStep) return null; // No mostrar en el paso final\n    \n    return (\n      <div className=\"progress-container\">\n        <div className=\"progress-steps\">\n          {categoryIds.map((categoryId, index) => {\n            const category = comboConfig[categoryId];\n            const isActive = index === currentStep;\n            const isCompleted = isStepComplete(categoryId) && index < currentStep;\n            const isClickable = index <= currentStep || (index > 0 && isStepComplete(categoryIds[index - 1]));\n            \n            return (\n              <React.Fragment key={categoryId}>\n                <div \n                  className={`progress-step ${isActive ? 'active' : ''} ${isCompleted ? 'completed' : ''}`}\n                  onClick={() => isClickable && handleStepClick(index)}\n                  style={{ cursor: isClickable ? 'pointer' : 'default' }}\n                >\n                  <div className=\"step-indicator\">\n                    {isCompleted ? <Check size={20} /> : index + 1}\n                  </div>\n                  <span className=\"step-label\">{category.name}</span>\n                </div>\n                {index < categoryIds.length - 1 && (\n                  <div className={`step-connector ${isCompleted ? 'completed' : ''}`} />\n                )}\n              </React.Fragment>\n            );\n          })}\n        </div>\n      </div>\n    );\n  };\n\n  const renderCategoryProducts = () => {\n    if (!comboConfig) return null;\n    \n    const categoryIds = Object.keys(comboConfig);\n    \n    // Verificar que no estamos en el paso final\n    if (currentStep >= categoryIds.length) return null;\n    \n    const currentCategoryId = categoryIds[currentStep];\n    const currentCategory = comboConfig[currentCategoryId];\n    const products = availableProducts[currentCategoryId] || [];\n    const selections = selectedProducts[currentCategoryId] || [];\n    \n    return (\n      <div className={`category-section ${animationClass}`}>\n        <div className=\"category-header\">\n          <h3 className=\"category-title\">{currentCategory.name}</h3>\n          <p className=\"category-description\">\n            Selecciona {currentCategory.minSelection === currentCategory.maxSelection \n              ? currentCategory.minSelection \n              : `entre ${currentCategory.minSelection} y ${currentCategory.maxSelection}`} \n            {currentCategory.minSelection === 1 ? ' opción' : ' opciones'}\n          </p>\n          {selections.length > 0 && (\n            <div className=\"selection-indicator\">\n              <Check size={16} />\n              {selections.length} de {currentCategory.maxSelection} seleccionado{selections.length !== 1 ? 's' : ''}\n            </div>\n          )}\n        </div>\n        \n        <div className=\"products-grid\">\n          {products.map(prod => {\n            const isSelected = selections.includes(prod.id);\n            const isDisabled = !isSelected && selections.length >= currentCategory.maxSelection;\n            \n            return (\n              <div\n                key={prod.id}\n                className={`product-card ${isSelected ? 'selected' : ''} ${isDisabled ? 'disabled' : ''}`}\n                onClick={() => !isDisabled && handleProductToggle(currentCategoryId, prod.id)}\n                tabIndex={0}\n                role=\"button\"\n                aria-pressed={isSelected}\n                onKeyPress={(e) => {\n                  if ((e.key === 'Enter' || e.key === ' ') && !isDisabled) {\n                    handleProductToggle(currentCategoryId, prod.id);\n                  }\n                }}\n              >\n                <div className=\"product-image-container\">\n                  {prod.images && prod.images[0] ? (\n                    <img \n                      src={prod.images[0].src} \n                      alt={prod.name}\n                      className=\"product-image\"\n                      loading=\"lazy\"\n                    />\n                  ) : (\n                    <div className=\"product-image-placeholder\">\n                      <Pizza size={40} />\n                    </div>\n                  )}\n                  <div className=\"selection-badge\">\n                    <Check size={20} />\n                  </div>\n                </div>\n                \n                <div className=\"product-info\">\n                  <h4 className=\"product-name\">{prod.name}</h4>\n                  <p className=\"product-description\" \n                     dangerouslySetInnerHTML={{ __html: prod.short_description || prod.description || '' }} />\n                </div>\n              </div>\n            );\n          })}\n        </div>\n        \n        {products.length === 0 && (\n          <div className=\"state-container\">\n            <Package size={64} color=\"var(--text-light)\" />\n            <p className=\"state-message\">No hay productos disponibles en esta categoría</p>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  const renderFinalStep = () => {\n    return (\n      <div className=\"summary-section\">\n        <div className=\"summary-header\">\n          <h3 className=\"summary-title\">¡Tu combo está listo!</h3>\n          <p className=\"summary-price\">{formatPrice(product.price)}</p>\n        </div>\n\n        <div className=\"selections-summary\">\n          {Object.entries(selectedProducts).map(([categoryId, productIds]) => {\n            const category = comboConfig[categoryId];\n            const categoryProducts = availableProducts[categoryId] || [];\n            \n            if (productIds.length === 0) return null;\n            \n            return (\n              <div key={categoryId} className=\"selection-category\">\n                <h4 className=\"selection-category-name\">{category.name}</h4>\n                <div className=\"selected-items\">\n                  {productIds.map(id => {\n                    const product = categoryProducts.find(p => p.id === id);\n                    return (\n                      <span key={id} className=\"selected-item-tag\">\n                        {product?.name || 'Producto'}\n                      </span>\n                    );\n                  })}\n                </div>\n              </div>\n            );\n          })}\n        </div>\n\n        <div className=\"quantity-section\">\n          <div className=\"quantity-control\">\n            <span className=\"quantity-label\">Cantidad</span>\n            <div className=\"quantity-selector\">\n              <button \n                className=\"quantity-button\"\n                onClick={() => setQuantity(Math.max(1, quantity - 1))}\n                disabled={quantity <= 1}\n                aria-label=\"Disminuir cantidad\"\n              >\n                <Minus size={20} />\n              </button>\n              <span className=\"quantity-display\">{quantity}</span>\n              <button \n                className=\"quantity-button\"\n                onClick={() => setQuantity(quantity + 1)}\n                aria-label=\"Aumentar cantidad\"\n              >\n                <Plus size={20} />\n              </button>\n            </div>\n          </div>\n          \n          <div className=\"total-section\">\n            <p className=\"total-label\">Total</p>\n            <p className=\"total-amount\">{formatPrice(calculateTotalPrice())}</p>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  if (!isOpen) return null;\n\n  const categoryIds = Object.keys(comboConfig || {});\n  const isLastStep = currentStep >= categoryIds.length;\n  const isOnCategoryStep = currentStep < categoryIds.length;\n\n  return (\n    <div className=\"combo-modal-overlay\" onClick={onClose}>\n      <div \n        ref={modalRef}\n        className=\"combo-modal\" \n        onClick={(e) => e.stopPropagation()}\n        role=\"dialog\"\n        aria-modal=\"true\"\n        aria-labelledby=\"combo-modal-title\"\n      >\n        <div className=\"modal-handle\" />\n        \n        <button \n          className=\"modal-close\" \n          onClick={onClose}\n          aria-label=\"Cerrar modal\"\n        >\n          <X size={24} />\n        </button>\n        \n        <div className=\"combo-header\">\n          <h2 id=\"combo-modal-title\" className=\"combo-title\">\n            {isLastStep ? 'Confirma tu pedido' : 'Arma tu combo perfecto'}\n          </h2>\n          <p className=\"combo-subtitle\">\n            {isLastStep \n              ? 'Revisa tu selección y agrega al carrito' \n              : `Personaliza tu ${product?.name || 'combo'} paso a paso`}\n          </p>\n        </div>\n        \n        {renderProgressSteps()}\n        \n        {loading ? (\n          <div className=\"state-container\">\n            <Loader className=\"loading-spinner\" size={48} />\n            <p className=\"state-message\">Cargando opciones del combo...</p>\n          </div>\n        ) : error ? (\n          <div className=\"state-container\">\n            <p className=\"error-message\">{error}</p>\n            <button onClick={loadComboData} className=\"retry-button\">\n              Reintentar\n            </button>\n          </div>\n        ) : (\n          <>\n            <div className=\"combo-content\">\n              {isOnCategoryStep ? renderCategoryProducts() : renderFinalStep()}\n            </div>\n\n            <div className=\"modal-footer\">\n              <button \n                className=\"nav-button secondary\"\n                onClick={handlePreviousStep}\n                disabled={currentStep === 0}\n              >\n                <ChevronLeft size={20} />\n                <span>Anterior</span>\n              </button>\n              \n              {isOnCategoryStep ? (\n                <button \n                  className=\"nav-button primary\"\n                  onClick={handleNextStep}\n                  disabled={!canProceed()}\n                >\n                  <span>Siguiente</span>\n                  <ChevronRight size={20} />\n                </button>\n              ) : (\n                <button \n                  className=\"add-to-cart-button\"\n                  onClick={handleAddToCart}\n                  disabled={addingToCart || !canAddToCart()}\n                >\n                  {addingToCart ? (\n                    <>\n                      <Loader className=\"loading-spinner\" size={20} />\n                      <span>Agregando...</span>\n                    </>\n                  ) : (\n                    <>\n                      <ShoppingCart size={20} />\n                      <span>Agregar al Carrito</span>\n                    </>\n                  )}\n                </button>\n              )}\n            </div>\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ComboModal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}