{"ast":null,"code":"// src/components/ProductCard/ProductCard.jsx\nimport React,{useContext}from'react';import{ShoppingCart,Tag}from'lucide-react';import{CartContext}from'../../context/CartContext';import'./ProductCard.css';import{jsxs as _jsxs,jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";const ProductCard=_ref=>{var _product$images2,_product$images2$,_product$attributes2;let{product,onCustomize}=_ref;const{addToCart}=useContext(CartContext);// Verificar si el producto necesita personalización\nconst needsCustomization=()=>{var _product$categories,_product$attributes;// Producto variable (con variaciones)\nif(product.type==='variable')return true;// Producto agrupado\nif(product.type==='grouped')return true;// Categorías que requieren personalización\nconst customizableCategories=['pizzas','combos','personalizables'];if((_product$categories=product.categories)!==null&&_product$categories!==void 0&&_product$categories.some(cat=>customizableCategories.includes(cat.slug)))return true;// Productos con atributos\nif(((_product$attributes=product.attributes)===null||_product$attributes===void 0?void 0:_product$attributes.length)>0)return true;return false;};const formatPrice=price=>{return new Intl.NumberFormat('es-CL',{style:'currency',currency:'CLP',minimumFractionDigits:0,maximumFractionDigits:0}).format(price);};const handleButtonClick=e=>{e.stopPropagation();if(needsCustomization()){// Si necesita personalización y hay un manejador, usarlo\nif(onCustomize&&typeof onCustomize==='function'){onCustomize(product);}else{// Si no hay manejador, mostrar alerta\nalert('Este producto requiere personalización. Por favor, selecciona las opciones desde el menú.');}}else{var _product$images,_product$images$;// Producto simple, agregar directamente\naddToCart({id:product.id,productId:product.id,name:product.name,price:parseFloat(product.price),image:((_product$images=product.images)===null||_product$images===void 0?void 0:(_product$images$=_product$images[0])===null||_product$images$===void 0?void 0:_product$images$.src)||'',quantity:1});}};const handleCardClick=()=>{// Al hacer clic en la tarjeta, mostrar detalles o personalización\nif(onCustomize&&typeof onCustomize==='function'){onCustomize(product);}};// Para productos variables, mostrar rango de precios\nconst getPriceDisplay=()=>{if(product.type==='variable'&&product.price_range){return/*#__PURE__*/_jsxs(\"span\",{className:\"product-price-range\",children:[formatPrice(product.price_range.min_price),\" - \",formatPrice(product.price_range.max_price)]});}return/*#__PURE__*/_jsxs(_Fragment,{children:[product.on_sale&&product.regular_price&&/*#__PURE__*/_jsx(\"span\",{className:\"product-price-regular\",children:formatPrice(product.regular_price)}),/*#__PURE__*/_jsx(\"span\",{className:\"product-price-sale\",children:formatPrice(product.price)})]});};return/*#__PURE__*/_jsxs(\"div\",{className:\"product-card\",onClick:handleCardClick,children:[product.on_sale&&/*#__PURE__*/_jsxs(\"div\",{className:\"product-badge\",children:[/*#__PURE__*/_jsx(Tag,{size:16}),\"PROMO\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"product-image-container\",children:(_product$images2=product.images)!==null&&_product$images2!==void 0&&(_product$images2$=_product$images2[0])!==null&&_product$images2$!==void 0&&_product$images2$.src?/*#__PURE__*/_jsx(\"img\",{src:product.images[0].src,alt:product.name,className:\"product-image\",loading:\"lazy\"}):/*#__PURE__*/_jsx(\"div\",{className:\"product-image-placeholder\",children:/*#__PURE__*/_jsx(ShoppingCart,{size:48})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-info\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"product-name\",children:product.name}),product.short_description&&/*#__PURE__*/_jsx(\"p\",{className:\"product-description\",dangerouslySetInnerHTML:{__html:product.short_description}}),((_product$attributes2=product.attributes)===null||_product$attributes2===void 0?void 0:_product$attributes2.length)>0&&/*#__PURE__*/_jsx(\"div\",{className:\"product-attributes\",children:product.attributes.map(attr=>/*#__PURE__*/_jsxs(\"span\",{className:\"attribute-badge\",children:[attr.options.length,\" \",attr.name]},attr.id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-footer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"product-price\",children:getPriceDisplay()}),/*#__PURE__*/_jsx(\"button\",{className:\"product-btn\",onClick:handleButtonClick,\"aria-label\":needsCustomization()?'Personalizar producto':'Agregar al carrito',children:needsCustomization()?'Personalizar':'Agregar al carrito'})]})]})]});};export default ProductCard;","map":{"version":3,"names":["React","useContext","ShoppingCart","Tag","CartContext","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","ProductCard","_ref","_product$images2","_product$images2$","_product$attributes2","product","onCustomize","addToCart","needsCustomization","_product$categories","_product$attributes","type","customizableCategories","categories","some","cat","includes","slug","attributes","length","formatPrice","price","Intl","NumberFormat","style","currency","minimumFractionDigits","maximumFractionDigits","format","handleButtonClick","e","stopPropagation","alert","_product$images","_product$images$","id","productId","name","parseFloat","image","images","src","quantity","handleCardClick","getPriceDisplay","price_range","className","children","min_price","max_price","on_sale","regular_price","onClick","size","alt","loading","short_description","dangerouslySetInnerHTML","__html","map","attr","options"],"sources":["/Users/franciscalabra/Desktop/pizzeria-escandalosos/src/components/ProductCard/ProductCard.jsx"],"sourcesContent":["// src/components/ProductCard/ProductCard.jsx\nimport React, { useContext } from 'react';\nimport { ShoppingCart, Tag } from 'lucide-react';\nimport { CartContext } from '../../context/CartContext';\nimport './ProductCard.css';\n\nconst ProductCard = ({ product, onCustomize }) => {\n  const { addToCart } = useContext(CartContext);\n  \n  // Verificar si el producto necesita personalización\n  const needsCustomization = () => {\n    // Producto variable (con variaciones)\n    if (product.type === 'variable') return true;\n    \n    // Producto agrupado\n    if (product.type === 'grouped') return true;\n    \n    // Categorías que requieren personalización\n    const customizableCategories = ['pizzas', 'combos', 'personalizables'];\n    if (product.categories?.some(cat => \n      customizableCategories.includes(cat.slug)\n    )) return true;\n    \n    // Productos con atributos\n    if (product.attributes?.length > 0) return true;\n    \n    return false;\n  };\n\n  const formatPrice = (price) => {\n    return new Intl.NumberFormat('es-CL', {\n      style: 'currency',\n      currency: 'CLP',\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 0,\n    }).format(price);\n  };\n\n  const handleButtonClick = (e) => {\n    e.stopPropagation();\n    \n    if (needsCustomization()) {\n      // Si necesita personalización y hay un manejador, usarlo\n      if (onCustomize && typeof onCustomize === 'function') {\n        onCustomize(product);\n      } else {\n        // Si no hay manejador, mostrar alerta\n        alert('Este producto requiere personalización. Por favor, selecciona las opciones desde el menú.');\n      }\n    } else {\n      // Producto simple, agregar directamente\n      addToCart({\n        id: product.id,\n        productId: product.id,\n        name: product.name,\n        price: parseFloat(product.price),\n        image: product.images?.[0]?.src || '',\n        quantity: 1\n      });\n    }\n  };\n\n  const handleCardClick = () => {\n    // Al hacer clic en la tarjeta, mostrar detalles o personalización\n    if (onCustomize && typeof onCustomize === 'function') {\n      onCustomize(product);\n    }\n  };\n\n  // Para productos variables, mostrar rango de precios\n  const getPriceDisplay = () => {\n    if (product.type === 'variable' && product.price_range) {\n      return (\n        <span className=\"product-price-range\">\n          {formatPrice(product.price_range.min_price)} - {formatPrice(product.price_range.max_price)}\n        </span>\n      );\n    }\n    \n    return (\n      <>\n        {product.on_sale && product.regular_price && (\n          <span className=\"product-price-regular\">{formatPrice(product.regular_price)}</span>\n        )}\n        <span className=\"product-price-sale\">{formatPrice(product.price)}</span>\n      </>\n    );\n  };\n\n  return (\n    <div className=\"product-card\" onClick={handleCardClick}>\n      {product.on_sale && (\n        <div className=\"product-badge\">\n          <Tag size={16} />\n          PROMO\n        </div>\n      )}\n      \n      <div className=\"product-image-container\">\n        {product.images?.[0]?.src ? (\n          <img \n            src={product.images[0].src} \n            alt={product.name}\n            className=\"product-image\"\n            loading=\"lazy\"\n          />\n        ) : (\n          <div className=\"product-image-placeholder\">\n            <ShoppingCart size={48} />\n          </div>\n        )}\n      </div>\n      \n      <div className=\"product-info\">\n        <h3 className=\"product-name\">{product.name}</h3>\n        \n        {product.short_description && (\n          <p className=\"product-description\" \n             dangerouslySetInnerHTML={{ __html: product.short_description }} \n          />\n        )}\n        \n        {/* Mostrar atributos disponibles para productos variables */}\n        {product.attributes?.length > 0 && (\n          <div className=\"product-attributes\">\n            {product.attributes.map(attr => (\n              <span key={attr.id} className=\"attribute-badge\">\n                {attr.options.length} {attr.name}\n              </span>\n            ))}\n          </div>\n        )}\n        \n        <div className=\"product-footer\">\n          <div className=\"product-price\">\n            {getPriceDisplay()}\n          </div>\n          \n          <button \n            className=\"product-btn\"\n            onClick={handleButtonClick}\n            aria-label={needsCustomization() ? 'Personalizar producto' : 'Agregar al carrito'}\n          >\n            {needsCustomization() ? 'Personalizar' : 'Agregar al carrito'}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ProductCard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}